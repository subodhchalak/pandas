
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Indexing and selecting data &#8212; pandas 2.2.3 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css?v=150e0881" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css?v=b7db95b1" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js?v=85e56e6b"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script data-domain="pandas.pydata.org" defer="defer" src="https://views.scientific-python.org/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/indexing';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.pydata.org/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.2';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MultiIndex / advanced indexing" href="advanced.html" />
    <link rel="prev" title="PyArrow Functionality" href="pyarrow.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pandas.svg" class="logo__image only-light" alt="pandas 2.2.3 documentation - Home"/>
    <script>document.write(`<img src="https://pandas.pydata.org/static/img/pandas_white.svg" class="logo__image only-dark" alt="pandas 2.2.3 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">
                        Getting started
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">
                        Development
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../whatsnew/index.html">
                        Release notes
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">
                        Getting started
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">
                        Development
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../whatsnew/index.html">
                        Release notes
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item navbar-nav">
    
    <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="10min.html">10 minutes to pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsintro.html">Intro to data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Essential basic functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">IO tools (text, CSV, HDF5, …)</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyarrow.html">PyArrow Functionality</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Indexing and selecting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">MultiIndex / advanced indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="copy_on_write.html">Copy-on-Write (CoW)</a></li>
<li class="toctree-l1"><a class="reference internal" href="merging.html">Merge, join, concatenate and compare</a></li>
<li class="toctree-l1"><a class="reference internal" href="reshaping.html">Reshaping and pivot tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="text.html">Working with text data</a></li>
<li class="toctree-l1"><a class="reference internal" href="missing_data.html">Working with missing data</a></li>
<li class="toctree-l1"><a class="reference internal" href="duplicates.html">Duplicate Labels</a></li>
<li class="toctree-l1"><a class="reference internal" href="categorical.html">Categorical data</a></li>
<li class="toctree-l1"><a class="reference internal" href="integer_na.html">Nullable integer data type</a></li>
<li class="toctree-l1"><a class="reference internal" href="boolean.html">Nullable Boolean data type</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Chart visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">Table Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="groupby.html">Group by: split-apply-combine</a></li>
<li class="toctree-l1"><a class="reference internal" href="window.html">Windowing operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="timeseries.html">Time series / date functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="timedeltas.html">Time deltas</a></li>
<li class="toctree-l1"><a class="reference internal" href="options.html">Options and settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="enhancingperf.html">Enhancing performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="scale.html">Scaling to large datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="sparse.html">Sparse data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="gotchas.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Cookbook</a></li>
</ul>

    
  </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Indexing...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="indexing-and-selecting-data">
<span id="indexing"></span><h1>Indexing and selecting data<a class="headerlink" href="#indexing-and-selecting-data" title="Link to this heading">#</a></h1>
<p>The axis labeling information in pandas objects serves many purposes:</p>
<ul class="simple">
<li><p>Identifies data (i.e. provides <em>metadata</em>) using known indicators,
important for analysis, visualization, and interactive console display.</p></li>
<li><p>Enables automatic and explicit data alignment.</p></li>
<li><p>Allows intuitive getting and setting of subsets of the data set.</p></li>
</ul>
<p>In this section, we will focus on the final point: namely, how to slice, dice,
and generally get and set subsets of pandas objects. The primary focus will be
on Series and DataFrame as they have received more development attention in
this area.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Python and NumPy indexing operators <code class="docutils literal notranslate"><span class="pre">[]</span></code> and attribute operator <code class="docutils literal notranslate"><span class="pre">.</span></code>
provide quick and easy access to pandas data structures across a wide range
of use cases. This makes interactive work intuitive, as there’s little new
to learn if you already know how to deal with Python dictionaries and NumPy
arrays. However, since the type of the data to be accessed isn’t known in
advance, directly using standard operators has some optimization limits. For
production code, we recommended that you take advantage of the optimized
pandas data access methods exposed in this chapter.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Whether a copy or a reference is returned for a setting operation, may
depend on the context. This is sometimes called <code class="docutils literal notranslate"><span class="pre">chained</span> <span class="pre">assignment</span></code> and
should be avoided. See <a class="reference internal" href="#indexing-view-versus-copy"><span class="std std-ref">Returning a View versus Copy</span></a>.</p>
</div>
<p>See the <a class="reference internal" href="advanced.html#advanced"><span class="std std-ref">MultiIndex / Advanced Indexing</span></a> for <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> and more advanced indexing documentation.</p>
<p>See the <a class="reference internal" href="cookbook.html#cookbook-selection"><span class="std std-ref">cookbook</span></a> for some advanced strategies.</p>
<section id="different-choices-for-indexing">
<span id="indexing-choice"></span><h2>Different choices for indexing<a class="headerlink" href="#different-choices-for-indexing" title="Link to this heading">#</a></h2>
<p>Object selection has had a number of user-requested additions in order to
support more explicit location based indexing. pandas now supports three types
of multi-axis indexing.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">.loc</span></code> is primarily label based, but may also be used with a boolean array. <code class="docutils literal notranslate"><span class="pre">.loc</span></code> will raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> when the items are not found. Allowed inputs are:</p>
<blockquote>
<div><ul class="simple">
<li><p>A single label, e.g. <code class="docutils literal notranslate"><span class="pre">5</span></code> or <code class="docutils literal notranslate"><span class="pre">'a'</span></code> (Note that <code class="docutils literal notranslate"><span class="pre">5</span></code> is interpreted as a
<em>label</em> of the index. This use is <strong>not</strong> an integer position along the
index.).</p></li>
<li><p>A list or array of labels <code class="docutils literal notranslate"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c']</span></code>.</p></li>
<li><p>A slice object with labels <code class="docutils literal notranslate"><span class="pre">'a':'f'</span></code> (Note that contrary to usual Python
slices, <strong>both</strong> the start and the stop are included, when present in the
index! See <a class="reference internal" href="#indexing-slicing-with-labels"><span class="std std-ref">Slicing with labels</span></a>
and <a class="reference internal" href="advanced.html#advanced-endpoints-are-inclusive"><span class="std std-ref">Endpoints are inclusive</span></a>.)</p></li>
<li><p>A boolean array (any <code class="docutils literal notranslate"><span class="pre">NA</span></code> values will be treated as <code class="docutils literal notranslate"><span class="pre">False</span></code>).</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">callable</span></code> function with one argument (the calling Series or DataFrame) and
that returns valid output for indexing (one of the above).</p></li>
<li><p>A tuple of row (and column) indices whose elements are one of the
above inputs.</p></li>
</ul>
</div></blockquote>
<p>See more at <a class="reference internal" href="#indexing-label"><span class="std std-ref">Selection by Label</span></a>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">.iloc</span></code> is primarily integer position based (from <code class="docutils literal notranslate"><span class="pre">0</span></code> to
<code class="docutils literal notranslate"><span class="pre">length-1</span></code> of the axis), but may also be used with a boolean
array.  <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> will raise <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> if a requested
indexer is out-of-bounds, except <em>slice</em> indexers which allow
out-of-bounds indexing.  (this conforms with Python/NumPy <em>slice</em>
semantics).  Allowed inputs are:</p>
<blockquote>
<div><ul class="simple">
<li><p>An integer e.g. <code class="docutils literal notranslate"><span class="pre">5</span></code>.</p></li>
<li><p>A list or array of integers <code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">3,</span> <span class="pre">0]</span></code>.</p></li>
<li><p>A slice object with ints <code class="docutils literal notranslate"><span class="pre">1:7</span></code>.</p></li>
<li><p>A boolean array (any <code class="docutils literal notranslate"><span class="pre">NA</span></code> values will be treated as <code class="docutils literal notranslate"><span class="pre">False</span></code>).</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">callable</span></code> function with one argument (the calling Series or DataFrame) and
that returns valid output for indexing (one of the above).</p></li>
<li><p>A tuple of row (and column) indices whose elements are one of the
above inputs.</p></li>
</ul>
</div></blockquote>
<p>See more at <a class="reference internal" href="#indexing-integer"><span class="std std-ref">Selection by Position</span></a>,
<a class="reference internal" href="advanced.html#advanced"><span class="std std-ref">Advanced Indexing</span></a> and <a class="reference internal" href="advanced.html#advanced-advanced-hierarchical"><span class="std std-ref">Advanced
Hierarchical</span></a>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">.loc</span></code>, <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>, and also <code class="docutils literal notranslate"><span class="pre">[]</span></code> indexing can accept a <code class="docutils literal notranslate"><span class="pre">callable</span></code> as indexer. See more at <a class="reference internal" href="#indexing-callable"><span class="std std-ref">Selection By Callable</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Destructuring tuple keys into row (and column) indexes occurs
<em>before</em> callables are applied, so you cannot return a tuple from
a callable to index both rows and columns.</p>
</div>
</li>
</ul>
<p>Getting values from an object with multi-axes selection uses the following
notation (using <code class="docutils literal notranslate"><span class="pre">.loc</span></code> as an example, but the following applies to <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> as
well). Any of the axes accessors may be the null slice <code class="docutils literal notranslate"><span class="pre">:</span></code>. Axes left out of
the specification are assumed to be <code class="docutils literal notranslate"><span class="pre">:</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">p.loc['a']</span></code> is equivalent to
<code class="docutils literal notranslate"><span class="pre">p.loc['a',</span> <span class="pre">:]</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abcde&quot;</span><span class="p">))</span>

<span class="gp">In [2]: </span><span class="n">ser</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">]]</span>
<span class="gh">Out[2]: </span>
<span class="go">a    0</span>
<span class="go">c    2</span>
<span class="go">e    4</span>
<span class="go">dtype: int64</span>

<span class="gp">In [3]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abcde&quot;</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abcde&quot;</span><span class="p">))</span>

<span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]]</span>
<span class="gh">Out[4]: </span>
<span class="go">    b   d</span>
<span class="go">a   1   3</span>
<span class="go">c  11  13</span>
<span class="go">e  21  23</span>
</pre></div>
</div>
</section>
<section id="basics">
<span id="indexing-basics"></span><h2>Basics<a class="headerlink" href="#basics" title="Link to this heading">#</a></h2>
<p>As mentioned when introducing the data structures in the <a class="reference internal" href="basics.html#basics"><span class="std std-ref">last section</span></a>, the primary function of indexing with <code class="docutils literal notranslate"><span class="pre">[]</span></code> (a.k.a. <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code>
for those familiar with implementing class behavior in Python) is selecting out
lower-dimensional slices. The following table shows return type values when
indexing pandas objects with <code class="docutils literal notranslate"><span class="pre">[]</span></code>:</p>
<table class="table">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Object Type</p></th>
<th class="head"><p>Selection</p></th>
<th class="head"><p>Return Value Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Series</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">series[label]</span></code></p></td>
<td><p>scalar value</p></td>
</tr>
<tr class="row-odd"><td><p>DataFrame</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">frame[colname]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> corresponding to colname</p></td>
</tr>
</tbody>
</table>
<p>Here we construct a simple time series data set to use for illustrating the
indexing functionality:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">   ...: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">])</span>
<span class="gp">   ...: </span>

<span class="gp">In [7]: </span><span class="n">df</span>
<span class="gh">Out[7]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">2000-01-02  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2000-01-03 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">2000-01-04  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">2000-01-05 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="go">2000-01-06 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="go">2000-01-07  0.404705  0.577046 -1.715002 -1.039268</span>
<span class="go">2000-01-08 -0.370647 -1.157892 -1.344312  0.844885</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>None of the indexing functionality is time series specific unless
specifically stated.</p>
</div>
<p>Thus, as per above, we have the most basic indexing using <code class="docutils literal notranslate"><span class="pre">[]</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span>

<span class="gp">In [9]: </span><span class="n">s</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="mi">5</span><span class="p">]]</span>
<span class="gh">Out[9]: </span><span class="go">-0.6736897080883706</span>
</pre></div>
</div>
<p>You can pass a list of columns to <code class="docutils literal notranslate"><span class="pre">[]</span></code> to select columns in that order.
If a column is not contained in the DataFrame, an exception will be
raised. Multiple columns can also be set in this manner:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">df</span>
<span class="gh">Out[10]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">2000-01-02  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2000-01-03 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">2000-01-04  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">2000-01-05 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="go">2000-01-06 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="go">2000-01-07  0.404705  0.577046 -1.715002 -1.039268</span>
<span class="go">2000-01-08 -0.370647 -1.157892 -1.344312  0.844885</span>

<span class="gp">In [11]: </span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]]</span>

<span class="gp">In [12]: </span><span class="n">df</span>
<span class="gh">Out[12]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -0.282863  0.469112 -1.509059 -1.135632</span>
<span class="go">2000-01-02 -0.173215  1.212112  0.119209 -1.044236</span>
<span class="go">2000-01-03 -2.104569 -0.861849 -0.494929  1.071804</span>
<span class="go">2000-01-04 -0.706771  0.721555 -1.039575  0.271860</span>
<span class="go">2000-01-05  0.567020 -0.424972  0.276232 -1.087401</span>
<span class="go">2000-01-06  0.113648 -0.673690 -1.478427  0.524988</span>
<span class="go">2000-01-07  0.577046  0.404705 -1.715002 -1.039268</span>
<span class="go">2000-01-08 -1.157892 -0.370647 -1.344312  0.844885</span>
</pre></div>
</div>
<p>You may find this useful for applying a transform (in-place) to a subset of the
columns.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>pandas aligns all AXES when setting <code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> from <code class="docutils literal notranslate"><span class="pre">.loc</span></code>.</p>
<p>This will <strong>not</strong> modify <code class="docutils literal notranslate"><span class="pre">df</span></code> because the column alignment is before value assignment.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]]</span>
<span class="gh">Out[13]: </span>
<span class="go">                   A         B</span>
<span class="go">2000-01-01 -0.282863  0.469112</span>
<span class="go">2000-01-02 -0.173215  1.212112</span>
<span class="go">2000-01-03 -2.104569 -0.861849</span>
<span class="go">2000-01-04 -0.706771  0.721555</span>
<span class="go">2000-01-05  0.567020 -0.424972</span>
<span class="go">2000-01-06  0.113648 -0.673690</span>
<span class="go">2000-01-07  0.577046  0.404705</span>
<span class="go">2000-01-08 -1.157892 -0.370647</span>

<span class="gp">In [14]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]]</span>

<span class="gp">In [15]: </span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]]</span>
<span class="gh">Out[15]: </span>
<span class="go">                   A         B</span>
<span class="go">2000-01-01 -0.282863  0.469112</span>
<span class="go">2000-01-02 -0.173215  1.212112</span>
<span class="go">2000-01-03 -2.104569 -0.861849</span>
<span class="go">2000-01-04 -0.706771  0.721555</span>
<span class="go">2000-01-05  0.567020 -0.424972</span>
<span class="go">2000-01-06  0.113648 -0.673690</span>
<span class="go">2000-01-07  0.577046  0.404705</span>
<span class="go">2000-01-08 -1.157892 -0.370647</span>
</pre></div>
</div>
<p>The correct way to swap column values is by using raw values:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="gp">In [17]: </span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]]</span>
<span class="gh">Out[17]: </span>
<span class="go">                   A         B</span>
<span class="go">2000-01-01  0.469112 -0.282863</span>
<span class="go">2000-01-02  1.212112 -0.173215</span>
<span class="go">2000-01-03 -0.861849 -2.104569</span>
<span class="go">2000-01-04  0.721555 -0.706771</span>
<span class="go">2000-01-05 -0.424972  0.567020</span>
<span class="go">2000-01-06 -0.673690  0.113648</span>
<span class="go">2000-01-07  0.404705  0.577046</span>
<span class="go">2000-01-08 -0.370647 -1.157892</span>
</pre></div>
</div>
<p>However, pandas does not align AXES when setting <code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> from <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>
because <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> operates by position.</p>
<p>This will modify <code class="docutils literal notranslate"><span class="pre">df</span></code> because the column alignment is not done before value assignment.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]]</span>
<span class="gh">Out[18]: </span>
<span class="go">                   A         B</span>
<span class="go">2000-01-01  0.469112 -0.282863</span>
<span class="go">2000-01-02  1.212112 -0.173215</span>
<span class="go">2000-01-03 -0.861849 -2.104569</span>
<span class="go">2000-01-04  0.721555 -0.706771</span>
<span class="go">2000-01-05 -0.424972  0.567020</span>
<span class="go">2000-01-06 -0.673690  0.113648</span>
<span class="go">2000-01-07  0.404705  0.577046</span>
<span class="go">2000-01-08 -0.370647 -1.157892</span>

<span class="gp">In [19]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]]</span>

<span class="gp">In [20]: </span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">]]</span>
<span class="gh">Out[20]: </span>
<span class="go">                   A         B</span>
<span class="go">2000-01-01 -0.282863  0.469112</span>
<span class="go">2000-01-02 -0.173215  1.212112</span>
<span class="go">2000-01-03 -2.104569 -0.861849</span>
<span class="go">2000-01-04 -0.706771  0.721555</span>
<span class="go">2000-01-05  0.567020 -0.424972</span>
<span class="go">2000-01-06  0.113648 -0.673690</span>
<span class="go">2000-01-07  0.577046  0.404705</span>
<span class="go">2000-01-08 -1.157892 -0.370647</span>
</pre></div>
</div>
</div>
</section>
<section id="attribute-access">
<h2>Attribute access<a class="headerlink" href="#attribute-access" title="Link to this heading">#</a></h2>
<p id="indexing-attribute-access"><span id="indexing-df-cols"></span><span id="indexing-columns-multiple"></span>You may access an index on a <code class="docutils literal notranslate"><span class="pre">Series</span></code> or  column on a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> directly
as an attribute:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [21]: </span><span class="n">sa</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">))</span>

<span class="gp">In [22]: </span><span class="n">dfa</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [23]: </span><span class="n">sa</span><span class="o">.</span><span class="n">b</span>
<span class="gh">Out[23]: </span><span class="go">2</span>

<span class="gp">In [24]: </span><span class="n">dfa</span><span class="o">.</span><span class="n">A</span>
<span class="gh">Out[24]: </span>
<span class="go">2000-01-01   -0.282863</span>
<span class="go">2000-01-02   -0.173215</span>
<span class="go">2000-01-03   -2.104569</span>
<span class="go">2000-01-04   -0.706771</span>
<span class="go">2000-01-05    0.567020</span>
<span class="go">2000-01-06    0.113648</span>
<span class="go">2000-01-07    0.577046</span>
<span class="go">2000-01-08   -1.157892</span>
<span class="go">Freq: D, Name: A, dtype: float64</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">sa</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>

<span class="gp">In [26]: </span><span class="n">sa</span>
<span class="gh">Out[26]: </span>
<span class="go">a    5</span>
<span class="go">b    2</span>
<span class="go">c    3</span>
<span class="go">dtype: int64</span>

<span class="gp">In [27]: </span><span class="n">dfa</span><span class="o">.</span><span class="n">A</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dfa</span><span class="o">.</span><span class="n">index</span><span class="p">)))</span>  <span class="c1"># ok if A already exists</span>

<span class="gp">In [28]: </span><span class="n">dfa</span>
<span class="gh">Out[28]: </span>
<span class="go">            A         B         C         D</span>
<span class="go">2000-01-01  0  0.469112 -1.509059 -1.135632</span>
<span class="go">2000-01-02  1  1.212112  0.119209 -1.044236</span>
<span class="go">2000-01-03  2 -0.861849 -0.494929  1.071804</span>
<span class="go">2000-01-04  3  0.721555 -1.039575  0.271860</span>
<span class="go">2000-01-05  4 -0.424972  0.276232 -1.087401</span>
<span class="go">2000-01-06  5 -0.673690 -1.478427  0.524988</span>
<span class="go">2000-01-07  6  0.404705 -1.715002 -1.039268</span>
<span class="go">2000-01-08  7 -0.370647 -1.344312  0.844885</span>

<span class="gp">In [29]: </span><span class="n">dfa</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dfa</span><span class="o">.</span><span class="n">index</span><span class="p">)))</span>  <span class="c1"># use this form to create a new column</span>

<span class="gp">In [30]: </span><span class="n">dfa</span>
<span class="gh">Out[30]: </span>
<span class="go">            A         B         C         D</span>
<span class="go">2000-01-01  0  0.469112 -1.509059 -1.135632</span>
<span class="go">2000-01-02  1  1.212112  0.119209 -1.044236</span>
<span class="go">2000-01-03  2 -0.861849 -0.494929  1.071804</span>
<span class="go">2000-01-04  3  0.721555 -1.039575  0.271860</span>
<span class="go">2000-01-05  4 -0.424972  0.276232 -1.087401</span>
<span class="go">2000-01-06  5 -0.673690 -1.478427  0.524988</span>
<span class="go">2000-01-07  6  0.404705 -1.715002 -1.039268</span>
<span class="go">2000-01-08  7 -0.370647 -1.344312  0.844885</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>You can use this access only if the index element is a valid Python identifier, e.g. <code class="docutils literal notranslate"><span class="pre">s.1</span></code> is not allowed.
See <a class="reference external" href="https://docs.python.org/3/reference/lexical_analysis.html#identifiers">here for an explanation of valid identifiers</a>.</p></li>
<li><p>The attribute will not be available if it conflicts with an existing method name, e.g. <code class="docutils literal notranslate"><span class="pre">s.min</span></code> is not allowed, but <code class="docutils literal notranslate"><span class="pre">s['min']</span></code> is possible.</p></li>
<li><p>Similarly, the attribute will not be available if it conflicts with any of the following list: <code class="docutils literal notranslate"><span class="pre">index</span></code>,
<code class="docutils literal notranslate"><span class="pre">major_axis</span></code>, <code class="docutils literal notranslate"><span class="pre">minor_axis</span></code>, <code class="docutils literal notranslate"><span class="pre">items</span></code>.</p></li>
<li><p>In any of these cases, standard indexing will still work, e.g. <code class="docutils literal notranslate"><span class="pre">s['1']</span></code>, <code class="docutils literal notranslate"><span class="pre">s['min']</span></code>, and <code class="docutils literal notranslate"><span class="pre">s['index']</span></code> will
access the corresponding element or column.</p></li>
</ul>
</div>
<p>If you are using the IPython environment, you may also use tab-completion to
see these accessible attributes.</p>
<p>You can also assign a <code class="docutils literal notranslate"><span class="pre">dict</span></code> to a row of a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [31]: </span><span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]})</span>

<span class="gp">In [32]: </span><span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">99</span><span class="p">}</span>

<span class="gp">In [33]: </span><span class="n">x</span>
<span class="gh">Out[33]: </span>
<span class="go">   x   y</span>
<span class="go">0  1   3</span>
<span class="go">1  9  99</span>
<span class="go">2  3   5</span>
</pre></div>
</div>
<p>You can use attribute access to modify an existing element of a Series or column of a DataFrame, but be careful;
if you try to use attribute access to create a new column, it creates a new attribute rather than a
new column and will this raise a <code class="docutils literal notranslate"><span class="pre">UserWarning</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [34]: </span><span class="n">df_new</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;one&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]})</span>

<span class="gp">In [35]: </span><span class="n">df_new</span><span class="o">.</span><span class="n">two</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>

<span class="gp">In [36]: </span><span class="n">df_new</span>
<span class="gh">Out[36]: </span>
<span class="go">   one</span>
<span class="go">0  1.0</span>
<span class="go">1  2.0</span>
<span class="go">2  3.0</span>
</pre></div>
</div>
</section>
<section id="slicing-ranges">
<h2>Slicing ranges<a class="headerlink" href="#slicing-ranges" title="Link to this heading">#</a></h2>
<p>The most robust and consistent way of slicing ranges along arbitrary axes is
described in the <a class="reference internal" href="#indexing-integer"><span class="std std-ref">Selection by Position</span></a> section
detailing the <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> method. For now, we explain the semantics of slicing using the <code class="docutils literal notranslate"><span class="pre">[]</span></code> operator.</p>
<p>With Series, the syntax works exactly as with an ndarray, returning a slice of
the values and the corresponding labels:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [37]: </span><span class="n">s</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
<span class="gh">Out[37]: </span>
<span class="go">2000-01-01    0.469112</span>
<span class="go">2000-01-02    1.212112</span>
<span class="go">2000-01-03   -0.861849</span>
<span class="go">2000-01-04    0.721555</span>
<span class="go">2000-01-05   -0.424972</span>
<span class="go">Freq: D, Name: A, dtype: float64</span>

<span class="gp">In [38]: </span><span class="n">s</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>
<span class="gh">Out[38]: </span>
<span class="go">2000-01-01    0.469112</span>
<span class="go">2000-01-03   -0.861849</span>
<span class="go">2000-01-05   -0.424972</span>
<span class="go">2000-01-07    0.404705</span>
<span class="go">Freq: 2D, Name: A, dtype: float64</span>

<span class="gp">In [39]: </span><span class="n">s</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[39]: </span>
<span class="go">2000-01-08   -0.370647</span>
<span class="go">2000-01-07    0.404705</span>
<span class="go">2000-01-06   -0.673690</span>
<span class="go">2000-01-05   -0.424972</span>
<span class="go">2000-01-04    0.721555</span>
<span class="go">2000-01-03   -0.861849</span>
<span class="go">2000-01-02    1.212112</span>
<span class="go">2000-01-01    0.469112</span>
<span class="go">Freq: -1D, Name: A, dtype: float64</span>
</pre></div>
</div>
<p>Note that setting works as well:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [40]: </span><span class="n">s2</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [41]: </span><span class="n">s2</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [42]: </span><span class="n">s2</span>
<span class="gh">Out[42]: </span>
<span class="go">2000-01-01    0.000000</span>
<span class="go">2000-01-02    0.000000</span>
<span class="go">2000-01-03    0.000000</span>
<span class="go">2000-01-04    0.000000</span>
<span class="go">2000-01-05    0.000000</span>
<span class="go">2000-01-06   -0.673690</span>
<span class="go">2000-01-07    0.404705</span>
<span class="go">2000-01-08   -0.370647</span>
<span class="go">Freq: D, Name: A, dtype: float64</span>
</pre></div>
</div>
<p>With DataFrame, slicing inside of <code class="docutils literal notranslate"><span class="pre">[]</span></code> <strong>slices the rows</strong>. This is provided
largely as a convenience since it is such a common operation.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [43]: </span><span class="n">df</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="gh">Out[43]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -0.282863  0.469112 -1.509059 -1.135632</span>
<span class="go">2000-01-02 -0.173215  1.212112  0.119209 -1.044236</span>
<span class="go">2000-01-03 -2.104569 -0.861849 -0.494929  1.071804</span>

<span class="gp">In [44]: </span><span class="n">df</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[44]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-08 -1.157892 -0.370647 -1.344312  0.844885</span>
<span class="go">2000-01-07  0.577046  0.404705 -1.715002 -1.039268</span>
<span class="go">2000-01-06  0.113648 -0.673690 -1.478427  0.524988</span>
<span class="go">2000-01-05  0.567020 -0.424972  0.276232 -1.087401</span>
<span class="go">2000-01-04 -0.706771  0.721555 -1.039575  0.271860</span>
<span class="go">2000-01-03 -2.104569 -0.861849 -0.494929  1.071804</span>
<span class="go">2000-01-02 -0.173215  1.212112  0.119209 -1.044236</span>
<span class="go">2000-01-01 -0.282863  0.469112 -1.509059 -1.135632</span>
</pre></div>
</div>
</section>
<section id="selection-by-label">
<span id="indexing-label"></span><h2>Selection by label<a class="headerlink" href="#selection-by-label" title="Link to this heading">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Whether a copy or a reference is returned for a setting operation, may depend on the context.
This is sometimes called <code class="docutils literal notranslate"><span class="pre">chained</span> <span class="pre">assignment</span></code> and should be avoided.
See <a class="reference internal" href="#indexing-view-versus-copy"><span class="std std-ref">Returning a View versus Copy</span></a>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">.loc</span></code> is strict when you present slicers that are not compatible (or convertible) with the index type. For example
using integers in a <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code>. These will raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [45]: </span><span class="n">dfl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABCD&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">   ....: </span>

<span class="gp">In [46]: </span><span class="n">dfl</span>
<span class="gh">Out[46]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2013-01-01  1.075770 -0.109050  1.643563 -1.469388</span>
<span class="go">2013-01-02  0.357021 -0.674600 -1.776904 -0.968914</span>
<span class="go">2013-01-03 -1.294524  0.413738  0.276662 -0.472035</span>
<span class="go">2013-01-04 -0.013960 -0.362543 -0.006154 -0.923061</span>
<span class="go">2013-01-05  0.895717  0.805244 -1.206412  2.565646</span>

<span class="gp">In [47]: </span><span class="n">dfl</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">47</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">dfl</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:1191,</span> in <span class="ni">_LocationIndexer.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">1189</span> <span class="n">maybe_callable</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">apply_if_callable</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1190</span> <span class="n">maybe_callable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_deprecated_callable_usage</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">maybe_callable</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1191</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_axis</span><span class="p">(</span><span class="n">maybe_callable</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:1411,</span> in <span class="ni">_LocIndexer._getitem_axis</span><span class="nt">(self, key, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1409</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1410</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_validate_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1411</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_slice_axis</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1412</span> <span class="k">elif</span> <span class="n">com</span><span class="o">.</span><span class="n">is_bool_indexer</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1413</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getbool_axis</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:1443,</span> in <span class="ni">_LocIndexer._get_slice_axis</span><span class="nt">(self, slice_obj, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1440</span>     <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1442</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_get_axis</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1443</span> <span class="n">indexer</span> <span class="o">=</span> <span class="n">labels</span><span class="o">.</span><span class="n">slice_indexer</span><span class="p">(</span><span class="n">slice_obj</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">slice_obj</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">slice_obj</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1445</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1446</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_slice</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexes/datetimes.py:682,</span> in <span class="ni">DatetimeIndex.slice_indexer</span><span class="nt">(self, start, end, step)</span>
<span class="g g-Whitespace">    </span><span class="mi">674</span> <span class="c1"># GH#33146 if start and end are combinations of str and None and Index is not</span>
<span class="g g-Whitespace">    </span><span class="mi">675</span> <span class="c1"># monotonic, we can not use Index.slice_indexer because it does not honor the</span>
<span class="g g-Whitespace">    </span><span class="mi">676</span> <span class="c1"># actual elements, is only searching for start and end</span>
<span class="g g-Whitespace">    </span><span class="mi">677</span> <span class="k">if</span> <span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">678</span>     <span class="n">check_str_or_none</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">679</span>     <span class="ow">or</span> <span class="n">check_str_or_none</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">680</span>     <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_monotonic_increasing</span>
<span class="g g-Whitespace">    </span><span class="mi">681</span> <span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">682</span>     <span class="k">return</span> <span class="n">Index</span><span class="o">.</span><span class="n">slice_indexer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">684</span> <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">685</span> <span class="n">in_index</span> <span class="o">=</span> <span class="kc">True</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexes/base.py:6662,</span> in <span class="ni">Index.slice_indexer</span><span class="nt">(self, start, end, step)</span>
<span class="g g-Whitespace">   </span><span class="mi">6618</span> <span class="k">def</span> <span class="nf">slice_indexer</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">6619</span>     <span class="bp">self</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">6620</span>     <span class="n">start</span><span class="p">:</span> <span class="n">Hashable</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">6621</span>     <span class="n">end</span><span class="p">:</span> <span class="n">Hashable</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">6622</span>     <span class="n">step</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">6623</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">slice</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">6624</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">6625</span><span class="sd">     Compute the slice indexer for input labels and step.</span>
<span class="g g-Whitespace">   </span><span class="mi">6626</span><span class="sd"> </span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">   </span><span class="mi">6660</span><span class="sd">     slice(1, 3, None)</span>
<span class="g g-Whitespace">   </span><span class="mi">6661</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">-&gt; </span><span class="mi">6662</span>     <span class="n">start_slice</span><span class="p">,</span> <span class="n">end_slice</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slice_locs</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">step</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6664</span>     <span class="c1"># return a slice</span>
<span class="g g-Whitespace">   </span><span class="mi">6665</span>     <span class="k">if</span> <span class="ow">not</span> <span class="n">is_scalar</span><span class="p">(</span><span class="n">start_slice</span><span class="p">):</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexes/base.py:6879,</span> in <span class="ni">Index.slice_locs</span><span class="nt">(self, start, end, step)</span>
<span class="g g-Whitespace">   </span><span class="mi">6877</span> <span class="n">start_slice</span> <span class="o">=</span> <span class="kc">None</span>
<span class="g g-Whitespace">   </span><span class="mi">6878</span> <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">6879</span>     <span class="n">start_slice</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slice_bound</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6880</span> <span class="k">if</span> <span class="n">start_slice</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">6881</span>     <span class="n">start_slice</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexes/base.py:6794,</span> in <span class="ni">Index.get_slice_bound</span><span class="nt">(self, label, side)</span>
<span class="g g-Whitespace">   </span><span class="mi">6790</span> <span class="n">original_label</span> <span class="o">=</span> <span class="n">label</span>
<span class="g g-Whitespace">   </span><span class="mi">6792</span> <span class="c1"># For datetime indices label may be a string that has to be converted</span>
<span class="g g-Whitespace">   </span><span class="mi">6793</span> <span class="c1"># to datetime boundary according to its resolution.</span>
<span class="ne">-&gt; </span><span class="mi">6794</span> <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maybe_cast_slice_bound</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6796</span> <span class="c1"># we need to look up the label</span>
<span class="g g-Whitespace">   </span><span class="mi">6797</span> <span class="k">try</span><span class="p">:</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexes/datetimes.py:642,</span> in <span class="ni">DatetimeIndex._maybe_cast_slice_bound</span><span class="nt">(self, label, side)</span>
<span class="g g-Whitespace">    </span><span class="mi">637</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">638</span>     <span class="c1"># Pandas supports slicing with dates, treated as datetimes at midnight.</span>
<span class="g g-Whitespace">    </span><span class="mi">639</span>     <span class="c1"># https://github.com/pandas-dev/pandas/issues/31501</span>
<span class="g g-Whitespace">    </span><span class="mi">640</span>     <span class="n">label</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="p">(</span><span class="n">label</span><span class="p">)</span><span class="o">.</span><span class="n">to_pydatetime</span><span class="p">()</span>
<span class="ne">--&gt; </span><span class="mi">642</span> <span class="n">label</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_maybe_cast_slice_bound</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">643</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">_assert_tzawareness_compat</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">644</span> <span class="k">return</span> <span class="n">Timestamp</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexes/datetimelike.py:378,</span> in <span class="ni">DatetimeIndexOpsMixin._maybe_cast_slice_bound</span><span class="nt">(self, label, side)</span>
<span class="g g-Whitespace">    </span><span class="mi">376</span>     <span class="k">return</span> <span class="n">lower</span> <span class="k">if</span> <span class="n">side</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span> <span class="k">else</span> <span class="n">upper</span>
<span class="g g-Whitespace">    </span><span class="mi">377</span> <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">_recognized_scalars</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">378</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_raise_invalid_indexer</span><span class="p">(</span><span class="s2">&quot;slice&quot;</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">380</span> <span class="k">return</span> <span class="n">label</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexes/base.py:4301,</span> in <span class="ni">Index._raise_invalid_indexer</span><span class="nt">(self, form, key, reraise)</span>
<span class="g g-Whitespace">   </span><span class="mi">4299</span> <span class="k">if</span> <span class="n">reraise</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">lib</span><span class="o">.</span><span class="n">no_default</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">4300</span>     <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">reraise</span>
<span class="ne">-&gt; </span><span class="mi">4301</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="ne">TypeError</span>: cannot do slice indexing on DatetimeIndex with these indexers [2] of type int
</pre></div>
</div>
</div></blockquote>
<p>String likes in slicing <em>can</em> be convertible to the type of the index and lead to natural slicing.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [48]: </span><span class="n">dfl</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;20130102&#39;</span><span class="p">:</span><span class="s1">&#39;20130104&#39;</span><span class="p">]</span>
<span class="gh">Out[48]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2013-01-02  0.357021 -0.674600 -1.776904 -0.968914</span>
<span class="go">2013-01-03 -1.294524  0.413738  0.276662 -0.472035</span>
<span class="go">2013-01-04 -0.013960 -0.362543 -0.006154 -0.923061</span>
</pre></div>
</div>
</div>
<p>pandas provides a suite of methods in order to have <strong>purely label based indexing</strong>. This is a strict inclusion based protocol.
Every label asked for must be in the index, or a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.
When slicing, both the start bound <strong>AND</strong> the stop bound are <em>included</em>, if present in the index.
Integers are valid labels, but they refer to the label <strong>and not the position</strong>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.loc</span></code> attribute is the primary access method. The following are valid inputs:</p>
<ul class="simple">
<li><p>A single label, e.g. <code class="docutils literal notranslate"><span class="pre">5</span></code> or <code class="docutils literal notranslate"><span class="pre">'a'</span></code> (Note that <code class="docutils literal notranslate"><span class="pre">5</span></code> is interpreted as a <em>label</em> of the index. This use is <strong>not</strong> an integer position along the index.).</p></li>
<li><p>A list or array of labels <code class="docutils literal notranslate"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c']</span></code>.</p></li>
<li><p>A slice object with labels <code class="docutils literal notranslate"><span class="pre">'a':'f'</span></code> (Note that contrary to usual Python
slices, <strong>both</strong> the start and the stop are included, when present in the
index! See <a class="reference internal" href="#indexing-slicing-with-labels"><span class="std std-ref">Slicing with labels</span></a>.</p></li>
<li><p>A boolean array.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">callable</span></code>, see <a class="reference internal" href="#indexing-callable"><span class="std std-ref">Selection By Callable</span></a>.</p></li>
</ul>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [49]: </span><span class="n">s1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcdef&#39;</span><span class="p">))</span>

<span class="gp">In [50]: </span><span class="n">s1</span>
<span class="gh">Out[50]: </span>
<span class="go">a    1.431256</span>
<span class="go">b    1.340309</span>
<span class="go">c   -1.170299</span>
<span class="go">d   -0.226169</span>
<span class="go">e    0.410835</span>
<span class="go">f    0.813850</span>
<span class="go">dtype: float64</span>

<span class="gp">In [51]: </span><span class="n">s1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">:]</span>
<span class="gh">Out[51]: </span>
<span class="go">c   -1.170299</span>
<span class="go">d   -0.226169</span>
<span class="go">e    0.410835</span>
<span class="go">f    0.813850</span>
<span class="go">dtype: float64</span>

<span class="gp">In [52]: </span><span class="n">s1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="gh">Out[52]: </span><span class="go">1.3403088497993827</span>
</pre></div>
</div>
<p>Note that setting works as well:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [53]: </span><span class="n">s1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">:]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [54]: </span><span class="n">s1</span>
<span class="gh">Out[54]: </span>
<span class="go">a    1.431256</span>
<span class="go">b    1.340309</span>
<span class="go">c    0.000000</span>
<span class="go">d    0.000000</span>
<span class="go">e    0.000000</span>
<span class="go">f    0.000000</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>With a DataFrame:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [55]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcdef&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABCD&#39;</span><span class="p">))</span>
<span class="gp">   ....: </span>

<span class="gp">In [56]: </span><span class="n">df1</span>
<span class="gh">Out[56]: </span>
<span class="go">          A         B         C         D</span>
<span class="go">a  0.132003 -0.827317 -0.076467 -1.187678</span>
<span class="go">b  1.130127 -1.436737 -1.413681  1.607920</span>
<span class="go">c  1.024180  0.569605  0.875906 -2.211372</span>
<span class="go">d  0.974466 -2.006747 -0.410001 -0.078638</span>
<span class="go">e  0.545952 -1.219217 -1.226825  0.769804</span>
<span class="go">f -1.281247 -0.727707 -0.121306 -0.097883</span>

<span class="gp">In [57]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="p">:]</span>
<span class="gh">Out[57]: </span>
<span class="go">          A         B         C         D</span>
<span class="go">a  0.132003 -0.827317 -0.076467 -1.187678</span>
<span class="go">b  1.130127 -1.436737 -1.413681  1.607920</span>
<span class="go">d  0.974466 -2.006747 -0.410001 -0.078638</span>
</pre></div>
</div>
<p>Accessing via label slices:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [58]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">:,</span> <span class="s1">&#39;A&#39;</span><span class="p">:</span><span class="s1">&#39;C&#39;</span><span class="p">]</span>
<span class="gh">Out[58]: </span>
<span class="go">          A         B         C</span>
<span class="go">d  0.974466 -2.006747 -0.410001</span>
<span class="go">e  0.545952 -1.219217 -1.226825</span>
<span class="go">f -1.281247 -0.727707 -0.121306</span>
</pre></div>
</div>
<p>For getting a cross section using a label (equivalent to <code class="docutils literal notranslate"><span class="pre">df.xs('a')</span></code>):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [59]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="gh">Out[59]: </span>
<span class="go">A    0.132003</span>
<span class="go">B   -0.827317</span>
<span class="go">C   -0.076467</span>
<span class="go">D   -1.187678</span>
<span class="go">Name: a, dtype: float64</span>
</pre></div>
</div>
<p>For getting values with a boolean array:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [60]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="gh">Out[60]: </span>
<span class="go">A     True</span>
<span class="go">B    False</span>
<span class="go">C    False</span>
<span class="go">D    False</span>
<span class="go">Name: a, dtype: bool</span>

<span class="gp">In [61]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[61]: </span>
<span class="go">          A</span>
<span class="go">a  0.132003</span>
<span class="go">b  1.130127</span>
<span class="go">c  1.024180</span>
<span class="go">d  0.974466</span>
<span class="go">e  0.545952</span>
<span class="go">f -1.281247</span>
</pre></div>
</div>
<p>NA values in a boolean array propagate as <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [62]: </span><span class="n">mask</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;boolean&quot;</span><span class="p">)</span>

<span class="gp">In [63]: </span><span class="n">mask</span>
<span class="gh">Out[63]: </span>
<span class="go">&lt;BooleanArray&gt;</span>
<span class="go">[True, False, True, False, &lt;NA&gt;, False]</span>
<span class="go">Length: 6, dtype: boolean</span>

<span class="gp">In [64]: </span><span class="n">df1</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="gh">Out[64]: </span>
<span class="go">          A         B         C         D</span>
<span class="go">a  0.132003 -0.827317 -0.076467 -1.187678</span>
<span class="go">c  1.024180  0.569605  0.875906 -2.211372</span>
</pre></div>
</div>
<p>For getting a value explicitly:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># this is also equivalent to ``df1.at[&#39;a&#39;,&#39;A&#39;]``</span>
<span class="gp">In [65]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]</span>
<span class="gh">Out[65]: </span><span class="go">0.13200317033032932</span>
</pre></div>
</div>
<section id="slicing-with-labels">
<span id="indexing-slicing-with-labels"></span><h3>Slicing with labels<a class="headerlink" href="#slicing-with-labels" title="Link to this heading">#</a></h3>
<p>When using <code class="docutils literal notranslate"><span class="pre">.loc</span></code> with slices, if both the start and the stop labels are
present in the index, then elements <em>located</em> between the two (including them)
are returned:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [66]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcde&#39;</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="gp">In [67]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
<span class="gh">Out[67]: </span>
<span class="go">3    b</span>
<span class="go">2    c</span>
<span class="go">5    d</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>If at least one of the two is absent, but the index is sorted, and can be
compared against start and stop labels, then slicing will still work as
expected, by selecting labels which <em>rank</em> between the two:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [68]: </span><span class="n">s</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="gh">Out[68]: </span>
<span class="go">0    a</span>
<span class="go">2    c</span>
<span class="go">3    b</span>
<span class="go">4    e</span>
<span class="go">5    d</span>
<span class="go">dtype: object</span>

<span class="gp">In [69]: </span><span class="n">s</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>
<span class="gh">Out[69]: </span>
<span class="go">2    c</span>
<span class="go">3    b</span>
<span class="go">4    e</span>
<span class="go">5    d</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>However, if at least one of the two is absent <em>and</em> the index is not sorted, an
error will be raised (since doing otherwise would be computationally expensive,
as well as potentially ambiguous for mixed type indexes). For instance, in the
above example, <code class="docutils literal notranslate"><span class="pre">s.loc[1:6]</span></code> would raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>.</p>
<p>For the rationale behind this behavior, see
<a class="reference internal" href="advanced.html#advanced-endpoints-are-inclusive"><span class="std std-ref">Endpoints are inclusive</span></a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [70]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcdef&#39;</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="gp">In [71]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
<span class="gh">Out[71]: </span>
<span class="go">3    b</span>
<span class="go">2    c</span>
<span class="go">5    d</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Also, if the index has duplicate labels <em>and</em> either the start or the stop label is duplicated,
an error will be raised. For instance, in the above example, <code class="docutils literal notranslate"><span class="pre">s.loc[2:5]</span></code> would raise a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>.</p>
<p>For more information about duplicate labels, see
<a class="reference internal" href="duplicates.html#duplicates"><span class="std std-ref">Duplicate Labels</span></a>.</p>
</section>
</section>
<section id="selection-by-position">
<span id="indexing-integer"></span><h2>Selection by position<a class="headerlink" href="#selection-by-position" title="Link to this heading">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Whether a copy or a reference is returned for a setting operation, may depend on the context.
This is sometimes called <code class="docutils literal notranslate"><span class="pre">chained</span> <span class="pre">assignment</span></code> and should be avoided.
See <a class="reference internal" href="#indexing-view-versus-copy"><span class="std std-ref">Returning a View versus Copy</span></a>.</p>
</div>
<p>pandas provides a suite of methods in order to get <strong>purely integer based indexing</strong>. The semantics follow closely Python and NumPy slicing. These are <code class="docutils literal notranslate"><span class="pre">0-based</span></code> indexing. When slicing, the start bound is <em>included</em>, while the upper bound is <em>excluded</em>. Trying to use a non-integer, even a <strong>valid</strong> label will raise an <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> attribute is the primary access method. The following are valid inputs:</p>
<ul class="simple">
<li><p>An integer e.g. <code class="docutils literal notranslate"><span class="pre">5</span></code>.</p></li>
<li><p>A list or array of integers <code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">3,</span> <span class="pre">0]</span></code>.</p></li>
<li><p>A slice object with ints <code class="docutils literal notranslate"><span class="pre">1:7</span></code>.</p></li>
<li><p>A boolean array.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">callable</span></code>, see <a class="reference internal" href="#indexing-callable"><span class="std std-ref">Selection By Callable</span></a>.</p></li>
<li><p>A tuple of row (and column) indexes, whose elements are one of the
above types.</p></li>
</ul>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [72]: </span><span class="n">s1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>

<span class="gp">In [73]: </span><span class="n">s1</span>
<span class="gh">Out[73]: </span>
<span class="go">0    0.695775</span>
<span class="go">2    0.341734</span>
<span class="go">4    0.959726</span>
<span class="go">6   -1.110336</span>
<span class="go">8   -0.619976</span>
<span class="go">dtype: float64</span>

<span class="gp">In [74]: </span><span class="n">s1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="gh">Out[74]: </span>
<span class="go">0    0.695775</span>
<span class="go">2    0.341734</span>
<span class="go">4    0.959726</span>
<span class="go">dtype: float64</span>

<span class="gp">In [75]: </span><span class="n">s1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="gh">Out[75]: </span><span class="go">-1.110336102891167</span>
</pre></div>
</div>
<p>Note that setting works as well:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [76]: </span><span class="n">s1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [77]: </span><span class="n">s1</span>
<span class="gh">Out[77]: </span>
<span class="go">0    0.000000</span>
<span class="go">2    0.000000</span>
<span class="go">4    0.000000</span>
<span class="go">6   -1.110336</span>
<span class="go">8   -0.619976</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>With a DataFrame:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [78]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
<span class="gp">   ....: </span>                   <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
<span class="gp">   ....: </span>

<span class="gp">In [79]: </span><span class="n">df1</span>
<span class="gh">Out[79]: </span>
<span class="go">           0         2         4         6</span>
<span class="go">0   0.149748 -0.732339  0.687738  0.176444</span>
<span class="go">2   0.403310 -0.154951  0.301624 -2.179861</span>
<span class="go">4  -1.369849 -0.954208  1.462696 -1.743161</span>
<span class="go">6  -0.826591 -0.345352  1.314232  0.690579</span>
<span class="go">8   0.995761  2.396780  0.014871  3.357427</span>
<span class="go">10 -0.317441 -1.236269  0.896171 -0.487602</span>
</pre></div>
</div>
<p>Select via integer slicing:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [80]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="gh">Out[80]: </span>
<span class="go">          0         2         4         6</span>
<span class="go">0  0.149748 -0.732339  0.687738  0.176444</span>
<span class="go">2  0.403310 -0.154951  0.301624 -2.179861</span>
<span class="go">4 -1.369849 -0.954208  1.462696 -1.743161</span>

<span class="gp">In [81]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="gh">Out[81]: </span>
<span class="go">          4         6</span>
<span class="go">2  0.301624 -2.179861</span>
<span class="go">4  1.462696 -1.743161</span>
<span class="go">6  1.314232  0.690579</span>
<span class="go">8  0.014871  3.357427</span>
</pre></div>
</div>
<p>Select via integer list:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [82]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gh">Out[82]: </span>
<span class="go">           2         6</span>
<span class="go">2  -0.154951 -2.179861</span>
<span class="go">6  -0.345352  0.690579</span>
<span class="go">10 -1.236269 -0.487602</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [83]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:]</span>
<span class="gh">Out[83]: </span>
<span class="go">          0         2         4         6</span>
<span class="go">2  0.403310 -0.154951  0.301624 -2.179861</span>
<span class="go">4 -1.369849 -0.954208  1.462696 -1.743161</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [84]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="gh">Out[84]: </span>
<span class="go">           2         4</span>
<span class="go">0  -0.732339  0.687738</span>
<span class="go">2  -0.154951  0.301624</span>
<span class="go">4  -0.954208  1.462696</span>
<span class="go">6  -0.345352  1.314232</span>
<span class="go">8   2.396780  0.014871</span>
<span class="go">10 -1.236269  0.896171</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># this is also equivalent to ``df1.iat[1,1]``</span>
<span class="gp">In [85]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[85]: </span><span class="go">-0.1549507744249032</span>
</pre></div>
</div>
<p>For getting a cross section using an integer position (equiv to <code class="docutils literal notranslate"><span class="pre">df.xs(1)</span></code>):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [86]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[86]: </span>
<span class="go">0    0.403310</span>
<span class="go">2   -0.154951</span>
<span class="go">4    0.301624</span>
<span class="go">6   -2.179861</span>
<span class="go">Name: 2, dtype: float64</span>
</pre></div>
</div>
<p>Out of range slice indexes are handled gracefully just as in Python/NumPy.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># these are allowed in Python/NumPy.</span>
<span class="gp">In [87]: </span><span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcdef&#39;</span><span class="p">)</span>

<span class="gp">In [88]: </span><span class="n">x</span>
<span class="gh">Out[88]: </span><span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;]</span>

<span class="gp">In [89]: </span><span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="gh">Out[89]: </span><span class="go">[&#39;e&#39;, &#39;f&#39;]</span>

<span class="gp">In [90]: </span><span class="n">x</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="gh">Out[90]: </span><span class="go">[]</span>

<span class="gp">In [91]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="gp">In [92]: </span><span class="n">s</span>
<span class="gh">Out[92]: </span>
<span class="go">0    a</span>
<span class="go">1    b</span>
<span class="go">2    c</span>
<span class="go">3    d</span>
<span class="go">4    e</span>
<span class="go">5    f</span>
<span class="go">dtype: object</span>

<span class="gp">In [93]: </span><span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="gh">Out[93]: </span>
<span class="go">4    e</span>
<span class="go">5    f</span>
<span class="go">dtype: object</span>

<span class="gp">In [94]: </span><span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="gh">Out[94]: </span><span class="go">Series([], dtype: object)</span>
</pre></div>
</div>
<p>Note that using slices that go out of bounds can result in
an empty axis (e.g. an empty DataFrame being returned).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [95]: </span><span class="n">dfl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [96]: </span><span class="n">dfl</span>
<span class="gh">Out[96]: </span>
<span class="go">          A         B</span>
<span class="go">0 -0.082240 -2.182937</span>
<span class="go">1  0.380396  0.084844</span>
<span class="go">2  0.432390  1.519970</span>
<span class="go">3 -0.493662  0.600178</span>
<span class="go">4  0.274230  0.132885</span>

<span class="gp">In [97]: </span><span class="n">dfl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="gh">Out[97]: </span>
<span class="go">Empty DataFrame</span>
<span class="go">Columns: []</span>
<span class="go">Index: [0, 1, 2, 3, 4]</span>

<span class="gp">In [98]: </span><span class="n">dfl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="gh">Out[98]: </span>
<span class="go">          B</span>
<span class="go">0 -2.182937</span>
<span class="go">1  0.084844</span>
<span class="go">2  1.519970</span>
<span class="go">3  0.600178</span>
<span class="go">4  0.132885</span>

<span class="gp">In [99]: </span><span class="n">dfl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>
<span class="gh">Out[99]: </span>
<span class="go">         A         B</span>
<span class="go">4  0.27423  0.132885</span>
</pre></div>
</div>
<p>A single indexer that is out of bounds will raise an <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>.
A list of indexers where any element is out of bounds will raise an
<code class="docutils literal notranslate"><span class="pre">IndexError</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [100]: </span><span class="n">dfl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">IndexError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:1714,</span> in <span class="ni">_iLocIndexer._get_list_axis</span><span class="nt">(self, key, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1713</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1714</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_take_with_is_copy</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1715</span> <span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1716</span>     <span class="c1"># re-raise with different error message, e.g. test_getitem_ndarray_3d</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/generic.py:4153,</span> in <span class="ni">NDFrame._take_with_is_copy</span><span class="nt">(self, indices, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">4144</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">4145</span><span class="sd"> Internal version of the `take` method that sets the `_is_copy`</span>
<span class="g g-Whitespace">   </span><span class="mi">4146</span><span class="sd"> attribute to keep track of the parent dataframe (using in indexing</span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">   </span><span class="mi">4151</span><span class="sd"> See the docstring of `take` for full explanation of the parameters.</span>
<span class="g g-Whitespace">   </span><span class="mi">4152</span><span class="sd"> &quot;&quot;&quot;</span>
<span class="ne">-&gt; </span><span class="mi">4153</span> <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">indices</span><span class="o">=</span><span class="n">indices</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4154</span> <span class="c1"># Maybe set copy if we didn&#39;t actually change the index.</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/generic.py:4133,</span> in <span class="ni">NDFrame.take</span><span class="nt">(self, indices, axis, **kwargs)</span>
<span class="g g-Whitespace">   </span><span class="mi">4129</span>     <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">4130</span>         <span class="n">indices</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">step</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">intp</span>
<span class="g g-Whitespace">   </span><span class="mi">4131</span>     <span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">4133</span> <span class="n">new_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mgr</span><span class="o">.</span><span class="n">take</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">4134</span>     <span class="n">indices</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">4135</span>     <span class="n">axis</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_block_manager_axis</span><span class="p">(</span><span class="n">axis</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">4136</span>     <span class="n">verify</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">4137</span> <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4138</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructor_from_mgr</span><span class="p">(</span><span class="n">new_data</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="n">new_data</span><span class="o">.</span><span class="n">axes</span><span class="p">)</span><span class="o">.</span><span class="n">__finalize__</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">4139</span>     <span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;take&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">4140</span> <span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/internals/managers.py:891,</span> in <span class="ni">BaseBlockManager.take</span><span class="nt">(self, indexer, axis, verify)</span>
<span class="g g-Whitespace">    </span><span class="mi">890</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span>
<span class="ne">--&gt; </span><span class="mi">891</span> <span class="n">indexer</span> <span class="o">=</span> <span class="n">maybe_convert_indices</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">893</span> <span class="n">new_labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">indexer</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexers/utils.py:282,</span> in <span class="ni">maybe_convert_indices</span><span class="nt">(indices, n, verify)</span>
<span class="g g-Whitespace">    </span><span class="mi">281</span>     <span class="k">if</span> <span class="n">mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
<span class="ne">--&gt; </span><span class="mi">282</span>         <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;indices are out-of-bounds&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">283</span> <span class="k">return</span> <span class="n">indices</span>

<span class="ne">IndexError</span>: indices are out-of-bounds

<span class="n">The</span> <span class="n">above</span> <span class="n">exception</span> <span class="n">was</span> <span class="n">the</span> <span class="n">direct</span> <span class="n">cause</span> <span class="n">of</span> <span class="n">the</span> <span class="n">following</span> <span class="n">exception</span><span class="p">:</span>

<span class="ne">IndexError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">100</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">dfl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:1191,</span> in <span class="ni">_LocationIndexer.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">1189</span> <span class="n">maybe_callable</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">apply_if_callable</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1190</span> <span class="n">maybe_callable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_deprecated_callable_usage</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">maybe_callable</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1191</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_axis</span><span class="p">(</span><span class="n">maybe_callable</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:1743,</span> in <span class="ni">_iLocIndexer._getitem_axis</span><span class="nt">(self, key, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1741</span> <span class="c1"># a list of integers</span>
<span class="g g-Whitespace">   </span><span class="mi">1742</span> <span class="k">elif</span> <span class="n">is_list_like_indexer</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
<span class="ne">-&gt; </span><span class="mi">1743</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_list_axis</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1745</span> <span class="c1"># a single integer</span>
<span class="g g-Whitespace">   </span><span class="mi">1746</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1747</span>     <span class="n">key</span> <span class="o">=</span> <span class="n">item_from_zerodim</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:1717,</span> in <span class="ni">_iLocIndexer._get_list_axis</span><span class="nt">(self, key, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1714</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_take_with_is_copy</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1715</span> <span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1716</span>     <span class="c1"># re-raise with different error message, e.g. test_getitem_ndarray_3d</span>
<span class="ne">-&gt; </span><span class="mi">1717</span>     <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;positional indexers are out-of-bounds&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>

<span class="ne">IndexError</span>: positional indexers are out-of-bounds
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [101]: </span><span class="n">dfl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">IndexError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">101</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">dfl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:1184,</span> in <span class="ni">_LocationIndexer.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">1182</span>     <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_scalar_access</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1183</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_get_value</span><span class="p">(</span><span class="o">*</span><span class="n">key</span><span class="p">,</span> <span class="n">takeable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_takeable</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1184</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_tuple</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1185</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1186</span>     <span class="c1"># we by definition only have the 0th axis</span>
<span class="g g-Whitespace">   </span><span class="mi">1187</span>     <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span> <span class="ow">or</span> <span class="mi">0</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:1690,</span> in <span class="ni">_iLocIndexer._getitem_tuple</span><span class="nt">(self, tup)</span>
<span class="g g-Whitespace">   </span><span class="mi">1689</span> <span class="k">def</span> <span class="nf">_getitem_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tup</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">):</span>
<span class="ne">-&gt; </span><span class="mi">1690</span>     <span class="n">tup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_tuple_indexer</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1691</span>     <span class="k">with</span> <span class="n">suppress</span><span class="p">(</span><span class="n">IndexingError</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1692</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_lowerdim</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:966,</span> in <span class="ni">_LocationIndexer._validate_tuple_indexer</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">    </span><span class="mi">964</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">965</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">966</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_validate_key</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">967</span>     <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">968</span>         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">969</span>             <span class="s2">&quot;Location based indexing can only have &quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">970</span>             <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_valid_types</span><span class="si">}</span><span class="s2">] types&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">971</span>         <span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:1592,</span> in <span class="ni">_iLocIndexer._validate_key</span><span class="nt">(self, key, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1590</span>     <span class="k">return</span>
<span class="g g-Whitespace">   </span><span class="mi">1591</span> <span class="k">elif</span> <span class="n">is_integer</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
<span class="ne">-&gt; </span><span class="mi">1592</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_validate_integer</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1593</span> <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1594</span>     <span class="c1"># a tuple should already have been caught by this point</span>
<span class="g g-Whitespace">   </span><span class="mi">1595</span>     <span class="c1"># so don&#39;t treat a tuple as a valid indexer</span>
<span class="g g-Whitespace">   </span><span class="mi">1596</span>     <span class="k">raise</span> <span class="n">IndexingError</span><span class="p">(</span><span class="s2">&quot;Too many indexers&quot;</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexing.py:1685,</span> in <span class="ni">_iLocIndexer._validate_integer</span><span class="nt">(self, key, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1683</span> <span class="n">len_axis</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_get_axis</span><span class="p">(</span><span class="n">axis</span><span class="p">))</span>
<span class="g g-Whitespace">   </span><span class="mi">1684</span> <span class="k">if</span> <span class="n">key</span> <span class="o">&gt;=</span> <span class="n">len_axis</span> <span class="ow">or</span> <span class="n">key</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">len_axis</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1685</span>     <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;single positional indexer is out-of-bounds&quot;</span><span class="p">)</span>

<span class="ne">IndexError</span>: single positional indexer is out-of-bounds
</pre></div>
</div>
</section>
<section id="selection-by-callable">
<span id="indexing-callable"></span><h2>Selection by callable<a class="headerlink" href="#selection-by-callable" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">.loc</span></code>, <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>, and also <code class="docutils literal notranslate"><span class="pre">[]</span></code> indexing can accept a <code class="docutils literal notranslate"><span class="pre">callable</span></code> as indexer.
The <code class="docutils literal notranslate"><span class="pre">callable</span></code> must be a function with one argument (the calling Series or DataFrame) that returns valid output for indexing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> indexing, returning a tuple from the callable is
not supported, since tuple destructuring for row and column indexes
occurs <em>before</em> applying callables.</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [102]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">   .....: </span>                   <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcdef&#39;</span><span class="p">),</span>
<span class="gp">   .....: </span>                   <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABCD&#39;</span><span class="p">))</span>
<span class="gp">   .....: </span>

<span class="gp">In [103]: </span><span class="n">df1</span>
<span class="gh">Out[103]: </span>
<span class="go">          A         B         C         D</span>
<span class="go">a -0.023688  2.410179  1.450520  0.206053</span>
<span class="go">b -0.251905 -2.213588  1.063327  1.266143</span>
<span class="go">c  0.299368 -0.863838  0.408204 -1.048089</span>
<span class="go">d -0.025747 -0.988387  0.094055  1.262731</span>
<span class="go">e  1.289997  0.082423 -0.055758  0.536580</span>
<span class="go">f -0.489682  0.369374 -0.034571 -2.484478</span>

<span class="gp">In [104]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
<span class="gh">Out[104]: </span>
<span class="go">          A         B         C         D</span>
<span class="go">c  0.299368 -0.863838  0.408204 -1.048089</span>
<span class="go">e  1.289997  0.082423 -0.055758  0.536580</span>

<span class="gp">In [105]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]]</span>
<span class="gh">Out[105]: </span>
<span class="go">          A         B</span>
<span class="go">a -0.023688  2.410179</span>
<span class="go">b -0.251905 -2.213588</span>
<span class="go">c  0.299368 -0.863838</span>
<span class="go">d -0.025747 -0.988387</span>
<span class="go">e  1.289997  0.082423</span>
<span class="go">f -0.489682  0.369374</span>

<span class="gp">In [106]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="gh">Out[106]: </span>
<span class="go">          A         B</span>
<span class="go">a -0.023688  2.410179</span>
<span class="go">b -0.251905 -2.213588</span>
<span class="go">c  0.299368 -0.863838</span>
<span class="go">d -0.025747 -0.988387</span>
<span class="go">e  1.289997  0.082423</span>
<span class="go">f -0.489682  0.369374</span>

<span class="gp">In [107]: </span><span class="n">df1</span><span class="p">[</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
<span class="gh">Out[107]: </span>
<span class="go">a   -0.023688</span>
<span class="go">b   -0.251905</span>
<span class="go">c    0.299368</span>
<span class="go">d   -0.025747</span>
<span class="go">e    1.289997</span>
<span class="go">f   -0.489682</span>
<span class="go">Name: A, dtype: float64</span>
</pre></div>
</div>
<p>You can use callable indexing in <code class="docutils literal notranslate"><span class="pre">Series</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [108]: </span><span class="n">df1</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[108]: </span>
<span class="go">c    0.299368</span>
<span class="go">e    1.289997</span>
<span class="go">Name: A, dtype: float64</span>
</pre></div>
</div>
<p>Using these methods / indexers, you can chain data selection operations
without using a temporary variable.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [109]: </span><span class="n">bb</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/baseball.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>

<span class="gp">In [110]: </span><span class="p">(</span><span class="n">bb</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;team&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">numeric_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">   .....: </span>   <span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">])</span>
<span class="gp">   .....: </span>
<span class="gh">Out[110]: </span>
<span class="go">           stint    g    ab    r    h  X2b  ...     so   ibb   hbp    sh    sf  gidp</span>
<span class="go">year team                                   ...                                     </span>
<span class="go">2007 CIN       6  379   745  101  203   35  ...  127.0  14.0   1.0   1.0  15.0  18.0</span>
<span class="go">     DET       5  301  1062  162  283   54  ...  176.0   3.0  10.0   4.0   8.0  28.0</span>
<span class="go">     HOU       4  311   926  109  218   47  ...  212.0   3.0   9.0  16.0   6.0  17.0</span>
<span class="go">     LAN      11  413  1021  153  293   61  ...  141.0   8.0   9.0   3.0   8.0  29.0</span>
<span class="go">     NYN      13  622  1854  240  509  101  ...  310.0  24.0  23.0  18.0  15.0  48.0</span>
<span class="go">     SFN       5  482  1305  198  337   67  ...  188.0  51.0   8.0  16.0   6.0  41.0</span>
<span class="go">     TEX       2  198   729  115  200   40  ...  140.0   4.0   5.0   2.0   8.0  16.0</span>
<span class="go">     TOR       4  459  1408  187  378   96  ...  265.0  16.0  12.0   4.0  16.0  38.0</span>

<span class="go">[8 rows x 18 columns]</span>
</pre></div>
</div>
</section>
<section id="combining-positional-and-label-based-indexing">
<span id="id1"></span><h2>Combining positional and label-based indexing<a class="headerlink" href="#combining-positional-and-label-based-indexing" title="Link to this heading">#</a></h2>
<p>If you wish to get the 0th and the 2nd elements from the index in the ‘A’ column, you can do:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [111]: </span><span class="n">dfd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   .....: </span>                    <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]},</span>
<span class="gp">   .....: </span>                   <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">))</span>
<span class="gp">   .....: </span>

<span class="gp">In [112]: </span><span class="n">dfd</span>
<span class="gh">Out[112]: </span>
<span class="go">   A  B</span>
<span class="go">a  1  4</span>
<span class="go">b  2  5</span>
<span class="go">c  3  6</span>

<span class="gp">In [113]: </span><span class="n">dfd</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">dfd</span><span class="o">.</span><span class="n">index</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span> <span class="s1">&#39;A&#39;</span><span class="p">]</span>
<span class="gh">Out[113]: </span>
<span class="go">a    1</span>
<span class="go">c    3</span>
<span class="go">Name: A, dtype: int64</span>
</pre></div>
</div>
<p>This can also be expressed using <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>, by explicitly getting locations on the indexers, and using
<em>positional</em> indexing to select things.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [114]: </span><span class="n">dfd</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">dfd</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)]</span>
<span class="gh">Out[114]: </span>
<span class="go">a    1</span>
<span class="go">c    3</span>
<span class="go">Name: A, dtype: int64</span>
</pre></div>
</div>
<p>For getting <em>multiple</em> indexers, using <code class="docutils literal notranslate"><span class="pre">.get_indexer</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [115]: </span><span class="n">dfd</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">dfd</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_indexer</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">])]</span>
<span class="gh">Out[115]: </span>
<span class="go">   A  B</span>
<span class="go">a  1  4</span>
<span class="go">c  3  6</span>
</pre></div>
</div>
<section id="reindexing">
<h3>Reindexing<a class="headerlink" href="#reindexing" title="Link to this heading">#</a></h3>
<p>The idiomatic way to achieve selecting potentially not-found elements is via <code class="docutils literal notranslate"><span class="pre">.reindex()</span></code>. See also the section on <a class="reference internal" href="basics.html#basics-reindexing"><span class="std std-ref">reindexing</span></a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [116]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [117]: </span><span class="n">s</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gh">Out[117]: </span>
<span class="go">1    2.0</span>
<span class="go">2    3.0</span>
<span class="go">3    NaN</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>Alternatively, if you want to select only <em>valid</em> keys, the following is idiomatic and efficient; it is guaranteed to preserve the dtype of the selection.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [118]: </span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="gp">In [119]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">labels</span><span class="p">)]</span>
<span class="gh">Out[119]: </span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>Having a duplicated index will raise for a <code class="docutils literal notranslate"><span class="pre">.reindex()</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [120]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="gp">In [121]: </span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]</span>

<span class="gp">In [122]: </span><span class="n">s</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">122</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">s</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/series.py:5153,</span> in <span class="ni">Series.reindex</span><span class="nt">(self, index, axis, method, copy, level, fill_value, limit, tolerance)</span>
<span class="g g-Whitespace">   </span><span class="mi">5136</span> <span class="nd">@doc</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5137</span>     <span class="n">NDFrame</span><span class="o">.</span><span class="n">reindex</span><span class="p">,</span>  <span class="c1"># type: ignore[has-type]</span>
<span class="g g-Whitespace">   </span><span class="mi">5138</span>     <span class="n">klass</span><span class="o">=</span><span class="n">_shared_doc_kwargs</span><span class="p">[</span><span class="s2">&quot;klass&quot;</span><span class="p">],</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">5151</span>     <span class="n">tolerance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5152</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Series</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">5153</span>     <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5154</span>         <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5155</span>         <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5156</span>         <span class="n">copy</span><span class="o">=</span><span class="n">copy</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5157</span>         <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5158</span>         <span class="n">fill_value</span><span class="o">=</span><span class="n">fill_value</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5159</span>         <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5160</span>         <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5161</span>     <span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/generic.py:5610,</span> in <span class="ni">NDFrame.reindex</span><span class="nt">(self, labels, index, columns, axis, method, copy, level, fill_value, limit, tolerance)</span>
<span class="g g-Whitespace">   </span><span class="mi">5607</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reindex_multi</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span> <span class="n">fill_value</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">5609</span> <span class="c1"># perform the reindex on the axes</span>
<span class="ne">-&gt; </span><span class="mi">5610</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reindex_axes</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5611</span>     <span class="n">axes</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">fill_value</span><span class="p">,</span> <span class="n">copy</span>
<span class="g g-Whitespace">   </span><span class="mi">5612</span> <span class="p">)</span><span class="o">.</span><span class="n">__finalize__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;reindex&quot;</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/generic.py:5633,</span> in <span class="ni">NDFrame._reindex_axes</span><span class="nt">(self, axes, level, limit, tolerance, method, fill_value, copy)</span>
<span class="g g-Whitespace">   </span><span class="mi">5630</span>     <span class="k">continue</span>
<span class="g g-Whitespace">   </span><span class="mi">5632</span> <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">5633</span> <span class="n">new_index</span><span class="p">,</span> <span class="n">indexer</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5634</span>     <span class="n">labels</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span>
<span class="g g-Whitespace">   </span><span class="mi">5635</span> <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">5637</span> <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_number</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">5638</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_reindex_with_indexers</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5639</span>     <span class="p">{</span><span class="n">axis</span><span class="p">:</span> <span class="p">[</span><span class="n">new_index</span><span class="p">,</span> <span class="n">indexer</span><span class="p">]},</span>
<span class="g g-Whitespace">   </span><span class="mi">5640</span>     <span class="n">fill_value</span><span class="o">=</span><span class="n">fill_value</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5641</span>     <span class="n">copy</span><span class="o">=</span><span class="n">copy</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5642</span>     <span class="n">allow_dups</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5643</span> <span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexes/base.py:4429,</span> in <span class="ni">Index.reindex</span><span class="nt">(self, target, method, level, limit, tolerance)</span>
<span class="g g-Whitespace">   </span><span class="mi">4426</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;cannot handle a non-unique multi-index!&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4427</span> <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_unique</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">4428</span>     <span class="c1"># GH#42568</span>
<span class="ne">-&gt; </span><span class="mi">4429</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;cannot reindex on an axis with duplicate labels&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4430</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">4431</span>     <span class="n">indexer</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_indexer_non_unique</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>

<span class="ne">ValueError</span>: cannot reindex on an axis with duplicate labels
</pre></div>
</div>
<p>Generally, you can intersect the desired labels with the current
axis, and then reindex.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [123]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">labels</span><span class="p">)]</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
<span class="gh">Out[123]: </span>
<span class="go">c    3.0</span>
<span class="go">d    NaN</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>However, this would <em>still</em> raise if your resulting index is duplicated.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [124]: </span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]</span>

<span class="gp">In [125]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">labels</span><span class="p">)]</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">125</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">labels</span><span class="p">)]</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/series.py:5153,</span> in <span class="ni">Series.reindex</span><span class="nt">(self, index, axis, method, copy, level, fill_value, limit, tolerance)</span>
<span class="g g-Whitespace">   </span><span class="mi">5136</span> <span class="nd">@doc</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5137</span>     <span class="n">NDFrame</span><span class="o">.</span><span class="n">reindex</span><span class="p">,</span>  <span class="c1"># type: ignore[has-type]</span>
<span class="g g-Whitespace">   </span><span class="mi">5138</span>     <span class="n">klass</span><span class="o">=</span><span class="n">_shared_doc_kwargs</span><span class="p">[</span><span class="s2">&quot;klass&quot;</span><span class="p">],</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">5151</span>     <span class="n">tolerance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5152</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Series</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">5153</span>     <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5154</span>         <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5155</span>         <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5156</span>         <span class="n">copy</span><span class="o">=</span><span class="n">copy</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5157</span>         <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5158</span>         <span class="n">fill_value</span><span class="o">=</span><span class="n">fill_value</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5159</span>         <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5160</span>         <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5161</span>     <span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/generic.py:5610,</span> in <span class="ni">NDFrame.reindex</span><span class="nt">(self, labels, index, columns, axis, method, copy, level, fill_value, limit, tolerance)</span>
<span class="g g-Whitespace">   </span><span class="mi">5607</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reindex_multi</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span> <span class="n">fill_value</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">5609</span> <span class="c1"># perform the reindex on the axes</span>
<span class="ne">-&gt; </span><span class="mi">5610</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reindex_axes</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5611</span>     <span class="n">axes</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">fill_value</span><span class="p">,</span> <span class="n">copy</span>
<span class="g g-Whitespace">   </span><span class="mi">5612</span> <span class="p">)</span><span class="o">.</span><span class="n">__finalize__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;reindex&quot;</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/generic.py:5633,</span> in <span class="ni">NDFrame._reindex_axes</span><span class="nt">(self, axes, level, limit, tolerance, method, fill_value, copy)</span>
<span class="g g-Whitespace">   </span><span class="mi">5630</span>     <span class="k">continue</span>
<span class="g g-Whitespace">   </span><span class="mi">5632</span> <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">5633</span> <span class="n">new_index</span><span class="p">,</span> <span class="n">indexer</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5634</span>     <span class="n">labels</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span>
<span class="g g-Whitespace">   </span><span class="mi">5635</span> <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">5637</span> <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_number</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">5638</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_reindex_with_indexers</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5639</span>     <span class="p">{</span><span class="n">axis</span><span class="p">:</span> <span class="p">[</span><span class="n">new_index</span><span class="p">,</span> <span class="n">indexer</span><span class="p">]},</span>
<span class="g g-Whitespace">   </span><span class="mi">5640</span>     <span class="n">fill_value</span><span class="o">=</span><span class="n">fill_value</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5641</span>     <span class="n">copy</span><span class="o">=</span><span class="n">copy</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5642</span>     <span class="n">allow_dups</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">5643</span> <span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexes/base.py:4429,</span> in <span class="ni">Index.reindex</span><span class="nt">(self, target, method, level, limit, tolerance)</span>
<span class="g g-Whitespace">   </span><span class="mi">4426</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;cannot handle a non-unique multi-index!&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4427</span> <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_unique</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">4428</span>     <span class="c1"># GH#42568</span>
<span class="ne">-&gt; </span><span class="mi">4429</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;cannot reindex on an axis with duplicate labels&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4430</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">4431</span>     <span class="n">indexer</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_indexer_non_unique</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>

<span class="ne">ValueError</span>: cannot reindex on an axis with duplicate labels
</pre></div>
</div>
</section>
</section>
<section id="selecting-random-samples">
<span id="indexing-basics-partial-setting"></span><h2>Selecting random samples<a class="headerlink" href="#selecting-random-samples" title="Link to this heading">#</a></h2>
<p>A random selection of rows or columns from a Series or DataFrame with the <a class="reference internal" href="../reference/api/pandas.DataFrame.sample.html#pandas.DataFrame.sample" title="pandas.DataFrame.sample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sample()</span></code></a> method. The method will sample rows by default, and accepts a specific number of rows/columns to return, or a fraction of rows.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [126]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="go"># When no arguments are passed, returns 1 row.</span>
<span class="gp">In [127]: </span><span class="n">s</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
<span class="gh">Out[127]: </span>
<span class="go">4    4</span>
<span class="go">dtype: int64</span>

<span class="go"># One may specify either a number of rows:</span>
<span class="gp">In [128]: </span><span class="n">s</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gh">Out[128]: </span>
<span class="go">0    0</span>
<span class="go">4    4</span>
<span class="go">1    1</span>
<span class="go">dtype: int64</span>

<span class="go"># Or a fraction of the rows:</span>
<span class="gp">In [129]: </span><span class="n">s</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gh">Out[129]: </span>
<span class="go">5    5</span>
<span class="go">3    3</span>
<span class="go">1    1</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">sample</span></code> will return each row at most once, but one can also sample with replacement
using the <code class="docutils literal notranslate"><span class="pre">replace</span></code> option:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [130]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="go"># Without replacement (default):</span>
<span class="gp">In [131]: </span><span class="n">s</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[131]: </span>
<span class="go">0    0</span>
<span class="go">1    1</span>
<span class="go">5    5</span>
<span class="go">3    3</span>
<span class="go">2    2</span>
<span class="go">4    4</span>
<span class="go">dtype: int64</span>

<span class="go"># With replacement:</span>
<span class="gp">In [132]: </span><span class="n">s</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[132]: </span>
<span class="go">0    0</span>
<span class="go">4    4</span>
<span class="go">3    3</span>
<span class="go">2    2</span>
<span class="go">4    4</span>
<span class="go">4    4</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>By default, each row has an equal probability of being selected, but if you want rows
to have different probabilities, you can pass the <code class="docutils literal notranslate"><span class="pre">sample</span></code> function sampling weights as
<code class="docutils literal notranslate"><span class="pre">weights</span></code>. These weights can be a list, a NumPy array, or a Series, but they must be of the same length as the object you are sampling. Missing values will be treated as a weight of zero, and inf values are not allowed. If weights do not sum to 1, they will be re-normalized by dividing all weights by the sum of the weights. For example:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [133]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="gp">In [134]: </span><span class="n">example_weights</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">]</span>

<span class="gp">In [135]: </span><span class="n">s</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">example_weights</span><span class="p">)</span>
<span class="gh">Out[135]: </span>
<span class="go">5    5</span>
<span class="go">4    4</span>
<span class="go">3    3</span>
<span class="go">dtype: int64</span>

<span class="go"># Weights will be re-normalized automatically</span>
<span class="gp">In [136]: </span><span class="n">example_weights2</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="gp">In [137]: </span><span class="n">s</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">example_weights2</span><span class="p">)</span>
<span class="gh">Out[137]: </span>
<span class="go">0    0</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>When applied to a DataFrame, you can use a column of the DataFrame as sampling weights
(provided you are sampling rows and not columns) by simply passing the name of the column
as a string.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [138]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<span class="gp">   .....: </span>                    <span class="s1">&#39;weight_column&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]})</span>
<span class="gp">   .....: </span>

<span class="gp">In [139]: </span><span class="n">df2</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="s1">&#39;weight_column&#39;</span><span class="p">)</span>
<span class="gh">Out[139]: </span>
<span class="go">   col1  weight_column</span>
<span class="go">1     8            0.4</span>
<span class="go">0     9            0.5</span>
<span class="go">2     7            0.1</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">sample</span></code> also allows users to sample columns instead of rows using the <code class="docutils literal notranslate"><span class="pre">axis</span></code> argument.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [140]: </span><span class="n">df3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;col2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="gp">In [141]: </span><span class="n">df3</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[141]: </span>
<span class="go">   col1</span>
<span class="go">0     1</span>
<span class="go">1     2</span>
<span class="go">2     3</span>
</pre></div>
</div>
<p>Finally, one can also set a seed for <code class="docutils literal notranslate"><span class="pre">sample</span></code>’s random number generator using the <code class="docutils literal notranslate"><span class="pre">random_state</span></code> argument, which will accept either an integer (as a seed) or a NumPy RandomState object.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [142]: </span><span class="n">df4</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;col2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="go"># With a given seed, the sample will always draw the same rows.</span>
<span class="gp">In [143]: </span><span class="n">df4</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[143]: </span>
<span class="go">   col1  col2</span>
<span class="go">2     3     4</span>
<span class="go">1     2     3</span>

<span class="gp">In [144]: </span><span class="n">df4</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[144]: </span>
<span class="go">   col1  col2</span>
<span class="go">2     3     4</span>
<span class="go">1     2     3</span>
</pre></div>
</div>
</section>
<section id="setting-with-enlargement">
<h2>Setting with enlargement<a class="headerlink" href="#setting-with-enlargement" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">.loc/[]</span></code> operations can perform enlargement when setting a non-existent key for that axis.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">Series</span></code> case this is effectively an appending operation.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [145]: </span><span class="n">se</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [146]: </span><span class="n">se</span>
<span class="gh">Out[146]: </span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">dtype: int64</span>

<span class="gp">In [147]: </span><span class="n">se</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mf">5.</span>

<span class="gp">In [148]: </span><span class="n">se</span>
<span class="gh">Out[148]: </span>
<span class="go">0    1.0</span>
<span class="go">1    2.0</span>
<span class="go">2    3.0</span>
<span class="go">5    5.0</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> can be enlarged on either axis via <code class="docutils literal notranslate"><span class="pre">.loc</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [149]: </span><span class="n">dfi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">   .....: </span>                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span>

<span class="gp">In [150]: </span><span class="n">dfi</span>
<span class="gh">Out[150]: </span>
<span class="go">   A  B</span>
<span class="go">0  0  1</span>
<span class="go">1  2  3</span>
<span class="go">2  4  5</span>

<span class="gp">In [151]: </span><span class="n">dfi</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;C&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfi</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;A&#39;</span><span class="p">]</span>

<span class="gp">In [152]: </span><span class="n">dfi</span>
<span class="gh">Out[152]: </span>
<span class="go">   A  B  C</span>
<span class="go">0  0  1  0</span>
<span class="go">1  2  3  2</span>
<span class="go">2  4  5  4</span>
</pre></div>
</div>
<p>This is like an <code class="docutils literal notranslate"><span class="pre">append</span></code> operation on the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [153]: </span><span class="n">dfi</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="gp">In [154]: </span><span class="n">dfi</span>
<span class="gh">Out[154]: </span>
<span class="go">   A  B  C</span>
<span class="go">0  0  1  0</span>
<span class="go">1  2  3  2</span>
<span class="go">2  4  5  4</span>
<span class="go">3  5  5  5</span>
</pre></div>
</div>
</section>
<section id="fast-scalar-value-getting-and-setting">
<span id="indexing-basics-get-value"></span><h2>Fast scalar value getting and setting<a class="headerlink" href="#fast-scalar-value-getting-and-setting" title="Link to this heading">#</a></h2>
<p>Since indexing with <code class="docutils literal notranslate"><span class="pre">[]</span></code> must handle a lot of cases (single-label access,
slicing, boolean indexing, etc.), it has a bit of overhead in order to figure
out what you’re asking for. If you only want to access a scalar value, the
fastest way is to use the <code class="docutils literal notranslate"><span class="pre">at</span></code> and <code class="docutils literal notranslate"><span class="pre">iat</span></code> methods, which are implemented on
all of the data structures.</p>
<p>Similarly to <code class="docutils literal notranslate"><span class="pre">loc</span></code>, <code class="docutils literal notranslate"><span class="pre">at</span></code> provides <strong>label</strong> based scalar lookups, while, <code class="docutils literal notranslate"><span class="pre">iat</span></code> provides <strong>integer</strong> based lookups analogously to <code class="docutils literal notranslate"><span class="pre">iloc</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [155]: </span><span class="n">s</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="gh">Out[155]: </span><span class="go">5</span>

<span class="gp">In [156]: </span><span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="s1">&#39;A&#39;</span><span class="p">]</span>
<span class="gh">Out[156]: </span><span class="go">0.1136484096888855</span>

<span class="gp">In [157]: </span><span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[157]: </span><span class="go">-0.7067711336300845</span>
</pre></div>
</div>
<p>You can also set using these same indexers.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [158]: </span><span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="s1">&#39;E&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span>

<span class="gp">In [159]: </span><span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">at</span></code> may enlarge the object in-place as above if the indexer is missing.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [160]: </span><span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="s1">&#39;1 day&#39;</span><span class="p">),</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span>

<span class="gp">In [161]: </span><span class="n">df</span>
<span class="gh">Out[161]: </span>
<span class="go">                   A         B         C         D    E    0</span>
<span class="go">2000-01-01 -0.282863  0.469112 -1.509059 -1.135632  NaN  NaN</span>
<span class="go">2000-01-02 -0.173215  1.212112  0.119209 -1.044236  NaN  NaN</span>
<span class="go">2000-01-03 -2.104569 -0.861849 -0.494929  1.071804  NaN  NaN</span>
<span class="go">2000-01-04  7.000000  0.721555 -1.039575  0.271860  NaN  NaN</span>
<span class="go">2000-01-05  0.567020 -0.424972  0.276232 -1.087401  NaN  NaN</span>
<span class="go">2000-01-06  0.113648 -0.673690 -1.478427  0.524988  7.0  NaN</span>
<span class="go">2000-01-07  0.577046  0.404705 -1.715002 -1.039268  NaN  NaN</span>
<span class="go">2000-01-08 -1.157892 -0.370647 -1.344312  0.844885  NaN  NaN</span>
<span class="go">2000-01-09       NaN       NaN       NaN       NaN  NaN  7.0</span>
</pre></div>
</div>
</section>
<section id="boolean-indexing">
<h2>Boolean indexing<a class="headerlink" href="#boolean-indexing" title="Link to this heading">#</a></h2>
<p id="indexing-boolean">Another common operation is the use of boolean vectors to filter the data.
The operators are: <code class="docutils literal notranslate"><span class="pre">|</span></code> for <code class="docutils literal notranslate"><span class="pre">or</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> for <code class="docutils literal notranslate"><span class="pre">and</span></code>, and <code class="docutils literal notranslate"><span class="pre">~</span></code> for <code class="docutils literal notranslate"><span class="pre">not</span></code>.
These <strong>must</strong> be grouped by using parentheses, since by default Python will
evaluate an expression such as <code class="docutils literal notranslate"><span class="pre">df['A']</span> <span class="pre">&gt;</span> <span class="pre">2</span> <span class="pre">&amp;</span> <span class="pre">df['B']</span> <span class="pre">&lt;</span> <span class="pre">3</span></code> as
<code class="docutils literal notranslate"><span class="pre">df['A']</span> <span class="pre">&gt;</span> <span class="pre">(2</span> <span class="pre">&amp;</span> <span class="pre">df['B'])</span> <span class="pre">&lt;</span> <span class="pre">3</span></code>, while the desired evaluation order is
<code class="docutils literal notranslate"><span class="pre">(df['A']</span> <span class="pre">&gt;</span> <span class="pre">2)</span> <span class="pre">&amp;</span> <span class="pre">(df['B']</span> <span class="pre">&lt;</span> <span class="pre">3)</span></code>.</p>
<p>Using a boolean vector to index a Series works exactly as in a NumPy ndarray:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [162]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="gp">In [163]: </span><span class="n">s</span>
<span class="gh">Out[163]: </span>
<span class="go">0   -3</span>
<span class="go">1   -2</span>
<span class="go">2   -1</span>
<span class="go">3    0</span>
<span class="go">4    1</span>
<span class="go">5    2</span>
<span class="go">6    3</span>
<span class="go">dtype: int64</span>

<span class="gp">In [164]: </span><span class="n">s</span><span class="p">[</span><span class="n">s</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[164]: </span>
<span class="go">4    1</span>
<span class="go">5    2</span>
<span class="go">6    3</span>
<span class="go">dtype: int64</span>

<span class="gp">In [165]: </span><span class="n">s</span><span class="p">[(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">s</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">)]</span>
<span class="gh">Out[165]: </span>
<span class="go">0   -3</span>
<span class="go">1   -2</span>
<span class="go">4    1</span>
<span class="go">5    2</span>
<span class="go">6    3</span>
<span class="go">dtype: int64</span>

<span class="gp">In [166]: </span><span class="n">s</span><span class="p">[</span><span class="o">~</span><span class="p">(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gh">Out[166]: </span>
<span class="go">3    0</span>
<span class="go">4    1</span>
<span class="go">5    2</span>
<span class="go">6    3</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>You may select rows from a DataFrame using a boolean vector the same length as
the DataFrame’s index (for example, something derived from one of the columns
of the DataFrame):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [167]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[167]: </span>
<span class="go">                   A         B         C         D    E   0</span>
<span class="go">2000-01-04  7.000000  0.721555 -1.039575  0.271860  NaN NaN</span>
<span class="go">2000-01-05  0.567020 -0.424972  0.276232 -1.087401  NaN NaN</span>
<span class="go">2000-01-06  0.113648 -0.673690 -1.478427  0.524988  7.0 NaN</span>
<span class="go">2000-01-07  0.577046  0.404705 -1.715002 -1.039268  NaN NaN</span>
</pre></div>
</div>
<p>List comprehensions and the <code class="docutils literal notranslate"><span class="pre">map</span></code> method of Series can also be used to produce
more complex criteria:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [168]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;six&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">7</span><span class="p">)})</span>
<span class="gp">   .....: </span>

<span class="go"># only want &#39;two&#39; or &#39;three&#39;</span>
<span class="gp">In [169]: </span><span class="n">criterion</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">))</span>

<span class="gp">In [170]: </span><span class="n">df2</span><span class="p">[</span><span class="n">criterion</span><span class="p">]</span>
<span class="gh">Out[170]: </span>
<span class="go">       a  b         c</span>
<span class="go">2    two  y  0.041290</span>
<span class="go">3  three  x  0.361719</span>
<span class="go">4    two  y -0.238075</span>

<span class="go"># equivalent but slower</span>
<span class="gp">In [171]: </span><span class="n">df2</span><span class="p">[[</span><span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]]]</span>
<span class="gh">Out[171]: </span>
<span class="go">       a  b         c</span>
<span class="go">2    two  y  0.041290</span>
<span class="go">3  three  x  0.361719</span>
<span class="go">4    two  y -0.238075</span>

<span class="go"># Multiple criteria</span>
<span class="gp">In [172]: </span><span class="n">df2</span><span class="p">[</span><span class="n">criterion</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">)]</span>
<span class="gh">Out[172]: </span>
<span class="go">       a  b         c</span>
<span class="go">3  three  x  0.361719</span>
</pre></div>
</div>
<p>With the choice methods <a class="reference internal" href="#indexing-label"><span class="std std-ref">Selection by Label</span></a>, <a class="reference internal" href="#indexing-integer"><span class="std std-ref">Selection by Position</span></a>,
and <a class="reference internal" href="advanced.html#advanced"><span class="std std-ref">Advanced Indexing</span></a> you may select along more than one axis using boolean vectors combined with other indexing expressions.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [173]: </span><span class="n">df2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">criterion</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="gh">Out[173]: </span>
<span class="go">   b         c</span>
<span class="go">3  x  0.361719</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">iloc</span></code> supports two kinds of boolean indexing. If the indexer is a boolean <code class="docutils literal notranslate"><span class="pre">Series</span></code>,
an error will be raised. For instance, in the following example, <code class="docutils literal notranslate"><span class="pre">df.iloc[s.values,</span> <span class="pre">1]</span></code> is ok.
The boolean indexer is an array. But <code class="docutils literal notranslate"><span class="pre">df.iloc[s,</span> <span class="pre">1]</span></code> would raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [174]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]],</span>
<span class="gp">   .....: </span>                  <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">),</span>
<span class="gp">   .....: </span>                  <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span>

<span class="gp">In [175]: </span><span class="n">s</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>

<span class="gp">In [176]: </span><span class="n">s</span>
<span class="gh">Out[176]: </span>
<span class="go">a    False</span>
<span class="go">b     True</span>
<span class="go">c     True</span>
<span class="go">Name: A, dtype: bool</span>

<span class="gp">In [177]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>
<span class="gh">Out[177]: </span>
<span class="go">b    4</span>
<span class="go">c    6</span>
<span class="go">Name: B, dtype: int64</span>

<span class="gp">In [178]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[178]: </span>
<span class="go">b    4</span>
<span class="go">c    6</span>
<span class="go">Name: B, dtype: int64</span>
</pre></div>
</div>
</div>
</section>
<section id="indexing-with-isin">
<span id="indexing-basics-indexing-isin"></span><h2>Indexing with isin<a class="headerlink" href="#indexing-with-isin" title="Link to this heading">#</a></h2>
<p>Consider the <a class="reference internal" href="../reference/api/pandas.Series.isin.html#pandas.Series.isin" title="pandas.Series.isin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isin()</span></code></a> method of <code class="docutils literal notranslate"><span class="pre">Series</span></code>, which returns a boolean
vector that is true wherever the <code class="docutils literal notranslate"><span class="pre">Series</span></code> elements exist in the passed list.
This allows you to select rows where one or more columns have values you want:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [179]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int64&#39;</span><span class="p">)</span>

<span class="gp">In [180]: </span><span class="n">s</span>
<span class="gh">Out[180]: </span>
<span class="go">4    0</span>
<span class="go">3    1</span>
<span class="go">2    2</span>
<span class="go">1    3</span>
<span class="go">0    4</span>
<span class="go">dtype: int64</span>

<span class="gp">In [181]: </span><span class="n">s</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="gh">Out[181]: </span>
<span class="go">4    False</span>
<span class="go">3    False</span>
<span class="go">2     True</span>
<span class="go">1    False</span>
<span class="go">0     True</span>
<span class="go">dtype: bool</span>

<span class="gp">In [182]: </span><span class="n">s</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">])]</span>
<span class="gh">Out[182]: </span>
<span class="go">2    2</span>
<span class="go">0    4</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>The same method is available for <code class="docutils literal notranslate"><span class="pre">Index</span></code> objects and is useful for the cases
when you don’t know which of the sought labels are in fact present:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [183]: </span><span class="n">s</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">])]</span>
<span class="gh">Out[183]: </span>
<span class="go">4    0</span>
<span class="go">2    2</span>
<span class="go">dtype: int64</span>

<span class="go"># compare it to the following</span>
<span class="gp">In [184]: </span><span class="n">s</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="gh">Out[184]: </span>
<span class="go">2    2.0</span>
<span class="go">4    0.0</span>
<span class="go">6    NaN</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>In addition to that, <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> allows selecting a separate level to use
in the membership check:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [185]: </span><span class="n">s_mi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>
<span class="gp">   .....: </span>                 <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]]))</span>
<span class="gp">   .....: </span>

<span class="gp">In [186]: </span><span class="n">s_mi</span>
<span class="gh">Out[186]: </span>
<span class="go">0  a    0</span>
<span class="go">   b    1</span>
<span class="go">   c    2</span>
<span class="go">1  a    3</span>
<span class="go">   b    4</span>
<span class="go">   c    5</span>
<span class="go">dtype: int64</span>

<span class="gp">In [187]: </span><span class="n">s_mi</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">s_mi</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)])]</span>
<span class="gh">Out[187]: </span>
<span class="go">0  c    2</span>
<span class="go">1  a    3</span>
<span class="go">dtype: int64</span>

<span class="gp">In [188]: </span><span class="n">s_mi</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">s_mi</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">],</span> <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
<span class="gh">Out[188]: </span>
<span class="go">0  a    0</span>
<span class="go">   c    2</span>
<span class="go">1  a    3</span>
<span class="go">   c    5</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>DataFrame also has an <a class="reference internal" href="../reference/api/pandas.DataFrame.isin.html#pandas.DataFrame.isin" title="pandas.DataFrame.isin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isin()</span></code></a> method.  When calling <code class="docutils literal notranslate"><span class="pre">isin</span></code>, pass a set of
values as either an array or dict.  If values is an array, <code class="docutils literal notranslate"><span class="pre">isin</span></code> returns
a DataFrame of booleans that is the same shape as the original DataFrame, with True
wherever the element is in the sequence of values.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [189]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;vals&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;ids&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="s1">&#39;ids2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]})</span>
<span class="gp">   .....: </span>

<span class="gp">In [190]: </span><span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="gp">In [191]: </span><span class="n">df</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gh">Out[191]: </span>
<span class="go">    vals    ids   ids2</span>
<span class="go">0   True   True   True</span>
<span class="go">1  False   True  False</span>
<span class="go">2   True  False  False</span>
<span class="go">3  False  False  False</span>
</pre></div>
</div>
<p>Oftentimes you’ll want to match certain values with certain columns.
Just make values a <code class="docutils literal notranslate"><span class="pre">dict</span></code> where the key is the column, and the value is
a list of items you want to check for.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [192]: </span><span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ids&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="s1">&#39;vals&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="gp">In [193]: </span><span class="n">df</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gh">Out[193]: </span>
<span class="go">    vals    ids   ids2</span>
<span class="go">0   True   True  False</span>
<span class="go">1  False   True  False</span>
<span class="go">2   True  False  False</span>
<span class="go">3  False  False  False</span>
</pre></div>
</div>
<p>To return the DataFrame of booleans where the values are <em>not</em> in the original DataFrame,
use the <code class="docutils literal notranslate"><span class="pre">~</span></code> operator:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [194]: </span><span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ids&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="s1">&#39;vals&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="gp">In [195]: </span><span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gh">Out[195]: </span>
<span class="go">    vals    ids  ids2</span>
<span class="go">0  False  False  True</span>
<span class="go">1   True  False  True</span>
<span class="go">2  False   True  True</span>
<span class="go">3   True   True  True</span>
</pre></div>
</div>
<p>Combine DataFrame’s <code class="docutils literal notranslate"><span class="pre">isin</span></code> with the <code class="docutils literal notranslate"><span class="pre">any()</span></code> and <code class="docutils literal notranslate"><span class="pre">all()</span></code> methods to
quickly select subsets of your data that meet a given criteria.
To select a row where each column meets its own criterion:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [196]: </span><span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ids&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="s1">&#39;ids2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="s1">&#39;vals&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="gp">In [197]: </span><span class="n">row_mask</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="gp">In [198]: </span><span class="n">df</span><span class="p">[</span><span class="n">row_mask</span><span class="p">]</span>
<span class="gh">Out[198]: </span>
<span class="go">   vals ids ids2</span>
<span class="go">0     1   a    a</span>
</pre></div>
</div>
</section>
<section id="the-where-method-and-masking">
<span id="indexing-where-mask"></span><h2>The <a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">where()</span></code></a> Method and Masking<a class="headerlink" href="#the-where-method-and-masking" title="Link to this heading">#</a></h2>
<p>Selecting values from a Series with a boolean vector generally returns a
subset of the data. To guarantee that selection output has the same shape as
the original data, you can use the <code class="docutils literal notranslate"><span class="pre">where</span></code> method in <code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<p>To return only the selected rows:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [199]: </span><span class="n">s</span><span class="p">[</span><span class="n">s</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[199]: </span>
<span class="go">3    1</span>
<span class="go">2    2</span>
<span class="go">1    3</span>
<span class="go">0    4</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>To return a Series of the same shape as the original:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [200]: </span><span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">s</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[200]: </span>
<span class="go">4    NaN</span>
<span class="go">3    1.0</span>
<span class="go">2    2.0</span>
<span class="go">1    3.0</span>
<span class="go">0    4.0</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>Selecting values from a DataFrame with a boolean criterion now also preserves
input data shape. <code class="docutils literal notranslate"><span class="pre">where</span></code> is used under the hood as the implementation.
The code below is equivalent to <code class="docutils literal notranslate"><span class="pre">df.where(df</span> <span class="pre">&lt;</span> <span class="pre">0)</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [201]: </span><span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="gp">In [202]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">   .....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span>

<span class="gp">In [203]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[203]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -2.104139 -1.309525       NaN       NaN</span>
<span class="go">2000-01-02 -0.352480       NaN -1.192319       NaN</span>
<span class="go">2000-01-03 -0.864883       NaN -0.227870       NaN</span>
<span class="go">2000-01-04       NaN -1.222082       NaN -1.233203</span>
<span class="go">2000-01-05       NaN -0.605656 -1.169184       NaN</span>
<span class="go">2000-01-06       NaN -0.948458       NaN -0.684718</span>
<span class="go">2000-01-07 -2.670153 -0.114722       NaN -0.048048</span>
<span class="go">2000-01-08       NaN       NaN -0.048788 -0.808838</span>
</pre></div>
</div>
<p>In addition, <code class="docutils literal notranslate"><span class="pre">where</span></code> takes an optional <code class="docutils literal notranslate"><span class="pre">other</span></code> argument for replacement of
values where the condition is False, in the returned copy.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [204]: </span><span class="n">df</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">df</span><span class="p">)</span>
<span class="gh">Out[204]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -2.104139 -1.309525 -0.485855 -0.245166</span>
<span class="go">2000-01-02 -0.352480 -0.390389 -1.192319 -1.655824</span>
<span class="go">2000-01-03 -0.864883 -0.299674 -0.227870 -0.281059</span>
<span class="go">2000-01-04 -0.846958 -1.222082 -0.600705 -1.233203</span>
<span class="go">2000-01-05 -0.669692 -0.605656 -1.169184 -0.342416</span>
<span class="go">2000-01-06 -0.868584 -0.948458 -2.297780 -0.684718</span>
<span class="go">2000-01-07 -2.670153 -0.114722 -0.168904 -0.048048</span>
<span class="go">2000-01-08 -0.801196 -1.392071 -0.048788 -0.808838</span>
</pre></div>
</div>
<p>You may wish to set values based on some boolean criteria.
This can be done intuitively like so:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [205]: </span><span class="n">s2</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [206]: </span><span class="n">s2</span><span class="p">[</span><span class="n">s2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [207]: </span><span class="n">s2</span>
<span class="gh">Out[207]: </span>
<span class="go">4    0</span>
<span class="go">3    1</span>
<span class="go">2    2</span>
<span class="go">1    3</span>
<span class="go">0    4</span>
<span class="go">dtype: int64</span>

<span class="gp">In [208]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [209]: </span><span class="n">df2</span><span class="p">[</span><span class="n">df2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [210]: </span><span class="n">df2</span>
<span class="gh">Out[210]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01  0.000000  0.000000  0.485855  0.245166</span>
<span class="go">2000-01-02  0.000000  0.390389  0.000000  1.655824</span>
<span class="go">2000-01-03  0.000000  0.299674  0.000000  0.281059</span>
<span class="go">2000-01-04  0.846958  0.000000  0.600705  0.000000</span>
<span class="go">2000-01-05  0.669692  0.000000  0.000000  0.342416</span>
<span class="go">2000-01-06  0.868584  0.000000  2.297780  0.000000</span>
<span class="go">2000-01-07  0.000000  0.000000  0.168904  0.000000</span>
<span class="go">2000-01-08  0.801196  1.392071  0.000000  0.000000</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">where</span></code> returns a modified copy of the data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The signature for <a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> differs from <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.where.html#numpy.where" title="(in NumPy v2.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.where()</span></code></a>.
Roughly <code class="docutils literal notranslate"><span class="pre">df1.where(m,</span> <span class="pre">df2)</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">np.where(m,</span> <span class="pre">df1,</span> <span class="pre">df2)</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [211]: </span><span class="n">df</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">df</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="o">-</span><span class="n">df</span><span class="p">)</span>
<span class="gh">Out[211]: </span>
<span class="go">               A     B     C     D</span>
<span class="go">2000-01-01  True  True  True  True</span>
<span class="go">2000-01-02  True  True  True  True</span>
<span class="go">2000-01-03  True  True  True  True</span>
<span class="go">2000-01-04  True  True  True  True</span>
<span class="go">2000-01-05  True  True  True  True</span>
<span class="go">2000-01-06  True  True  True  True</span>
<span class="go">2000-01-07  True  True  True  True</span>
<span class="go">2000-01-08  True  True  True  True</span>
</pre></div>
</div>
</div>
<p><strong>Alignment</strong></p>
<p>Furthermore, <code class="docutils literal notranslate"><span class="pre">where</span></code> aligns the input boolean condition (ndarray or DataFrame),
such that partial selection with setting is possible. This is analogous to
partial setting via <code class="docutils literal notranslate"><span class="pre">.loc</span></code> (but on the contents rather than the axis labels).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [212]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [213]: </span><span class="n">df2</span><span class="p">[</span><span class="n">df2</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>

<span class="gp">In [214]: </span><span class="n">df2</span>
<span class="gh">Out[214]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -2.104139 -1.309525  0.485855  0.245166</span>
<span class="go">2000-01-02 -0.352480  3.000000 -1.192319  3.000000</span>
<span class="go">2000-01-03 -0.864883  3.000000 -0.227870  3.000000</span>
<span class="go">2000-01-04  3.000000 -1.222082  3.000000 -1.233203</span>
<span class="go">2000-01-05  0.669692 -0.605656 -1.169184  0.342416</span>
<span class="go">2000-01-06  0.868584 -0.948458  2.297780 -0.684718</span>
<span class="go">2000-01-07 -2.670153 -0.114722  0.168904 -0.048048</span>
<span class="go">2000-01-08  0.801196  1.392071 -0.048788 -0.808838</span>
</pre></div>
</div>
<p>Where can also accept <code class="docutils literal notranslate"><span class="pre">axis</span></code> and <code class="docutils literal notranslate"><span class="pre">level</span></code> parameters to align the input when
performing the <code class="docutils literal notranslate"><span class="pre">where</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [215]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [216]: </span><span class="n">df2</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="gh">Out[216]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -2.104139 -2.104139  0.485855  0.245166</span>
<span class="go">2000-01-02 -0.352480  0.390389 -0.352480  1.655824</span>
<span class="go">2000-01-03 -0.864883  0.299674 -0.864883  0.281059</span>
<span class="go">2000-01-04  0.846958  0.846958  0.600705  0.846958</span>
<span class="go">2000-01-05  0.669692  0.669692  0.669692  0.342416</span>
<span class="go">2000-01-06  0.868584  0.868584  2.297780  0.868584</span>
<span class="go">2000-01-07 -2.670153 -2.670153  0.168904 -2.670153</span>
<span class="go">2000-01-08  0.801196  1.392071  0.801196  0.801196</span>
</pre></div>
</div>
<p>This is equivalent to (but faster than) the following.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [217]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [218]: </span><span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">])</span>
<span class="gh">Out[218]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -2.104139 -2.104139  0.485855  0.245166</span>
<span class="go">2000-01-02 -0.352480  0.390389 -0.352480  1.655824</span>
<span class="go">2000-01-03 -0.864883  0.299674 -0.864883  0.281059</span>
<span class="go">2000-01-04  0.846958  0.846958  0.600705  0.846958</span>
<span class="go">2000-01-05  0.669692  0.669692  0.669692  0.342416</span>
<span class="go">2000-01-06  0.868584  0.868584  2.297780  0.868584</span>
<span class="go">2000-01-07 -2.670153 -2.670153  0.168904 -2.670153</span>
<span class="go">2000-01-08  0.801196  1.392071  0.801196  0.801196</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">where</span></code> can accept a callable as condition and <code class="docutils literal notranslate"><span class="pre">other</span></code> arguments. The function must
be with one argument (the calling Series or DataFrame) and that returns valid output
as condition and <code class="docutils literal notranslate"><span class="pre">other</span></code> argument.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [219]: </span><span class="n">df3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   .....: </span>                    <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<span class="gp">   .....: </span>                    <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]})</span>
<span class="gp">   .....: </span>

<span class="gp">In [220]: </span><span class="n">df3</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>
<span class="gh">Out[220]: </span>
<span class="go">    A   B  C</span>
<span class="go">0  11  14  7</span>
<span class="go">1  12   5  8</span>
<span class="go">2  13   6  9</span>
</pre></div>
</div>
<section id="mask">
<h3>Mask<a class="headerlink" href="#mask" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.mask.html#pandas.DataFrame.mask" title="pandas.DataFrame.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mask()</span></code></a> is the inverse boolean operation of <code class="docutils literal notranslate"><span class="pre">where</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [221]: </span><span class="n">s</span><span class="o">.</span><span class="n">mask</span><span class="p">(</span><span class="n">s</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[221]: </span>
<span class="go">4   NaN</span>
<span class="go">3   NaN</span>
<span class="go">2   NaN</span>
<span class="go">1   NaN</span>
<span class="go">0   NaN</span>
<span class="go">dtype: float64</span>

<span class="gp">In [222]: </span><span class="n">df</span><span class="o">.</span><span class="n">mask</span><span class="p">(</span><span class="n">df</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[222]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -2.104139 -1.309525       NaN       NaN</span>
<span class="go">2000-01-02 -0.352480       NaN -1.192319       NaN</span>
<span class="go">2000-01-03 -0.864883       NaN -0.227870       NaN</span>
<span class="go">2000-01-04       NaN -1.222082       NaN -1.233203</span>
<span class="go">2000-01-05       NaN -0.605656 -1.169184       NaN</span>
<span class="go">2000-01-06       NaN -0.948458       NaN -0.684718</span>
<span class="go">2000-01-07 -2.670153 -0.114722       NaN -0.048048</span>
<span class="go">2000-01-08       NaN       NaN -0.048788 -0.808838</span>
</pre></div>
</div>
</section>
</section>
<section id="setting-with-enlargement-conditionally-using-numpy">
<span id="indexing-np-where"></span><h2>Setting with enlargement conditionally using <code class="xref py py-func docutils literal notranslate"><span class="pre">numpy()</span></code><a class="headerlink" href="#setting-with-enlargement-conditionally-using-numpy" title="Link to this heading">#</a></h2>
<p>An alternative to <a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">where()</span></code></a> is to use <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.where.html#numpy.where" title="(in NumPy v2.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.where()</span></code></a>.
Combined with setting a new column, you can use it to enlarge a DataFrame where the
values are determined conditionally.</p>
<p>Consider you have two choices to choose from in the following DataFrame. And you want to
set a new column color to ‘green’ when the second column has ‘Z’.  You can do the
following:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [223]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABBC&#39;</span><span class="p">),</span> <span class="s1">&#39;col2&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ZZXY&#39;</span><span class="p">)})</span>

<span class="gp">In [224]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col2&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">)</span>

<span class="gp">In [225]: </span><span class="n">df</span>
<span class="gh">Out[225]: </span>
<span class="go">  col1 col2  color</span>
<span class="go">0    A    Z  green</span>
<span class="go">1    B    Z  green</span>
<span class="go">2    B    X    red</span>
<span class="go">3    C    Y    red</span>
</pre></div>
</div>
<p>If you have multiple conditions, you can use <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.select.html#numpy.select" title="(in NumPy v2.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.select()</span></code></a> to achieve that.  Say
corresponding to three conditions there are three choice of colors, with a fourth color
as a fallback, you can do the following.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [226]: </span><span class="n">conditions</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">   .....: </span>    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col2&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Z&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col2&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Z&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span>
<span class="gp">   .....: </span>    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span>
<span class="gp">   .....: </span><span class="p">]</span>
<span class="gp">   .....: </span>

<span class="gp">In [227]: </span><span class="n">choices</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;purple&#39;</span><span class="p">]</span>

<span class="gp">In [228]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">choices</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>

<span class="gp">In [229]: </span><span class="n">df</span>
<span class="gh">Out[229]: </span>
<span class="go">  col1 col2   color</span>
<span class="go">0    A    Z  yellow</span>
<span class="go">1    B    Z    blue</span>
<span class="go">2    B    X  purple</span>
<span class="go">3    C    Y   black</span>
</pre></div>
</div>
</section>
<section id="the-query-method">
<span id="indexing-query"></span><h2>The <a class="reference internal" href="../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a> Method<a class="headerlink" href="#the-query-method" title="Link to this heading">#</a></h2>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> objects have a <a class="reference internal" href="../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a>
method that allows selection using an expression.</p>
<p>You can get the value of the frame where column <code class="docutils literal notranslate"><span class="pre">b</span></code> has values
between the values of columns <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">c</span></code>. For example:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [230]: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>

<span class="gp">In [231]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">))</span>

<span class="gp">In [232]: </span><span class="n">df</span>
<span class="gh">Out[232]: </span>
<span class="go">          a         b         c</span>
<span class="go">0  0.438921  0.118680  0.863670</span>
<span class="go">1  0.138138  0.577363  0.686602</span>
<span class="go">2  0.595307  0.564592  0.520630</span>
<span class="go">3  0.913052  0.926075  0.616184</span>
<span class="go">4  0.078718  0.854477  0.898725</span>
<span class="go">5  0.076404  0.523211  0.591538</span>
<span class="go">6  0.792342  0.216974  0.564056</span>
<span class="go">7  0.397890  0.454131  0.915716</span>
<span class="go">8  0.074315  0.437913  0.019794</span>
<span class="go">9  0.559209  0.502065  0.026437</span>

<span class="go"># pure python</span>
<span class="gp">In [233]: </span><span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">])]</span>
<span class="gh">Out[233]: </span>
<span class="go">          a         b         c</span>
<span class="go">1  0.138138  0.577363  0.686602</span>
<span class="go">4  0.078718  0.854477  0.898725</span>
<span class="go">5  0.076404  0.523211  0.591538</span>
<span class="go">7  0.397890  0.454131  0.915716</span>

<span class="go"># query</span>
<span class="gp">In [234]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;(a &lt; b) &amp; (b &lt; c)&#39;</span><span class="p">)</span>
<span class="gh">Out[234]: </span>
<span class="go">          a         b         c</span>
<span class="go">1  0.138138  0.577363  0.686602</span>
<span class="go">4  0.078718  0.854477  0.898725</span>
<span class="go">5  0.076404  0.523211  0.591538</span>
<span class="go">7  0.397890  0.454131  0.915716</span>
</pre></div>
</div>
<p>Do the same thing but fall back on a named index if there is no column
with the name <code class="docutils literal notranslate"><span class="pre">a</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [235]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">n</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;bc&#39;</span><span class="p">))</span>

<span class="gp">In [236]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>

<span class="gp">In [237]: </span><span class="n">df</span>
<span class="gh">Out[237]: </span>
<span class="go">   b  c</span>
<span class="go">a      </span>
<span class="go">0  0  4</span>
<span class="go">1  0  1</span>
<span class="go">2  3  4</span>
<span class="go">3  4  3</span>
<span class="go">4  1  4</span>
<span class="go">5  0  3</span>
<span class="go">6  0  1</span>
<span class="go">7  3  4</span>
<span class="go">8  2  3</span>
<span class="go">9  1  1</span>

<span class="gp">In [238]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;a &lt; b and b &lt; c&#39;</span><span class="p">)</span>
<span class="gh">Out[238]: </span>
<span class="go">   b  c</span>
<span class="go">a      </span>
<span class="go">2  3  4</span>
</pre></div>
</div>
<p>If instead you don’t want to or cannot name your index, you can use the name
<code class="docutils literal notranslate"><span class="pre">index</span></code> in your query expression:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [239]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;bc&#39;</span><span class="p">))</span>

<span class="gp">In [240]: </span><span class="n">df</span>
<span class="gh">Out[240]: </span>
<span class="go">   b  c</span>
<span class="go">0  3  1</span>
<span class="go">1  3  0</span>
<span class="go">2  5  6</span>
<span class="go">3  5  2</span>
<span class="go">4  7  4</span>
<span class="go">5  0  1</span>
<span class="go">6  2  5</span>
<span class="go">7  0  1</span>
<span class="go">8  6  0</span>
<span class="go">9  7  9</span>

<span class="gp">In [241]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;index &lt; b &lt; c&#39;</span><span class="p">)</span>
<span class="gh">Out[241]: </span>
<span class="go">   b  c</span>
<span class="go">2  5  6</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the name of your index overlaps with a column name, the column name is
given precedence. For example,</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [242]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">)})</span>

<span class="gp">In [243]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>

<span class="gp">In [244]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;a &gt; 2&#39;</span><span class="p">)</span>  <span class="c1"># uses the column &#39;a&#39;, not the index</span>
<span class="gh">Out[244]: </span>
<span class="go">   a</span>
<span class="go">a   </span>
<span class="go">1  3</span>
<span class="go">3  3</span>
</pre></div>
</div>
<p>You can still use the index in a query expression by using the special
identifier ‘index’:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [245]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;index &gt; 2&#39;</span><span class="p">)</span>
<span class="gh">Out[245]: </span>
<span class="go">   a</span>
<span class="go">a   </span>
<span class="go">3  3</span>
<span class="go">4  2</span>
</pre></div>
</div>
<p>If for some reason you have a column named <code class="docutils literal notranslate"><span class="pre">index</span></code>, then you can refer to
the index as <code class="docutils literal notranslate"><span class="pre">ilevel_0</span></code> as well, but at this point you should consider
renaming your columns to something less ambiguous.</p>
</div>
<section id="multiindex-query-syntax">
<h3><a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> <a class="reference internal" href="../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a> Syntax<a class="headerlink" href="#multiindex-query-syntax" title="Link to this heading">#</a></h3>
<p>You can also use the levels of a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with a
<a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> as if they were columns in the frame:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [246]: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>

<span class="gp">In [247]: </span><span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>

<span class="gp">In [248]: </span><span class="n">foods</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;eggs&#39;</span><span class="p">,</span> <span class="s1">&#39;ham&#39;</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>

<span class="gp">In [249]: </span><span class="n">colors</span>
<span class="gh">Out[249]: </span>
<span class="go">array([&#39;red&#39;, &#39;red&#39;, &#39;red&#39;, &#39;green&#39;, &#39;green&#39;, &#39;green&#39;, &#39;green&#39;, &#39;green&#39;,</span>
<span class="go">       &#39;green&#39;, &#39;green&#39;], dtype=&#39;&lt;U5&#39;)</span>

<span class="gp">In [250]: </span><span class="n">foods</span>
<span class="gh">Out[250]: </span>
<span class="go">array([&#39;ham&#39;, &#39;ham&#39;, &#39;eggs&#39;, &#39;eggs&#39;, &#39;eggs&#39;, &#39;ham&#39;, &#39;ham&#39;, &#39;eggs&#39;, &#39;eggs&#39;,</span>
<span class="go">       &#39;eggs&#39;], dtype=&#39;&lt;U4&#39;)</span>

<span class="gp">In [251]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">([</span><span class="n">colors</span><span class="p">,</span> <span class="n">foods</span><span class="p">],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;food&#39;</span><span class="p">])</span>

<span class="gp">In [252]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>

<span class="gp">In [253]: </span><span class="n">df</span>
<span class="gh">Out[253]: </span>
<span class="go">                   0         1</span>
<span class="go">color food                    </span>
<span class="go">red   ham   0.194889 -0.381994</span>
<span class="go">      ham   0.318587  2.089075</span>
<span class="go">      eggs -0.728293 -0.090255</span>
<span class="go">green eggs -0.748199  1.318931</span>
<span class="go">      eggs -2.029766  0.792652</span>
<span class="go">      ham   0.461007 -0.542749</span>
<span class="go">      ham  -0.305384 -0.479195</span>
<span class="go">      eggs  0.095031 -0.270099</span>
<span class="go">      eggs -0.707140 -0.773882</span>
<span class="go">      eggs  0.229453  0.304418</span>

<span class="gp">In [254]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;color == &quot;red&quot;&#39;</span><span class="p">)</span>
<span class="gh">Out[254]: </span>
<span class="go">                   0         1</span>
<span class="go">color food                    </span>
<span class="go">red   ham   0.194889 -0.381994</span>
<span class="go">      ham   0.318587  2.089075</span>
<span class="go">      eggs -0.728293 -0.090255</span>
</pre></div>
</div>
<p>If the levels of the <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> are unnamed, you can refer to them using
special names:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [255]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>

<span class="gp">In [256]: </span><span class="n">df</span>
<span class="gh">Out[256]: </span>
<span class="go">                   0         1</span>
<span class="go">red   ham   0.194889 -0.381994</span>
<span class="go">      ham   0.318587  2.089075</span>
<span class="go">      eggs -0.728293 -0.090255</span>
<span class="go">green eggs -0.748199  1.318931</span>
<span class="go">      eggs -2.029766  0.792652</span>
<span class="go">      ham   0.461007 -0.542749</span>
<span class="go">      ham  -0.305384 -0.479195</span>
<span class="go">      eggs  0.095031 -0.270099</span>
<span class="go">      eggs -0.707140 -0.773882</span>
<span class="go">      eggs  0.229453  0.304418</span>

<span class="gp">In [257]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;ilevel_0 == &quot;red&quot;&#39;</span><span class="p">)</span>
<span class="gh">Out[257]: </span>
<span class="go">                 0         1</span>
<span class="go">red ham   0.194889 -0.381994</span>
<span class="go">    ham   0.318587  2.089075</span>
<span class="go">    eggs -0.728293 -0.090255</span>
</pre></div>
</div>
<p>The convention is <code class="docutils literal notranslate"><span class="pre">ilevel_0</span></code>, which means “index level 0” for the 0th level
of the <code class="docutils literal notranslate"><span class="pre">index</span></code>.</p>
</section>
<section id="query-use-cases">
<h3><a class="reference internal" href="../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a> Use Cases<a class="headerlink" href="#query-use-cases" title="Link to this heading">#</a></h3>
<p>A use case for <a class="reference internal" href="../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a> is when you have a collection of
<a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> objects that have a subset of column names (or index
levels/names) in common. You can pass the same query to both frames <em>without</em>
having to specify which frame you’re interested in querying</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [258]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">))</span>

<span class="gp">In [259]: </span><span class="n">df</span>
<span class="gh">Out[259]: </span>
<span class="go">          a         b         c</span>
<span class="go">0  0.224283  0.736107  0.139168</span>
<span class="go">1  0.302827  0.657803  0.713897</span>
<span class="go">2  0.611185  0.136624  0.984960</span>
<span class="go">3  0.195246  0.123436  0.627712</span>
<span class="go">4  0.618673  0.371660  0.047902</span>
<span class="go">5  0.480088  0.062993  0.185760</span>
<span class="go">6  0.568018  0.483467  0.445289</span>
<span class="go">7  0.309040  0.274580  0.587101</span>
<span class="go">8  0.258993  0.477769  0.370255</span>
<span class="go">9  0.550459  0.840870  0.304611</span>

<span class="gp">In [260]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

<span class="gp">In [261]: </span><span class="n">df2</span>
<span class="gh">Out[261]: </span>
<span class="go">           a         b         c</span>
<span class="go">0   0.357579  0.229800  0.596001</span>
<span class="go">1   0.309059  0.957923  0.965663</span>
<span class="go">2   0.123102  0.336914  0.318616</span>
<span class="go">3   0.526506  0.323321  0.860813</span>
<span class="go">4   0.518736  0.486514  0.384724</span>
<span class="go">5   0.190804  0.505723  0.614533</span>
<span class="go">6   0.891939  0.623977  0.676639</span>
<span class="go">7   0.480559  0.378528  0.460858</span>
<span class="go">8   0.420223  0.136404  0.141295</span>
<span class="go">9   0.732206  0.419540  0.604675</span>
<span class="go">10  0.604466  0.848974  0.896165</span>
<span class="go">11  0.589168  0.920046  0.732716</span>

<span class="gp">In [262]: </span><span class="n">expr</span> <span class="o">=</span> <span class="s1">&#39;0.0 &lt;= a &lt;= c &lt;= 0.5&#39;</span>

<span class="gp">In [263]: </span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">frame</span><span class="p">:</span> <span class="n">frame</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">expr</span><span class="p">),</span> <span class="p">[</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">])</span>
<span class="gh">Out[263]: </span><span class="go">&lt;map at 0x7fe8c904cca0&gt;</span>
</pre></div>
</div>
</section>
<section id="query-python-versus-pandas-syntax-comparison">
<h3><a class="reference internal" href="../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a> Python versus pandas Syntax Comparison<a class="headerlink" href="#query-python-versus-pandas-syntax-comparison" title="Link to this heading">#</a></h3>
<p>Full numpy-like syntax:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [264]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">))</span>

<span class="gp">In [265]: </span><span class="n">df</span>
<span class="gh">Out[265]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  7  8  9</span>
<span class="go">1  1  0  7</span>
<span class="go">2  2  7  2</span>
<span class="go">3  6  2  2</span>
<span class="go">4  2  6  3</span>
<span class="go">5  3  8  2</span>
<span class="go">6  1  7  2</span>
<span class="go">7  5  1  5</span>
<span class="go">8  9  8  0</span>
<span class="go">9  1  5  0</span>

<span class="gp">In [266]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;(a &lt; b) &amp; (b &lt; c)&#39;</span><span class="p">)</span>
<span class="gh">Out[266]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  7  8  9</span>

<span class="gp">In [267]: </span><span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">])]</span>
<span class="gh">Out[267]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  7  8  9</span>
</pre></div>
</div>
<p>Slightly nicer by removing the parentheses (comparison operators bind tighter
than <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> and <code class="docutils literal notranslate"><span class="pre">|</span></code>):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [268]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;a &lt; b &amp; b &lt; c&#39;</span><span class="p">)</span>
<span class="gh">Out[268]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  7  8  9</span>
</pre></div>
</div>
<p>Use English instead of symbols:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [269]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;a &lt; b and b &lt; c&#39;</span><span class="p">)</span>
<span class="gh">Out[269]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  7  8  9</span>
</pre></div>
</div>
<p>Pretty close to how you might write it on paper:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [270]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;a &lt; b &lt; c&#39;</span><span class="p">)</span>
<span class="gh">Out[270]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  7  8  9</span>
</pre></div>
</div>
</section>
<section id="the-in-and-not-in-operators">
<h3>The <code class="docutils literal notranslate"><span class="pre">in</span></code> and <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> operators<a class="headerlink" href="#the-in-and-not-in-operators" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a> also supports special use of Python’s <code class="docutils literal notranslate"><span class="pre">in</span></code> and
<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> comparison operators, providing a succinct syntax for calling the
<code class="docutils literal notranslate"><span class="pre">isin</span></code> method of a <code class="docutils literal notranslate"><span class="pre">Series</span></code> or <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># get all rows where columns &quot;a&quot; and &quot;b&quot; have overlapping values</span>
<span class="gp">In [271]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;aabbccddeeff&#39;</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;aaaabbbbcccc&#39;</span><span class="p">),</span>
<span class="gp">   .....: </span>                   <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">),</span>
<span class="gp">   .....: </span>                   <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">)})</span>
<span class="gp">   .....: </span>

<span class="gp">In [272]: </span><span class="n">df</span>
<span class="gh">Out[272]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  6</span>
<span class="go">1   a  a  4  7</span>
<span class="go">2   b  a  1  6</span>
<span class="go">3   b  a  2  1</span>
<span class="go">4   c  b  3  6</span>
<span class="go">5   c  b  0  2</span>
<span class="go">6   d  b  3  3</span>
<span class="go">7   d  b  2  1</span>
<span class="go">8   e  c  4  3</span>
<span class="go">9   e  c  2  0</span>
<span class="go">10  f  c  0  6</span>
<span class="go">11  f  c  1  2</span>

<span class="gp">In [273]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;a in b&#39;</span><span class="p">)</span>
<span class="gh">Out[273]: </span>
<span class="go">   a  b  c  d</span>
<span class="go">0  a  a  2  6</span>
<span class="go">1  a  a  4  7</span>
<span class="go">2  b  a  1  6</span>
<span class="go">3  b  a  2  1</span>
<span class="go">4  c  b  3  6</span>
<span class="go">5  c  b  0  2</span>

<span class="go"># How you&#39;d do it in pure Python</span>
<span class="gp">In [274]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">])]</span>
<span class="gh">Out[274]: </span>
<span class="go">   a  b  c  d</span>
<span class="go">0  a  a  2  6</span>
<span class="go">1  a  a  4  7</span>
<span class="go">2  b  a  1  6</span>
<span class="go">3  b  a  2  1</span>
<span class="go">4  c  b  3  6</span>
<span class="go">5  c  b  0  2</span>

<span class="gp">In [275]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;a not in b&#39;</span><span class="p">)</span>
<span class="gh">Out[275]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">6   d  b  3  3</span>
<span class="go">7   d  b  2  1</span>
<span class="go">8   e  c  4  3</span>
<span class="go">9   e  c  2  0</span>
<span class="go">10  f  c  0  6</span>
<span class="go">11  f  c  1  2</span>

<span class="go"># pure Python</span>
<span class="gp">In [276]: </span><span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">])]</span>
<span class="gh">Out[276]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">6   d  b  3  3</span>
<span class="go">7   d  b  2  1</span>
<span class="go">8   e  c  4  3</span>
<span class="go">9   e  c  2  0</span>
<span class="go">10  f  c  0  6</span>
<span class="go">11  f  c  1  2</span>
</pre></div>
</div>
<p>You can combine this with other expressions for very succinct queries:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># rows where cols a and b have overlapping values</span>
<span class="go"># and col c&#39;s values are less than col d&#39;s</span>
<span class="gp">In [277]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;a in b and c &lt; d&#39;</span><span class="p">)</span>
<span class="gh">Out[277]: </span>
<span class="go">   a  b  c  d</span>
<span class="go">0  a  a  2  6</span>
<span class="go">1  a  a  4  7</span>
<span class="go">2  b  a  1  6</span>
<span class="go">4  c  b  3  6</span>
<span class="go">5  c  b  0  2</span>

<span class="go"># pure Python</span>
<span class="gp">In [278]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">])]</span>
<span class="gh">Out[278]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  6</span>
<span class="go">1   a  a  4  7</span>
<span class="go">2   b  a  1  6</span>
<span class="go">4   c  b  3  6</span>
<span class="go">5   c  b  0  2</span>
<span class="go">10  f  c  0  6</span>
<span class="go">11  f  c  1  2</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">in</span></code> and <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> are evaluated in Python, since <code class="docutils literal notranslate"><span class="pre">numexpr</span></code>
has no equivalent of this operation. However, <strong>only the</strong> <code class="docutils literal notranslate"><span class="pre">in</span></code>/<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code>
<strong>expression itself</strong> is evaluated in vanilla Python. For example, in the
expression</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;a in b + c + d&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">(b</span> <span class="pre">+</span> <span class="pre">c</span> <span class="pre">+</span> <span class="pre">d)</span></code> is evaluated by <code class="docutils literal notranslate"><span class="pre">numexpr</span></code> and <em>then</em> the <code class="docutils literal notranslate"><span class="pre">in</span></code>
operation is evaluated in plain Python. In general, any operations that can
be evaluated using <code class="docutils literal notranslate"><span class="pre">numexpr</span></code> will be.</p>
</div>
</section>
<section id="special-use-of-the-operator-with-list-objects">
<h3>Special use of the <code class="docutils literal notranslate"><span class="pre">==</span></code> operator with <code class="docutils literal notranslate"><span class="pre">list</span></code> objects<a class="headerlink" href="#special-use-of-the-operator-with-list-objects" title="Link to this heading">#</a></h3>
<p>Comparing a <code class="docutils literal notranslate"><span class="pre">list</span></code> of values to a column using <code class="docutils literal notranslate"><span class="pre">==</span></code>/<code class="docutils literal notranslate"><span class="pre">!=</span></code> works similarly
to <code class="docutils literal notranslate"><span class="pre">in</span></code>/<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [279]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;b == [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]&#39;</span><span class="p">)</span>
<span class="gh">Out[279]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  6</span>
<span class="go">1   a  a  4  7</span>
<span class="go">2   b  a  1  6</span>
<span class="go">3   b  a  2  1</span>
<span class="go">4   c  b  3  6</span>
<span class="go">5   c  b  0  2</span>
<span class="go">6   d  b  3  3</span>
<span class="go">7   d  b  2  1</span>
<span class="go">8   e  c  4  3</span>
<span class="go">9   e  c  2  0</span>
<span class="go">10  f  c  0  6</span>
<span class="go">11  f  c  1  2</span>

<span class="go"># pure Python</span>
<span class="gp">In [280]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])]</span>
<span class="gh">Out[280]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  6</span>
<span class="go">1   a  a  4  7</span>
<span class="go">2   b  a  1  6</span>
<span class="go">3   b  a  2  1</span>
<span class="go">4   c  b  3  6</span>
<span class="go">5   c  b  0  2</span>
<span class="go">6   d  b  3  3</span>
<span class="go">7   d  b  2  1</span>
<span class="go">8   e  c  4  3</span>
<span class="go">9   e  c  2  0</span>
<span class="go">10  f  c  0  6</span>
<span class="go">11  f  c  1  2</span>

<span class="gp">In [281]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;c == [1, 2]&#39;</span><span class="p">)</span>
<span class="gh">Out[281]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  6</span>
<span class="go">2   b  a  1  6</span>
<span class="go">3   b  a  2  1</span>
<span class="go">7   d  b  2  1</span>
<span class="go">9   e  c  2  0</span>
<span class="go">11  f  c  1  2</span>

<span class="gp">In [282]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;c != [1, 2]&#39;</span><span class="p">)</span>
<span class="gh">Out[282]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">1   a  a  4  7</span>
<span class="go">4   c  b  3  6</span>
<span class="go">5   c  b  0  2</span>
<span class="go">6   d  b  3  3</span>
<span class="go">8   e  c  4  3</span>
<span class="go">10  f  c  0  6</span>

<span class="go"># using in/not in</span>
<span class="gp">In [283]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;[1, 2] in c&#39;</span><span class="p">)</span>
<span class="gh">Out[283]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  6</span>
<span class="go">2   b  a  1  6</span>
<span class="go">3   b  a  2  1</span>
<span class="go">7   d  b  2  1</span>
<span class="go">9   e  c  2  0</span>
<span class="go">11  f  c  1  2</span>

<span class="gp">In [284]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;[1, 2] not in c&#39;</span><span class="p">)</span>
<span class="gh">Out[284]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">1   a  a  4  7</span>
<span class="go">4   c  b  3  6</span>
<span class="go">5   c  b  0  2</span>
<span class="go">6   d  b  3  3</span>
<span class="go">8   e  c  4  3</span>
<span class="go">10  f  c  0  6</span>

<span class="go"># pure Python</span>
<span class="gp">In [285]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])]</span>
<span class="gh">Out[285]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  6</span>
<span class="go">2   b  a  1  6</span>
<span class="go">3   b  a  2  1</span>
<span class="go">7   d  b  2  1</span>
<span class="go">9   e  c  2  0</span>
<span class="go">11  f  c  1  2</span>
</pre></div>
</div>
</section>
<section id="boolean-operators">
<h3>Boolean operators<a class="headerlink" href="#boolean-operators" title="Link to this heading">#</a></h3>
<p>You can negate boolean expressions with the word <code class="docutils literal notranslate"><span class="pre">not</span></code> or the <code class="docutils literal notranslate"><span class="pre">~</span></code> operator.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [286]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">))</span>

<span class="gp">In [287]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;bools&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mf">0.5</span>

<span class="gp">In [288]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;~bools&#39;</span><span class="p">)</span>
<span class="gh">Out[288]: </span>
<span class="go">          a         b         c  bools</span>
<span class="go">2  0.697753  0.212799  0.329209  False</span>
<span class="go">7  0.275396  0.691034  0.826619  False</span>
<span class="go">8  0.190649  0.558748  0.262467  False</span>

<span class="gp">In [289]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;not bools&#39;</span><span class="p">)</span>
<span class="gh">Out[289]: </span>
<span class="go">          a         b         c  bools</span>
<span class="go">2  0.697753  0.212799  0.329209  False</span>
<span class="go">7  0.275396  0.691034  0.826619  False</span>
<span class="go">8  0.190649  0.558748  0.262467  False</span>

<span class="gp">In [290]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;not bools&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;bools&#39;</span><span class="p">]]</span>
<span class="gh">Out[290]: </span>
<span class="go">      a     b     c  bools</span>
<span class="go">2  True  True  True   True</span>
<span class="go">7  True  True  True   True</span>
<span class="go">8  True  True  True   True</span>
</pre></div>
</div>
<p>Of course, expressions can be arbitrarily complex too:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># short query syntax</span>
<span class="gp">In [291]: </span><span class="n">shorter</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;a &lt; b &lt; c and (not bools) or bools &gt; 2&#39;</span><span class="p">)</span>

<span class="go"># equivalent in pure Python</span>
<span class="gp">In [292]: </span><span class="n">longer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span>            <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span>            <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;bools&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span>            <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;bools&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)]</span>
<span class="gp">   .....: </span>

<span class="gp">In [293]: </span><span class="n">shorter</span>
<span class="gh">Out[293]: </span>
<span class="go">          a         b         c  bools</span>
<span class="go">7  0.275396  0.691034  0.826619  False</span>

<span class="gp">In [294]: </span><span class="n">longer</span>
<span class="gh">Out[294]: </span>
<span class="go">          a         b         c  bools</span>
<span class="go">7  0.275396  0.691034  0.826619  False</span>

<span class="gp">In [295]: </span><span class="n">shorter</span> <span class="o">==</span> <span class="n">longer</span>
<span class="gh">Out[295]: </span>
<span class="go">      a     b     c  bools</span>
<span class="go">7  True  True  True   True</span>
</pre></div>
</div>
</section>
<section id="performance-of-query">
<h3>Performance of <a class="reference internal" href="../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a><a class="headerlink" href="#performance-of-query" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DataFrame.query()</span></code> using <code class="docutils literal notranslate"><span class="pre">numexpr</span></code> is slightly faster than Python for
large frames.</p>
<img alt="../_images/query-perf.png" src="../_images/query-perf.png" />
<p>You will only see the performance benefits of using the <code class="docutils literal notranslate"><span class="pre">numexpr</span></code> engine
with <code class="docutils literal notranslate"><span class="pre">DataFrame.query()</span></code> if your frame has more than approximately 100,000
rows.</p>
<p>This plot was created using a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with 3 columns each containing
floating point values generated using <code class="docutils literal notranslate"><span class="pre">numpy.random.randn()</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [296]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">   .....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span>

<span class="gp">In [297]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="duplicate-data">
<h2>Duplicate data<a class="headerlink" href="#duplicate-data" title="Link to this heading">#</a></h2>
<p id="indexing-duplicate">If you want to identify and remove duplicate rows in a DataFrame,  there are
two methods that will help: <code class="docutils literal notranslate"><span class="pre">duplicated</span></code> and <code class="docutils literal notranslate"><span class="pre">drop_duplicates</span></code>. Each
takes as an argument the columns to use to identify duplicated rows.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">duplicated</span></code> returns a boolean vector whose length is the number of rows, and which indicates whether a row is duplicated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drop_duplicates</span></code> removes duplicate rows.</p></li>
</ul>
<p>By default, the first observed row of a duplicate set is considered unique, but
each method has a <code class="docutils literal notranslate"><span class="pre">keep</span></code> parameter to specify targets to be kept.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">keep='first'</span></code> (default): mark / drop duplicates except for the first occurrence.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keep='last'</span></code>: mark / drop duplicates except for the last occurrence.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keep=False</span></code>: mark  / drop all duplicates.</p></li>
</ul>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [298]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="s1">&#39;four&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">7</span><span class="p">)})</span>
<span class="gp">   .....: </span>

<span class="gp">In [299]: </span><span class="n">df2</span>
<span class="gh">Out[299]: </span>
<span class="go">       a  b         c</span>
<span class="go">0    one  x -1.067137</span>
<span class="go">1    one  y  0.309500</span>
<span class="go">2    two  x -0.211056</span>
<span class="go">3    two  y -1.842023</span>
<span class="go">4    two  x -0.390820</span>
<span class="go">5  three  x -1.964475</span>
<span class="go">6   four  x  1.298329</span>

<span class="gp">In [300]: </span><span class="n">df2</span><span class="o">.</span><span class="n">duplicated</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gh">Out[300]: </span>
<span class="go">0    False</span>
<span class="go">1     True</span>
<span class="go">2    False</span>
<span class="go">3     True</span>
<span class="go">4     True</span>
<span class="go">5    False</span>
<span class="go">6    False</span>
<span class="go">dtype: bool</span>

<span class="gp">In [301]: </span><span class="n">df2</span><span class="o">.</span><span class="n">duplicated</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">keep</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">)</span>
<span class="gh">Out[301]: </span>
<span class="go">0     True</span>
<span class="go">1    False</span>
<span class="go">2     True</span>
<span class="go">3     True</span>
<span class="go">4    False</span>
<span class="go">5    False</span>
<span class="go">6    False</span>
<span class="go">dtype: bool</span>

<span class="gp">In [302]: </span><span class="n">df2</span><span class="o">.</span><span class="n">duplicated</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">keep</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[302]: </span>
<span class="go">0     True</span>
<span class="go">1     True</span>
<span class="go">2     True</span>
<span class="go">3     True</span>
<span class="go">4     True</span>
<span class="go">5    False</span>
<span class="go">6    False</span>
<span class="go">dtype: bool</span>

<span class="gp">In [303]: </span><span class="n">df2</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gh">Out[303]: </span>
<span class="go">       a  b         c</span>
<span class="go">0    one  x -1.067137</span>
<span class="go">2    two  x -0.211056</span>
<span class="go">5  three  x -1.964475</span>
<span class="go">6   four  x  1.298329</span>

<span class="gp">In [304]: </span><span class="n">df2</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">keep</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">)</span>
<span class="gh">Out[304]: </span>
<span class="go">       a  b         c</span>
<span class="go">1    one  y  0.309500</span>
<span class="go">4    two  x -0.390820</span>
<span class="go">5  three  x -1.964475</span>
<span class="go">6   four  x  1.298329</span>

<span class="gp">In [305]: </span><span class="n">df2</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">keep</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[305]: </span>
<span class="go">       a  b         c</span>
<span class="go">5  three  x -1.964475</span>
<span class="go">6   four  x  1.298329</span>
</pre></div>
</div>
<p>Also, you can pass a list of columns to identify duplications.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [306]: </span><span class="n">df2</span><span class="o">.</span><span class="n">duplicated</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="gh">Out[306]: </span>
<span class="go">0    False</span>
<span class="go">1    False</span>
<span class="go">2    False</span>
<span class="go">3    False</span>
<span class="go">4     True</span>
<span class="go">5    False</span>
<span class="go">6    False</span>
<span class="go">dtype: bool</span>

<span class="gp">In [307]: </span><span class="n">df2</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="gh">Out[307]: </span>
<span class="go">       a  b         c</span>
<span class="go">0    one  x -1.067137</span>
<span class="go">1    one  y  0.309500</span>
<span class="go">2    two  x -0.211056</span>
<span class="go">3    two  y -1.842023</span>
<span class="go">5  three  x -1.964475</span>
<span class="go">6   four  x  1.298329</span>
</pre></div>
</div>
<p>To drop duplicates by index value, use <code class="docutils literal notranslate"><span class="pre">Index.duplicated</span></code> then perform slicing.
The same set of options are available for the <code class="docutils literal notranslate"><span class="pre">keep</span></code> parameter.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [308]: </span><span class="n">df3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>
<span class="gp">   .....: </span>                    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">)},</span>
<span class="gp">   .....: </span>                   <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span>

<span class="gp">In [309]: </span><span class="n">df3</span>
<span class="gh">Out[309]: </span>
<span class="go">   a         b</span>
<span class="go">a  0  1.440455</span>
<span class="go">a  1  2.456086</span>
<span class="go">b  2  1.038402</span>
<span class="go">c  3 -0.894409</span>
<span class="go">b  4  0.683536</span>
<span class="go">a  5  3.082764</span>

<span class="gp">In [310]: </span><span class="n">df3</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()</span>
<span class="gh">Out[310]: </span><span class="go">array([False,  True, False, False,  True,  True])</span>

<span class="gp">In [311]: </span><span class="n">df3</span><span class="p">[</span><span class="o">~</span><span class="n">df3</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()]</span>
<span class="gh">Out[311]: </span>
<span class="go">   a         b</span>
<span class="go">a  0  1.440455</span>
<span class="go">b  2  1.038402</span>
<span class="go">c  3 -0.894409</span>

<span class="gp">In [312]: </span><span class="n">df3</span><span class="p">[</span><span class="o">~</span><span class="n">df3</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">duplicated</span><span class="p">(</span><span class="n">keep</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">)]</span>
<span class="gh">Out[312]: </span>
<span class="go">   a         b</span>
<span class="go">c  3 -0.894409</span>
<span class="go">b  4  0.683536</span>
<span class="go">a  5  3.082764</span>

<span class="gp">In [313]: </span><span class="n">df3</span><span class="p">[</span><span class="o">~</span><span class="n">df3</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">duplicated</span><span class="p">(</span><span class="n">keep</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span>
<span class="gh">Out[313]: </span>
<span class="go">   a         b</span>
<span class="go">c  3 -0.894409</span>
</pre></div>
</div>
</section>
<section id="dictionary-like-get-method">
<span id="indexing-dictionarylike"></span><h2>Dictionary-like <a class="reference internal" href="../reference/api/pandas.DataFrame.get.html#pandas.DataFrame.get" title="pandas.DataFrame.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> method<a class="headerlink" href="#dictionary-like-get-method" title="Link to this heading">#</a></h2>
<p>Each of Series or DataFrame have a <code class="docutils literal notranslate"><span class="pre">get</span></code> method which can return a
default value.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [314]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="gp">In [315]: </span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>  <span class="c1"># equivalent to s[&#39;a&#39;]</span>
<span class="gh">Out[315]: </span><span class="go">1</span>

<span class="gp">In [316]: </span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[316]: </span><span class="go">-1</span>
</pre></div>
</div>
</section>
<section id="looking-up-values-by-index-column-labels">
<span id="indexing-lookup"></span><h2>Looking up values by index/column labels<a class="headerlink" href="#looking-up-values-by-index-column-labels" title="Link to this heading">#</a></h2>
<p>Sometimes you want to extract a set of values given a sequence of row labels
and column labels, this can be achieved by <code class="docutils literal notranslate"><span class="pre">pandas.factorize</span></code>  and NumPy indexing.
For instance:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [317]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">22</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">76</span><span class="p">,</span> <span class="mi">67</span><span class="p">]})</span>
<span class="gp">   .....: </span>

<span class="gp">In [318]: </span><span class="n">df</span>
<span class="gh">Out[318]: </span>
<span class="go">  col     A   B</span>
<span class="go">0   A  80.0  80</span>
<span class="go">1   A  23.0  55</span>
<span class="go">2   B   NaN  76</span>
<span class="go">3   B  22.0  67</span>

<span class="gp">In [319]: </span><span class="n">idx</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">factorize</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">])</span>

<span class="gp">In [320]: </span><span class="n">df</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">cols</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)),</span> <span class="n">idx</span><span class="p">]</span>
<span class="gh">Out[320]: </span><span class="go">array([80., 23., 76., 67.])</span>
</pre></div>
</div>
<p>Formerly this could be achieved with the dedicated <code class="docutils literal notranslate"><span class="pre">DataFrame.lookup</span></code> method
which was deprecated in version 1.2.0 and removed in version 2.0.0.</p>
</section>
<section id="index-objects">
<span id="indexing-class"></span><h2>Index objects<a class="headerlink" href="#index-objects" title="Link to this heading">#</a></h2>
<p>The pandas <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> class and its subclasses can be viewed as
implementing an <em>ordered multiset</em>. Duplicates are allowed.</p>
<p><a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> also provides the infrastructure necessary for
lookups, data alignment, and reindexing. The easiest way to create an
<a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> directly is to pass a <code class="docutils literal notranslate"><span class="pre">list</span></code> or other sequence to
<a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [321]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span>

<span class="gp">In [322]: </span><span class="n">index</span>
<span class="gh">Out[322]: </span><span class="go">Index([&#39;e&#39;, &#39;d&#39;, &#39;a&#39;, &#39;b&#39;], dtype=&#39;object&#39;)</span>

<span class="gp">In [323]: </span><span class="s1">&#39;d&#39;</span> <span class="ow">in</span> <span class="n">index</span>
<span class="gh">Out[323]: </span><span class="go">True</span>
</pre></div>
</div>
<p>or using numbers:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [324]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span>

<span class="gp">In [325]: </span><span class="n">index</span>
<span class="gh">Out[325]: </span><span class="go">Index([1, 5, 12], dtype=&#39;int64&#39;)</span>

<span class="gp">In [326]: </span><span class="mi">5</span> <span class="ow">in</span> <span class="n">index</span>
<span class="gh">Out[326]: </span><span class="go">True</span>
</pre></div>
</div>
<p>If no dtype is given, <code class="docutils literal notranslate"><span class="pre">Index</span></code> tries to infer the dtype from the data.
It is also possible to give an explicit dtype when instantiating an <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [327]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">)</span>

<span class="gp">In [328]: </span><span class="n">index</span>
<span class="gh">Out[328]: </span><span class="go">Index([&#39;e&#39;, &#39;d&#39;, &#39;a&#39;, &#39;b&#39;], dtype=&#39;string&#39;)</span>

<span class="gp">In [329]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;int8&quot;</span><span class="p">)</span>

<span class="gp">In [330]: </span><span class="n">index</span>
<span class="gh">Out[330]: </span><span class="go">Index([1, 5, 12], dtype=&#39;int8&#39;)</span>

<span class="gp">In [331]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;float32&quot;</span><span class="p">)</span>

<span class="gp">In [332]: </span><span class="n">index</span>
<span class="gh">Out[332]: </span><span class="go">Index([1.0, 5.0, 12.0], dtype=&#39;float32&#39;)</span>
</pre></div>
</div>
<p>You can also pass a <code class="docutils literal notranslate"><span class="pre">name</span></code> to be stored in the index:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [333]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;something&#39;</span><span class="p">)</span>

<span class="gp">In [334]: </span><span class="n">index</span><span class="o">.</span><span class="n">name</span>
<span class="gh">Out[334]: </span><span class="go">&#39;something&#39;</span>
</pre></div>
</div>
<p>The name, if set, will be shown in the console display:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [335]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;rows&#39;</span><span class="p">)</span>

<span class="gp">In [336]: </span><span class="n">columns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;cols&#39;</span><span class="p">)</span>

<span class="gp">In [337]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="gp">In [338]: </span><span class="n">df</span>
<span class="gh">Out[338]: </span>
<span class="go">cols         A         B         C</span>
<span class="go">rows                              </span>
<span class="go">0     1.295989 -1.051694  1.340429</span>
<span class="go">1    -2.366110  0.428241  0.387275</span>
<span class="go">2     0.433306  0.929548  0.278094</span>
<span class="go">3     2.154730 -0.315628  0.264223</span>
<span class="go">4     1.126818  1.132290 -0.353310</span>

<span class="gp">In [339]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span>
<span class="gh">Out[339]: </span>
<span class="go">rows</span>
<span class="go">0    1.295989</span>
<span class="go">1   -2.366110</span>
<span class="go">2    0.433306</span>
<span class="go">3    2.154730</span>
<span class="go">4    1.126818</span>
<span class="go">Name: A, dtype: float64</span>
</pre></div>
</div>
<section id="setting-metadata">
<span id="indexing-set-metadata"></span><h3>Setting metadata<a class="headerlink" href="#setting-metadata" title="Link to this heading">#</a></h3>
<p>Indexes are “mostly immutable”, but it is possible to set and change their
<code class="docutils literal notranslate"><span class="pre">name</span></code> attribute. You can use the <code class="docutils literal notranslate"><span class="pre">rename</span></code>, <code class="docutils literal notranslate"><span class="pre">set_names</span></code> to set these attributes
directly, and they default to returning a copy.</p>
<p>See <a class="reference internal" href="advanced.html#advanced"><span class="std std-ref">Advanced Indexing</span></a> for usage of MultiIndexes.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [340]: </span><span class="n">ind</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [341]: </span><span class="n">ind</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">&quot;apple&quot;</span><span class="p">)</span>
<span class="gh">Out[341]: </span><span class="go">Index([1, 2, 3], dtype=&#39;int64&#39;, name=&#39;apple&#39;)</span>

<span class="gp">In [342]: </span><span class="n">ind</span>
<span class="gh">Out[342]: </span><span class="go">Index([1, 2, 3], dtype=&#39;int64&#39;)</span>

<span class="gp">In [343]: </span><span class="n">ind</span> <span class="o">=</span> <span class="n">ind</span><span class="o">.</span><span class="n">set_names</span><span class="p">([</span><span class="s2">&quot;apple&quot;</span><span class="p">])</span>

<span class="gp">In [344]: </span><span class="n">ind</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;bob&quot;</span>

<span class="gp">In [345]: </span><span class="n">ind</span>
<span class="gh">Out[345]: </span><span class="go">Index([1, 2, 3], dtype=&#39;int64&#39;, name=&#39;bob&#39;)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">set_names</span></code>, <code class="docutils literal notranslate"><span class="pre">set_levels</span></code>, and <code class="docutils literal notranslate"><span class="pre">set_codes</span></code> also take an optional
<code class="docutils literal notranslate"><span class="pre">level</span></code> argument</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [346]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">]],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">])</span>

<span class="gp">In [347]: </span><span class="n">index</span>
<span class="gh">Out[347]: </span>
<span class="go">MultiIndex([(0, &#39;one&#39;),</span>
<span class="go">            (0, &#39;two&#39;),</span>
<span class="go">            (1, &#39;one&#39;),</span>
<span class="go">            (1, &#39;two&#39;),</span>
<span class="go">            (2, &#39;one&#39;),</span>
<span class="go">            (2, &#39;two&#39;)],</span>
<span class="go">           names=[&#39;first&#39;, &#39;second&#39;])</span>

<span class="gp">In [348]: </span><span class="n">index</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[348]: </span><span class="go">Index([&#39;one&#39;, &#39;two&#39;], dtype=&#39;object&#39;, name=&#39;second&#39;)</span>

<span class="gp">In [349]: </span><span class="n">index</span><span class="o">.</span><span class="n">set_levels</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[349]: </span>
<span class="go">MultiIndex([(0, &#39;a&#39;),</span>
<span class="go">            (0, &#39;b&#39;),</span>
<span class="go">            (1, &#39;a&#39;),</span>
<span class="go">            (1, &#39;b&#39;),</span>
<span class="go">            (2, &#39;a&#39;),</span>
<span class="go">            (2, &#39;b&#39;)],</span>
<span class="go">           names=[&#39;first&#39;, &#39;second&#39;])</span>
</pre></div>
</div>
</section>
<section id="set-operations-on-index-objects">
<span id="indexing-set-ops"></span><h3>Set operations on Index objects<a class="headerlink" href="#set-operations-on-index-objects" title="Link to this heading">#</a></h3>
<p>The two main operations are <code class="docutils literal notranslate"><span class="pre">union</span></code> and <code class="docutils literal notranslate"><span class="pre">intersection</span></code>.
Difference is provided via the <code class="docutils literal notranslate"><span class="pre">.difference()</span></code> method.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [350]: </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">])</span>

<span class="gp">In [351]: </span><span class="n">b</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>

<span class="gp">In [352]: </span><span class="n">a</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="gh">Out[352]: </span><span class="go">Index([&#39;a&#39;, &#39;b&#39;], dtype=&#39;object&#39;)</span>
</pre></div>
</div>
<p>Also available is the <code class="docutils literal notranslate"><span class="pre">symmetric_difference</span></code> operation, which returns elements
that appear in either <code class="docutils literal notranslate"><span class="pre">idx1</span></code> or <code class="docutils literal notranslate"><span class="pre">idx2</span></code>, but not in both. This is
equivalent to the Index created by <code class="docutils literal notranslate"><span class="pre">idx1.difference(idx2).union(idx2.difference(idx1))</span></code>,
with duplicates dropped.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [353]: </span><span class="n">idx1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="gp">In [354]: </span><span class="n">idx2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="gp">In [355]: </span><span class="n">idx1</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">idx2</span><span class="p">)</span>
<span class="gh">Out[355]: </span><span class="go">Index([1, 5], dtype=&#39;int64&#39;)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The resulting index from a set operation will be sorted in ascending order.</p>
</div>
<p>When performing <a class="reference internal" href="../reference/api/pandas.Index.union.html#pandas.Index.union" title="pandas.Index.union"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.union()</span></code></a> between indexes with different dtypes, the indexes
must be cast to a common dtype. Typically, though not always, this is object dtype. The
exception is when performing a union between integer and float data. In this case, the
integer values are converted to float</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [356]: </span><span class="n">idx1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="gp">In [357]: </span><span class="n">idx2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">])</span>

<span class="gp">In [358]: </span><span class="n">idx1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">idx2</span><span class="p">)</span>
<span class="gh">Out[358]: </span><span class="go">Index([0.0, 0.5, 1.0, 1.5, 2.0], dtype=&#39;float64&#39;)</span>
</pre></div>
</div>
</section>
<section id="missing-values">
<span id="indexing-missing"></span><h3>Missing values<a class="headerlink" href="#missing-values" title="Link to this heading">#</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Even though <code class="docutils literal notranslate"><span class="pre">Index</span></code> can hold missing values (<code class="docutils literal notranslate"><span class="pre">NaN</span></code>), it should be avoided
if you do not want any unexpected results. For example, some operations
exclude missing values implicitly.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Index.fillna</span></code> fills missing values with specified scalar value.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [359]: </span><span class="n">idx1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="gp">In [360]: </span><span class="n">idx1</span>
<span class="gh">Out[360]: </span><span class="go">Index([1.0, nan, 3.0, 4.0], dtype=&#39;float64&#39;)</span>

<span class="gp">In [361]: </span><span class="n">idx1</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[361]: </span><span class="go">Index([1.0, 2.0, 3.0, 4.0], dtype=&#39;float64&#39;)</span>

<span class="gp">In [362]: </span><span class="n">idx2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2011-01-01&#39;</span><span class="p">),</span>
<span class="gp">   .....: </span>                         <span class="n">pd</span><span class="o">.</span><span class="n">NaT</span><span class="p">,</span>
<span class="gp">   .....: </span>                         <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2011-01-03&#39;</span><span class="p">)])</span>
<span class="gp">   .....: </span>

<span class="gp">In [363]: </span><span class="n">idx2</span>
<span class="gh">Out[363]: </span><span class="go">DatetimeIndex([&#39;2011-01-01&#39;, &#39;NaT&#39;, &#39;2011-01-03&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>

<span class="gp">In [364]: </span><span class="n">idx2</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2011-01-02&#39;</span><span class="p">))</span>
<span class="gh">Out[364]: </span><span class="go">DatetimeIndex([&#39;2011-01-01&#39;, &#39;2011-01-02&#39;, &#39;2011-01-03&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
</section>
</section>
<section id="set-reset-index">
<h2>Set / reset index<a class="headerlink" href="#set-reset-index" title="Link to this heading">#</a></h2>
<p>Occasionally you will load or create a data set into a DataFrame and want to
add an index after you’ve already done so. There are a couple of different
ways.</p>
<section id="set-an-index">
<span id="indexing-set-index"></span><h3>Set an index<a class="headerlink" href="#set-an-index" title="Link to this heading">#</a></h3>
<p>DataFrame has a <a class="reference internal" href="../reference/api/pandas.DataFrame.set_index.html#pandas.DataFrame.set_index" title="pandas.DataFrame.set_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_index()</span></code></a> method which takes a column name
(for a regular <code class="docutils literal notranslate"><span class="pre">Index</span></code>) or a list of column names (for a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code>).
To create a new, re-indexed DataFrame:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [365]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                     <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                     <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                     <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>
<span class="gp">   .....: </span>

<span class="gp">In [366]: </span><span class="n">data</span>
<span class="gh">Out[366]: </span>
<span class="go">     a    b  c    d</span>
<span class="go">0  bar  one  z  1.0</span>
<span class="go">1  bar  two  y  2.0</span>
<span class="go">2  foo  one  x  3.0</span>
<span class="go">3  foo  two  w  4.0</span>

<span class="gp">In [367]: </span><span class="n">indexed1</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>

<span class="gp">In [368]: </span><span class="n">indexed1</span>
<span class="gh">Out[368]: </span>
<span class="go">     a    b    d</span>
<span class="go">c               </span>
<span class="go">z  bar  one  1.0</span>
<span class="go">y  bar  two  2.0</span>
<span class="go">x  foo  one  3.0</span>
<span class="go">w  foo  two  4.0</span>

<span class="gp">In [369]: </span><span class="n">indexed2</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span>

<span class="gp">In [370]: </span><span class="n">indexed2</span>
<span class="gh">Out[370]: </span>
<span class="go">         c    d</span>
<span class="go">a   b          </span>
<span class="go">bar one  z  1.0</span>
<span class="go">    two  y  2.0</span>
<span class="go">foo one  x  3.0</span>
<span class="go">    two  w  4.0</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">append</span></code> keyword option allow you to keep the existing index and append
the given columns to a MultiIndex:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [371]: </span><span class="n">frame</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gp">In [372]: </span><span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">append</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [373]: </span><span class="n">frame</span>
<span class="gh">Out[373]: </span>
<span class="go">           c    d</span>
<span class="go">c a   b          </span>
<span class="go">z bar one  z  1.0</span>
<span class="go">y bar two  y  2.0</span>
<span class="go">x foo one  x  3.0</span>
<span class="go">w foo two  w  4.0</span>
</pre></div>
</div>
<p>Other options in <code class="docutils literal notranslate"><span class="pre">set_index</span></code> allow you not drop the index columns.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [374]: </span><span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[374]: </span>
<span class="go">     a    b  c    d</span>
<span class="go">c                  </span>
<span class="go">z  bar  one  z  1.0</span>
<span class="go">y  bar  two  y  2.0</span>
<span class="go">x  foo  one  x  3.0</span>
<span class="go">w  foo  two  w  4.0</span>
</pre></div>
</div>
</section>
<section id="reset-the-index">
<h3>Reset the index<a class="headerlink" href="#reset-the-index" title="Link to this heading">#</a></h3>
<p>As a convenience, there is a new function on DataFrame called
<a class="reference internal" href="../reference/api/pandas.DataFrame.reset_index.html#pandas.DataFrame.reset_index" title="pandas.DataFrame.reset_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset_index()</span></code></a> which transfers the index values into the
DataFrame’s columns and sets a simple integer index.
This is the inverse operation of <a class="reference internal" href="../reference/api/pandas.DataFrame.set_index.html#pandas.DataFrame.set_index" title="pandas.DataFrame.set_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_index()</span></code></a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [375]: </span><span class="n">data</span>
<span class="gh">Out[375]: </span>
<span class="go">     a    b  c    d</span>
<span class="go">0  bar  one  z  1.0</span>
<span class="go">1  bar  two  y  2.0</span>
<span class="go">2  foo  one  x  3.0</span>
<span class="go">3  foo  two  w  4.0</span>

<span class="gp">In [376]: </span><span class="n">data</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="gh">Out[376]: </span>
<span class="go">   index    a    b  c    d</span>
<span class="go">0      0  bar  one  z  1.0</span>
<span class="go">1      1  bar  two  y  2.0</span>
<span class="go">2      2  foo  one  x  3.0</span>
<span class="go">3      3  foo  two  w  4.0</span>
</pre></div>
</div>
<p>The output is more similar to a SQL table or a record array. The names for the
columns derived from the index are the ones stored in the <code class="docutils literal notranslate"><span class="pre">names</span></code> attribute.</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">level</span></code> keyword to remove only a portion of the index:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [377]: </span><span class="n">frame</span>
<span class="gh">Out[377]: </span>
<span class="go">           c    d</span>
<span class="go">c a   b          </span>
<span class="go">z bar one  z  1.0</span>
<span class="go">y bar two  y  2.0</span>
<span class="go">x foo one  x  3.0</span>
<span class="go">w foo two  w  4.0</span>

<span class="gp">In [378]: </span><span class="n">frame</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[378]: </span>
<span class="go">         a  c    d</span>
<span class="go">c b               </span>
<span class="go">z one  bar  z  1.0</span>
<span class="go">y two  bar  y  2.0</span>
<span class="go">x one  foo  x  3.0</span>
<span class="go">w two  foo  w  4.0</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">reset_index</span></code> takes an optional parameter <code class="docutils literal notranslate"><span class="pre">drop</span></code> which if true simply
discards the index, instead of putting index values in the DataFrame’s columns.</p>
</section>
<section id="adding-an-ad-hoc-index">
<h3>Adding an ad hoc index<a class="headerlink" href="#adding-an-ad-hoc-index" title="Link to this heading">#</a></h3>
<p>You can assign a custom index to the <code class="docutils literal notranslate"><span class="pre">index</span></code> attribute:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [379]: </span><span class="n">df_idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>

<span class="gp">In [380]: </span><span class="n">df_idx</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>

<span class="gp">In [381]: </span><span class="n">df_idx</span>
<span class="gh">Out[381]: </span>
<span class="go">    0</span>
<span class="go">a    </span>
<span class="go">10  0</span>
<span class="go">20  1</span>
<span class="go">30  2</span>
<span class="go">40  3</span>
</pre></div>
</div>
</section>
</section>
<section id="returning-a-view-versus-a-copy">
<span id="indexing-view-versus-copy"></span><h2>Returning a view versus a copy<a class="headerlink" href="#returning-a-view-versus-a-copy" title="Link to this heading">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="reference internal" href="copy_on_write.html#copy-on-write"><span class="std std-ref">Copy-on-Write</span></a>
will become the new default in pandas 3.0. This means that chained indexing will
never work. As a consequence, the <code class="docutils literal notranslate"><span class="pre">SettingWithCopyWarning</span></code> won’t be necessary
anymore.
See <a class="reference internal" href="copy_on_write.html#copy-on-write-chained-assignment"><span class="std std-ref">this section</span></a>
for more context.
We recommend turning Copy-on-Write on to leverage the improvements with</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">pd.options.mode.copy_on_write</span> <span class="pre">=</span> <span class="pre">True</span>
<span class="pre">`</span></code></p>
<p>even before pandas 3.0 is available.</p>
</div>
<p>When setting values in a pandas object, care must be taken to avoid what is called
<code class="docutils literal notranslate"><span class="pre">chained</span> <span class="pre">indexing</span></code>. Here is an example.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [382]: </span><span class="n">dfmi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcd&#39;</span><span class="p">),</span>
<span class="gp">   .....: </span>                     <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;efgh&#39;</span><span class="p">),</span>
<span class="gp">   .....: </span>                     <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ijkl&#39;</span><span class="p">),</span>
<span class="gp">   .....: </span>                     <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;mnop&#39;</span><span class="p">)],</span>
<span class="gp">   .....: </span>                    <span class="n">columns</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                                                        <span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">]]))</span>
<span class="gp">   .....: </span>

<span class="gp">In [383]: </span><span class="n">dfmi</span>
<span class="gh">Out[383]: </span>
<span class="go">    one          two       </span>
<span class="go">  first second first second</span>
<span class="go">0     a      b     c      d</span>
<span class="go">1     e      f     g      h</span>
<span class="go">2     i      j     k      l</span>
<span class="go">3     m      n     o      p</span>
</pre></div>
</div>
<p>Compare these two access methods:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [384]: </span><span class="n">dfmi</span><span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">][</span><span class="s1">&#39;second&#39;</span><span class="p">]</span>
<span class="gh">Out[384]: </span>
<span class="go">0    b</span>
<span class="go">1    f</span>
<span class="go">2    j</span>
<span class="go">3    n</span>
<span class="go">Name: second, dtype: object</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [385]: </span><span class="n">dfmi</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">)]</span>
<span class="gh">Out[385]: </span>
<span class="go">0    b</span>
<span class="go">1    f</span>
<span class="go">2    j</span>
<span class="go">3    n</span>
<span class="go">Name: (one, second), dtype: object</span>
</pre></div>
</div>
<p>These both yield the same results, so which should you use? It is instructive to understand the order
of operations on these and why method 2 (<code class="docutils literal notranslate"><span class="pre">.loc</span></code>) is much preferred over method 1 (chained <code class="docutils literal notranslate"><span class="pre">[]</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">dfmi['one']</span></code> selects the first level of the columns and returns a DataFrame that is singly-indexed.
Then another Python operation <code class="docutils literal notranslate"><span class="pre">dfmi_with_one['second']</span></code> selects the series indexed by <code class="docutils literal notranslate"><span class="pre">'second'</span></code>.
This is indicated by the variable <code class="docutils literal notranslate"><span class="pre">dfmi_with_one</span></code> because pandas sees these operations as separate events.
e.g. separate calls to <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code>, so it has to treat them as linear operations, they happen one after another.</p>
<p>Contrast this to <code class="docutils literal notranslate"><span class="pre">df.loc[:,('one','second')]</span></code> which passes a nested tuple of <code class="docutils literal notranslate"><span class="pre">(slice(None),('one','second'))</span></code> to a single call to
<code class="docutils literal notranslate"><span class="pre">__getitem__</span></code>. This allows pandas to deal with this as a single entity. Furthermore this order of operations <em>can</em> be significantly
faster, and allows one to index <em>both</em> axes if so desired.</p>
<section id="why-does-assignment-fail-when-using-chained-indexing">
<h3>Why does assignment fail when using chained indexing?<a class="headerlink" href="#why-does-assignment-fail-when-using-chained-indexing" title="Link to this heading">#</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="reference internal" href="copy_on_write.html#copy-on-write"><span class="std std-ref">Copy-on-Write</span></a>
will become the new default in pandas 3.0. This means than chained indexing will
never work. As a consequence, the <code class="docutils literal notranslate"><span class="pre">SettingWithCopyWarning</span></code> won’t be necessary
anymore.
See <a class="reference internal" href="copy_on_write.html#copy-on-write-chained-assignment"><span class="std std-ref">this section</span></a>
for more context.
We recommend turning Copy-on-Write on to leverage the improvements with</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">pd.options.mode.copy_on_write</span> <span class="pre">=</span> <span class="pre">True</span>
<span class="pre">`</span></code></p>
<p>even before pandas 3.0 is available.</p>
</div>
<p>The problem in the previous section is just a performance issue. What’s up with
the <code class="docutils literal notranslate"><span class="pre">SettingWithCopy</span></code> warning? We don’t <strong>usually</strong> throw warnings around when
you do something that might cost a few extra milliseconds!</p>
<p>But it turns out that assigning to the product of chained indexing has
inherently unpredictable results. To see this, think about how the Python
interpreter executes this code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfmi</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>
<span class="c1"># becomes</span>
<span class="n">dfmi</span><span class="o">.</span><span class="n">loc</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">((</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">)),</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>But this code is handled differently:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dfmi</span><span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">][</span><span class="s1">&#39;second&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<span class="c1"># becomes</span>
<span class="n">dfmi</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">)</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>See that <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> in there? Outside of simple cases, it’s very hard to
predict whether it will return a view or a copy (it depends on the memory layout
of the array, about which pandas makes no guarantees), and therefore whether
the <code class="docutils literal notranslate"><span class="pre">__setitem__</span></code> will modify <code class="docutils literal notranslate"><span class="pre">dfmi</span></code> or a temporary object that gets thrown
out immediately afterward. <strong>That’s</strong> what <code class="docutils literal notranslate"><span class="pre">SettingWithCopy</span></code> is warning you
about!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You may be wondering whether we should be concerned about the <code class="docutils literal notranslate"><span class="pre">loc</span></code>
property in the first example. But <code class="docutils literal notranslate"><span class="pre">dfmi.loc</span></code> is guaranteed to be <code class="docutils literal notranslate"><span class="pre">dfmi</span></code>
itself with modified indexing behavior, so <code class="docutils literal notranslate"><span class="pre">dfmi.loc.__getitem__</span></code> /
<code class="docutils literal notranslate"><span class="pre">dfmi.loc.__setitem__</span></code> operate on <code class="docutils literal notranslate"><span class="pre">dfmi</span></code> directly. Of course,
<code class="docutils literal notranslate"><span class="pre">dfmi.loc.__getitem__(idx)</span></code> may be a view or a copy of <code class="docutils literal notranslate"><span class="pre">dfmi</span></code>.</p>
</div>
<p>Sometimes a <code class="docutils literal notranslate"><span class="pre">SettingWithCopy</span></code> warning will arise at times when there’s no
obvious chained indexing going on. <strong>These</strong> are the bugs that
<code class="docutils literal notranslate"><span class="pre">SettingWithCopy</span></code> is designed to catch! pandas is probably trying to warn you
that you’ve done this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">]]</span>  <span class="c1"># Is foo a view? A copy? Nobody knows!</span>
    <span class="c1"># ... many lines here ...</span>
    <span class="c1"># We don&#39;t know whether this will modify df or not!</span>
    <span class="n">foo</span><span class="p">[</span><span class="s1">&#39;quux&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">foo</span>
</pre></div>
</div>
<p>Yikes!</p>
</section>
<section id="evaluation-order-matters">
<span id="indexing-evaluation-order"></span><h3>Evaluation order matters<a class="headerlink" href="#evaluation-order-matters" title="Link to this heading">#</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="reference internal" href="copy_on_write.html#copy-on-write"><span class="std std-ref">Copy-on-Write</span></a>
will become the new default in pandas 3.0. This means than chained indexing will
never work. As a consequence, the <code class="docutils literal notranslate"><span class="pre">SettingWithCopyWarning</span></code> won’t be necessary
anymore.
See <a class="reference internal" href="copy_on_write.html#copy-on-write-chained-assignment"><span class="std std-ref">this section</span></a>
for more context.
We recommend turning Copy-on-Write on to leverage the improvements with</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">pd.options.mode.copy_on_write</span> <span class="pre">=</span> <span class="pre">True</span>
<span class="pre">`</span></code></p>
<p>even before pandas 3.0 is available.</p>
</div>
<p>When you use chained indexing, the order and type of the indexing operation
partially determine whether the result is a slice into the original object, or
a copy of the slice.</p>
<p>pandas has the <code class="docutils literal notranslate"><span class="pre">SettingWithCopyWarning</span></code> because assigning to a copy of a
slice is frequently not intentional, but a mistake caused by chained indexing
returning a copy where a slice was expected.</p>
<p>If you would like pandas to be more or less trusting about assignment to a
chained indexing expression, you can set the <a class="reference internal" href="options.html#options"><span class="std std-ref">option</span></a>
<code class="docutils literal notranslate"><span class="pre">mode.chained_assignment</span></code> to one of these values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'warn'</span></code>, the default, means a <code class="docutils literal notranslate"><span class="pre">SettingWithCopyWarning</span></code> is printed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'raise'</span></code> means pandas will raise a <code class="docutils literal notranslate"><span class="pre">SettingWithCopyError</span></code>
you have to deal with.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">None</span></code> will suppress the warnings entirely.</p></li>
</ul>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [386]: </span><span class="n">dfb</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                          <span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;six&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">7</span><span class="p">)})</span>
<span class="gp">   .....: </span>

<span class="go"># This will show the SettingWithCopyWarning</span>
<span class="go"># but the frame values will be set</span>
<span class="gp">In [387]: </span><span class="n">dfb</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">][</span><span class="n">dfb</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;o&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">42</span>
</pre></div>
</div>
<p>This however is operating on a copy and will not work.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [388]: </span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">option_context</span><span class="p">(</span><span class="s1">&#39;mode.chained_assignment&#39;</span><span class="p">,</span><span class="s1">&#39;warn&#39;</span><span class="p">):</span>
<span class="gp">   .....: </span>    <span class="n">dfb</span><span class="p">[</span><span class="n">dfb</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;o&#39;</span><span class="p">)][</span><span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>
<span class="gp">   .....: </span>
</pre></div>
</div>
<p>A chained assignment can also crop up in setting in a mixed dtype frame.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These setting rules apply to all of <code class="docutils literal notranslate"><span class="pre">.loc/.iloc</span></code>.</p>
</div>
<p>The following is the recommended access method using <code class="docutils literal notranslate"><span class="pre">.loc</span></code> for multiple items (using <code class="docutils literal notranslate"><span class="pre">mask</span></code>) and a single item using a fixed index:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [389]: </span><span class="n">dfc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                          <span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;six&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">7</span><span class="p">)})</span>
<span class="gp">   .....: </span>

<span class="gp">In [390]: </span><span class="n">dfd</span> <span class="o">=</span> <span class="n">dfc</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="go"># Setting multiple items using a mask</span>
<span class="gp">In [391]: </span><span class="n">mask</span> <span class="o">=</span> <span class="n">dfd</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>

<span class="gp">In [392]: </span><span class="n">dfd</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>

<span class="gp">In [393]: </span><span class="n">dfd</span>
<span class="gh">Out[393]: </span>
<span class="go">       a   c</span>
<span class="go">0    one  42</span>
<span class="go">1    one  42</span>
<span class="go">2    two   2</span>
<span class="go">3  three   3</span>
<span class="go">4    two   4</span>
<span class="go">5    one  42</span>
<span class="go">6    six   6</span>

<span class="go"># Setting a single item</span>
<span class="gp">In [394]: </span><span class="n">dfd</span> <span class="o">=</span> <span class="n">dfc</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [395]: </span><span class="n">dfd</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">11</span>

<span class="gp">In [396]: </span><span class="n">dfd</span>
<span class="gh">Out[396]: </span>
<span class="go">       a  c</span>
<span class="go">0    one  0</span>
<span class="go">1    one  1</span>
<span class="go">2     11  2</span>
<span class="go">3  three  3</span>
<span class="go">4    two  4</span>
<span class="go">5    one  5</span>
<span class="go">6    six  6</span>
</pre></div>
</div>
<p>The following <em>can</em> work at times, but it is not guaranteed to, and therefore should be avoided:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [397]: </span><span class="n">dfd</span> <span class="o">=</span> <span class="n">dfc</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [398]: </span><span class="n">dfd</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">111</span>

<span class="gp">In [399]: </span><span class="n">dfd</span>
<span class="gh">Out[399]: </span>
<span class="go">       a  c</span>
<span class="go">0    one  0</span>
<span class="go">1    one  1</span>
<span class="go">2    111  2</span>
<span class="go">3  three  3</span>
<span class="go">4    two  4</span>
<span class="go">5    one  5</span>
<span class="go">6    six  6</span>
</pre></div>
</div>
<p>Last, the subsequent example will <strong>not</strong> work at all, and so should be avoided:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [400]: </span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">option_context</span><span class="p">(</span><span class="s1">&#39;mode.chained_assignment&#39;</span><span class="p">,</span><span class="s1">&#39;raise&#39;</span><span class="p">):</span>
<span class="gp">   .....: </span>    <span class="n">dfd</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1111</span>
<span class="gp">   .....: </span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">SettingWithCopyError</span><span class="g g-Whitespace">                      </span>Traceback (most recent call last)
<span class="nn">&lt;ipython-input-400-32ce785aaa5b&gt;</span> in <span class="ni">?</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">option_context</span><span class="p">(</span><span class="s1">&#39;mode.chained_assignment&#39;</span><span class="p">,</span><span class="s1">&#39;raise&#39;</span><span class="p">):</span>
<span class="ne">----&gt; </span><span class="mi">2</span>     <span class="n">dfd</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1111</span>

<span class="nn">~/work/pandas/pandas/pandas/core/series.py</span> in <span class="ni">?</span><span class="nt">(self, key, value)</span>
<span class="g g-Whitespace">   </span><span class="mi">1284</span>                 <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1285</span> 
<span class="g g-Whitespace">   </span><span class="mi">1286</span>         <span class="n">check_dict_or_set_indexers</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1287</span>         <span class="n">key</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">apply_if_callable</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1288</span>         <span class="n">cacher_needs_updating</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_is_chained_assignment_possible</span><span class="p">()</span>
<span class="g g-Whitespace">   </span><span class="mi">1289</span> 
<span class="g g-Whitespace">   </span><span class="mi">1290</span>         <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="bp">Ellipsis</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1291</span>             <span class="n">key</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

<span class="nn">~/work/pandas/pandas/pandas/core/series.py</span> in <span class="ni">?</span><span class="nt">(self)</span>
<span class="g g-Whitespace">   </span><span class="mi">1489</span>             <span class="n">ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_cacher</span><span class="p">()</span>
<span class="g g-Whitespace">   </span><span class="mi">1490</span>             <span class="k">if</span> <span class="n">ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ref</span><span class="o">.</span><span class="n">_is_mixed_type</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1491</span>                 <span class="bp">self</span><span class="o">.</span><span class="n">_check_setitem_copy</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="s2">&quot;referent&quot;</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1492</span>             <span class="k">return</span> <span class="kc">True</span>
<span class="ne">-&gt; </span><span class="mi">1493</span>         <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_check_is_chained_assignment_possible</span><span class="p">()</span>

<span class="nn">~/work/pandas/pandas/pandas/core/generic.py</span> in <span class="ni">?</span><span class="nt">(self)</span>
<span class="g g-Whitespace">   </span><span class="mi">4395</span>         <span class="n">single</span><span class="o">-</span><span class="n">dtype</span> <span class="n">meaning</span> <span class="n">that</span> <span class="n">the</span> <span class="n">cacher</span> <span class="n">should</span> <span class="n">be</span> <span class="n">updated</span> <span class="n">following</span>
<span class="g g-Whitespace">   </span><span class="mi">4396</span>         <span class="n">setting</span><span class="o">.</span>
<span class="g g-Whitespace">   </span><span class="mi">4397</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">4398</span><span class="s2">         if self._is_copy:</span>
<span class="ne">-&gt; </span><span class="mi">4399</span><span class="s2">             self._check_setitem_copy(t=&quot;referent&quot;)</span>
<span class="g g-Whitespace">   </span><span class="mi">4400</span><span class="s2">         return False</span>

<span class="nn">~/work/pandas/pandas/pandas/core/generic.py</span> in <span class="ni">?</span><span class="nt">(self, t, force)</span>
<span class="g g-Whitespace">   </span><span class="mi">4469</span><span class="s2">                 &quot;indexing.html#returning-a-view-versus-a-copy&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">4470</span><span class="s2">             )</span>
<span class="g g-Whitespace">   </span><span class="mi">4471</span><span class="s2"> </span>
<span class="g g-Whitespace">   </span><span class="mi">4472</span><span class="s2">         if value == &quot;raise&quot;:</span>
<span class="ne">-&gt; </span><span class="mi">4473</span><span class="s2">             raise SettingWithCopyError(t)</span>
<span class="g g-Whitespace">   </span><span class="mi">4474</span><span class="s2">         if value == &quot;warn&quot;:</span>
<span class="g g-Whitespace">   </span><span class="mi">4475</span><span class="s2">             warnings.warn(t, SettingWithCopyWarning, stacklevel=find_stack_level())</span>

<span class="ne">SettingWithCopyError</span>: 
<span class="s2">A value is trying to be set on a copy of a slice from a DataFrame</span>

<span class="s2">See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The chained assignment warnings / exceptions are aiming to inform the user of a possibly invalid
assignment. There may be false positives; situations where a chained assignment is inadvertently
reported.</p>
</div>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="pyarrow.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">PyArrow Functionality</p>
      </div>
    </a>
    <a class="right-next"
       href="advanced.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">MultiIndex / advanced indexing</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#different-choices-for-indexing">Different choices for indexing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basics">Basics</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#attribute-access">Attribute access</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#slicing-ranges">Slicing ranges</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selection-by-label">Selection by label</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#slicing-with-labels">Slicing with labels</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selection-by-position">Selection by position</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selection-by-callable">Selection by callable</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#combining-positional-and-label-based-indexing">Combining positional and label-based indexing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reindexing">Reindexing</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-random-samples">Selecting random samples</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-with-enlargement">Setting with enlargement</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fast-scalar-value-getting-and-setting">Fast scalar value getting and setting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#boolean-indexing">Boolean indexing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-with-isin">Indexing with isin</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-where-method-and-masking">The <code class="xref py py-meth docutils literal notranslate"><span class="pre">where()</span></code> Method and Masking</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mask">Mask</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-with-enlargement-conditionally-using-numpy">Setting with enlargement conditionally using <code class="xref py py-func docutils literal notranslate"><span class="pre">numpy()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-query-method">The <code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code> Method</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multiindex-query-syntax"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code> <code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code> Syntax</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#query-use-cases"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code> Use Cases</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#query-python-versus-pandas-syntax-comparison"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code> Python versus pandas Syntax Comparison</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-in-and-not-in-operators">The <code class="docutils literal notranslate"><span class="pre">in</span></code> and <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> operators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#special-use-of-the-operator-with-list-objects">Special use of the <code class="docutils literal notranslate"><span class="pre">==</span></code> operator with <code class="docutils literal notranslate"><span class="pre">list</span></code> objects</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#boolean-operators">Boolean operators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#performance-of-query">Performance of <code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#duplicate-data">Duplicate data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dictionary-like-get-method">Dictionary-like <code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code> method</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#looking-up-values-by-index-column-labels">Looking up values by index/column labels</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#index-objects">Index objects</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-metadata">Setting metadata</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-operations-on-index-objects">Set operations on Index objects</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#missing-values">Missing values</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-reset-index">Set / reset index</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-an-index">Set an index</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reset-the-index">Reset the index</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-an-ad-hoc-index">Adding an ad hoc index</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#returning-a-view-versus-a-copy">Returning a view versus a copy</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-does-assignment-fail-when-using-chained-indexing">Why does assignment fail when using chained indexing?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluation-order-matters">Evaluation order matters</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/user_guide/indexing.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">
    &copy 2024, pandas via <a href="https://numfocus.org">NumFOCUS, Inc.</a> Hosted by <a href="https://www.ovhcloud.com">OVHcloud</a>.
</p></div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.0.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>