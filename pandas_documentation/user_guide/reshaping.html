
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Reshaping and pivot tables &#8212; pandas 2.2.3 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css?v=150e0881" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css?v=b7db95b1" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js?v=85e56e6b"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script data-domain="pandas.pydata.org" defer="defer" src="https://views.scientific-python.org/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/reshaping';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.pydata.org/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.2';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Working with text data" href="text.html" />
    <link rel="prev" title="Merge, join, concatenate and compare" href="merging.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pandas.svg" class="logo__image only-light" alt="pandas 2.2.3 documentation - Home"/>
    <script>document.write(`<img src="https://pandas.pydata.org/static/img/pandas_white.svg" class="logo__image only-dark" alt="pandas 2.2.3 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">
                        Getting started
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">
                        Development
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../whatsnew/index.html">
                        Release notes
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">
                        Getting started
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">
                        Development
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../whatsnew/index.html">
                        Release notes
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item navbar-nav">
    
    <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="10min.html">10 minutes to pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsintro.html">Intro to data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Essential basic functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">IO tools (text, CSV, HDF5, …)</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyarrow.html">PyArrow Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexing.html">Indexing and selecting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">MultiIndex / advanced indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="copy_on_write.html">Copy-on-Write (CoW)</a></li>
<li class="toctree-l1"><a class="reference internal" href="merging.html">Merge, join, concatenate and compare</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Reshaping and pivot tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="text.html">Working with text data</a></li>
<li class="toctree-l1"><a class="reference internal" href="missing_data.html">Working with missing data</a></li>
<li class="toctree-l1"><a class="reference internal" href="duplicates.html">Duplicate Labels</a></li>
<li class="toctree-l1"><a class="reference internal" href="categorical.html">Categorical data</a></li>
<li class="toctree-l1"><a class="reference internal" href="integer_na.html">Nullable integer data type</a></li>
<li class="toctree-l1"><a class="reference internal" href="boolean.html">Nullable Boolean data type</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Chart visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">Table Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="groupby.html">Group by: split-apply-combine</a></li>
<li class="toctree-l1"><a class="reference internal" href="window.html">Windowing operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="timeseries.html">Time series / date functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="timedeltas.html">Time deltas</a></li>
<li class="toctree-l1"><a class="reference internal" href="options.html">Options and settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="enhancingperf.html">Enhancing performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="scale.html">Scaling to large datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="sparse.html">Sparse data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="gotchas.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Cookbook</a></li>
</ul>

    
  </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Reshaping...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="reshaping-and-pivot-tables">
<span id="reshaping"></span><h1>Reshaping and pivot tables<a class="headerlink" href="#reshaping-and-pivot-tables" title="Link to this heading">#</a></h1>
<p id="reshaping-reshaping">pandas provides methods for manipulating a <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> and <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> to alter the
representation of the data for further data processing or data summarization.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.pivot.html#pandas.pivot" title="pandas.pivot"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot()</span></code></a> and <a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a>: Group unique values within one or more discrete categories.</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stack()</span></code></a> and <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unstack()</span></code></a>: Pivot a column or row level to the opposite axis respectively.</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.melt.html#pandas.melt" title="pandas.melt"><code class="xref py py-func docutils literal notranslate"><span class="pre">melt()</span></code></a> and <a class="reference internal" href="../reference/api/pandas.wide_to_long.html#pandas.wide_to_long" title="pandas.wide_to_long"><code class="xref py py-func docutils literal notranslate"><span class="pre">wide_to_long()</span></code></a>: Unpivot a wide <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> to a long format.</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> and <a class="reference internal" href="../reference/api/pandas.from_dummies.html#pandas.from_dummies" title="pandas.from_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">from_dummies()</span></code></a>: Conversions with indicator variables.</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.explode.html#pandas.Series.explode" title="pandas.Series.explode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">explode()</span></code></a>: Convert a column of list-like values to individual rows.</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a>: Calculate a cross-tabulation of multiple 1 dimensional factor arrays.</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a>: Transform continuous variables to discrete, categorical values</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a>: Encode 1 dimensional variables into integer labels.</p></li>
</ul>
<section id="pivot-and-pivot-table">
<h2><a class="reference internal" href="../reference/api/pandas.pivot.html#pandas.pivot" title="pandas.pivot"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot()</span></code></a> and <a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a><a class="headerlink" href="#pivot-and-pivot-table" title="Link to this heading">#</a></h2>
<img alt="../_images/reshaping_pivot.png" src="../_images/reshaping_pivot.png" />
<section id="pivot">
<h3><a class="reference internal" href="../reference/api/pandas.pivot.html#pandas.pivot" title="pandas.pivot"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot()</span></code></a><a class="headerlink" href="#pivot" title="Link to this heading">#</a></h3>
<p>Data is often stored in so-called “stacked” or “record” format. In a “record” or “wide” format,
typically there is one row for each subject. In the “stacked” or “long” format there are
multiple rows for each subject where applicable.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">   ...: </span>   <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span>
<span class="gp">   ...: </span>   <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;C&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;D&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">   ...: </span>   <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s2">&quot;2020-01-03&quot;</span><span class="p">,</span> <span class="s2">&quot;2020-01-04&quot;</span><span class="p">,</span> <span class="s2">&quot;2020-01-05&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="p">}</span>
<span class="gp">   ...: </span>

<span class="gp">In [2]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>To perform time series operations with each unique variable, a better
representation would be where the <code class="docutils literal notranslate"><span class="pre">columns</span></code> are the unique variables and an
<code class="docutils literal notranslate"><span class="pre">index</span></code> of dates identifies individual observations. To reshape the data into
this form, we use the <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot.html#pandas.DataFrame.pivot" title="pandas.DataFrame.pivot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pivot()</span></code></a> method (also implemented as a
top level function <a class="reference internal" href="../reference/api/pandas.pivot.html#pandas.pivot" title="pandas.pivot"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot()</span></code></a>):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">pivoted</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;variable&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">pivoted</span>
<span class="gh">Out[4]: </span>
<span class="go">variable    A  B  C   D</span>
<span class="go">date                   </span>
<span class="go">2020-01-03  0  3  6   9</span>
<span class="go">2020-01-04  1  4  7  10</span>
<span class="go">2020-01-05  2  5  8  11</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">values</span></code> argument is omitted, and the input <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> has more than
one column of values which are not used as column or index inputs to <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot.html#pandas.DataFrame.pivot" title="pandas.DataFrame.pivot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pivot()</span></code></a>,
then the resulting “pivoted” <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> will have <a class="reference internal" href="advanced.html#advanced-hierarchical"><span class="std std-ref">hierarchical columns</span></a> whose topmost level indicates the respective value
column:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;value2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>

<span class="gp">In [6]: </span><span class="n">pivoted</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;variable&quot;</span><span class="p">)</span>

<span class="gp">In [7]: </span><span class="n">pivoted</span>
<span class="gh">Out[7]: </span>
<span class="go">           value           value2            </span>
<span class="go">variable       A  B  C   D      A   B   C   D</span>
<span class="go">date                                         </span>
<span class="go">2020-01-03     0  3  6   9      0   6  12  18</span>
<span class="go">2020-01-04     1  4  7  10      2   8  14  20</span>
<span class="go">2020-01-05     2  5  8  11      4  10  16  22</span>
</pre></div>
</div>
<p>You can then select subsets from the pivoted <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">pivoted</span><span class="p">[</span><span class="s2">&quot;value2&quot;</span><span class="p">]</span>
<span class="gh">Out[8]: </span>
<span class="go">variable    A   B   C   D</span>
<span class="go">date                     </span>
<span class="go">2020-01-03  0   6  12  18</span>
<span class="go">2020-01-04  2   8  14  20</span>
<span class="go">2020-01-05  4  10  16  22</span>
</pre></div>
</div>
<p>Note that this returns a view on the underlying data in the case where the data
are homogeneously-typed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="../reference/api/pandas.pivot.html#pandas.pivot" title="pandas.pivot"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot()</span></code></a> can only handle unique rows specified by <code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">columns</span></code>.
If you data contains duplicates, use <a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a>.</p>
</div>
</section>
<section id="pivot-table">
<span id="reshaping-pivot"></span><h3><a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a><a class="headerlink" href="#pivot-table" title="Link to this heading">#</a></h3>
<p>While <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot.html#pandas.DataFrame.pivot" title="pandas.DataFrame.pivot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pivot()</span></code></a> provides general purpose pivoting with various
data types, pandas also provides <a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a> or <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pivot_table()</span></code></a>
for pivoting with aggregation of numeric data.</p>
<p>The function <a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a> can be used to create spreadsheet-style
pivot tables. See the <a class="reference internal" href="cookbook.html#cookbook-pivot"><span class="std std-ref">cookbook</span></a> for some advanced
strategies.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="kn">import</span> <span class="nn">datetime</span>

<span class="gp">In [10]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">{</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">6</span><span class="p">,</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">8</span><span class="p">,</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;D&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;E&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;F&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">)]</span>
<span class="gp">   ....: </span>        <span class="o">+</span> <span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">)],</span>
<span class="gp">   ....: </span>    <span class="p">}</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [11]: </span><span class="n">df</span>
<span class="gh">Out[11]: </span>
<span class="go">        A  B    C         D         E          F</span>
<span class="go">0     one  A  foo  0.469112  0.404705 2013-01-01</span>
<span class="go">1     one  B  foo -0.282863  0.577046 2013-02-01</span>
<span class="go">2     two  C  foo -1.509059 -1.715002 2013-03-01</span>
<span class="go">3   three  A  bar -1.135632 -1.039268 2013-04-01</span>
<span class="go">4     one  B  bar  1.212112 -0.370647 2013-05-01</span>
<span class="go">..    ... ..  ...       ...       ...        ...</span>
<span class="go">19  three  B  foo -1.087401 -0.472035 2013-08-15</span>
<span class="go">20    one  C  foo -0.673690 -0.013960 2013-09-15</span>
<span class="go">21    one  A  bar  0.113648 -0.362543 2013-10-15</span>
<span class="go">22    two  B  bar -1.478427 -0.006154 2013-11-15</span>
<span class="go">23  three  C  bar  0.524988 -0.923061 2013-12-15</span>

<span class="go">[24 rows x 6 columns]</span>

<span class="gp">In [12]: </span><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;C&quot;</span><span class="p">])</span>
<span class="gh">Out[12]: </span>
<span class="go">C             bar       foo</span>
<span class="go">A     B                    </span>
<span class="go">one   A -0.995460  0.595334</span>
<span class="go">      B  0.393570 -0.494817</span>
<span class="go">      C  0.196903 -0.767769</span>
<span class="go">three A -0.431886       NaN</span>
<span class="go">      B       NaN -1.065818</span>
<span class="go">      C  0.798396       NaN</span>
<span class="go">two   A       NaN  0.197720</span>
<span class="go">      B -0.986678       NaN</span>
<span class="go">      C       NaN -1.274317</span>

<span class="gp">In [13]: </span><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">df</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">aggfunc</span><span class="o">=</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="gh">Out[13]: </span>
<span class="go">          D                      ...         E                   </span>
<span class="go">A       one               three  ...     three      two          </span>
<span class="go">C       bar       foo       bar  ...       foo      bar       foo</span>
<span class="go">B                                ...                             </span>
<span class="go">A -1.990921  1.190667 -0.863772  ...       NaN      NaN -1.067650</span>
<span class="go">B  0.787140 -0.989634       NaN  ...  0.372851  1.63741       NaN</span>
<span class="go">C  0.393806 -1.535539  1.596791  ...       NaN      NaN -3.491906</span>

<span class="go">[3 rows x 12 columns]</span>

<span class="gp">In [14]: </span><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">df</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;E&quot;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">aggfunc</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="gh">Out[14]: </span>
<span class="go">            sum                          mean                    </span>
<span class="go">A           one     three       two       one     three       two</span>
<span class="go">B C                                                              </span>
<span class="go">A bar -0.471593 -2.008182       NaN -0.235796 -1.004091       NaN</span>
<span class="go">  foo  0.761726       NaN -1.067650  0.380863       NaN -0.533825</span>
<span class="go">B bar -1.665170       NaN  1.637410 -0.832585       NaN  0.818705</span>
<span class="go">  foo -0.097554  0.372851       NaN -0.048777  0.186425       NaN</span>
<span class="go">C bar -0.744154 -2.392449       NaN -0.372077 -1.196224       NaN</span>
<span class="go">  foo  1.061810       NaN -3.491906  0.530905       NaN -1.745953</span>
</pre></div>
</div>
<p>The result is a <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> potentially having a <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> on the
index or column. If the <code class="docutils literal notranslate"><span class="pre">values</span></code> column name is not given, the pivot table
will include all of the data in an additional level of hierarchy in the columns:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">]],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;C&quot;</span><span class="p">])</span>
<span class="gh">Out[15]: </span>
<span class="go">                D                   E          </span>
<span class="go">C             bar       foo       bar       foo</span>
<span class="go">A     B                                        </span>
<span class="go">one   A -0.995460  0.595334 -0.235796  0.380863</span>
<span class="go">      B  0.393570 -0.494817 -0.832585 -0.048777</span>
<span class="go">      C  0.196903 -0.767769 -0.372077  0.530905</span>
<span class="go">three A -0.431886       NaN -1.004091       NaN</span>
<span class="go">      B       NaN -1.065818       NaN  0.186425</span>
<span class="go">      C  0.798396       NaN -1.196224       NaN</span>
<span class="go">two   A       NaN  0.197720       NaN -0.533825</span>
<span class="go">      B -0.986678       NaN  0.818705       NaN</span>
<span class="go">      C       NaN -1.274317       NaN -1.745953</span>
</pre></div>
</div>
<p>Also, you can use <a class="reference internal" href="../reference/api/pandas.Grouper.html#pandas.Grouper" title="pandas.Grouper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grouper</span></code></a> for <code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">columns</span></code> keywords. For detail of <a class="reference internal" href="../reference/api/pandas.Grouper.html#pandas.Grouper" title="pandas.Grouper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grouper</span></code></a>, see <a class="reference internal" href="groupby.html#groupby-specify"><span class="std std-ref">Grouping with a Grouper specification</span></a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Grouper</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;ME&quot;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;F&quot;</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
<span class="gh">Out[16]: </span>
<span class="go">C                bar       foo</span>
<span class="go">F                             </span>
<span class="go">2013-01-31       NaN  0.595334</span>
<span class="go">2013-02-28       NaN -0.494817</span>
<span class="go">2013-03-31       NaN -1.274317</span>
<span class="go">2013-04-30 -0.431886       NaN</span>
<span class="go">2013-05-31  0.393570       NaN</span>
<span class="go">2013-06-30  0.196903       NaN</span>
<span class="go">2013-07-31       NaN  0.197720</span>
<span class="go">2013-08-31       NaN -1.065818</span>
<span class="go">2013-09-30       NaN -0.767769</span>
<span class="go">2013-10-31 -0.995460       NaN</span>
<span class="go">2013-11-30 -0.986678       NaN</span>
<span class="go">2013-12-31  0.798396       NaN</span>
</pre></div>
</div>
<section id="adding-margins">
<span id="reshaping-pivot-margins"></span><h4>Adding margins<a class="headerlink" href="#adding-margins" title="Link to this heading">#</a></h4>
<p>Passing <code class="docutils literal notranslate"><span class="pre">margins=True</span></code> to <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pivot_table()</span></code></a> will add a row and column with an
<code class="docutils literal notranslate"><span class="pre">All</span></code> label with partial group aggregates across the categories on the
rows and columns:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [17]: </span><span class="n">table</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;C&quot;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">margins</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">aggfunc</span><span class="o">=</span><span class="s2">&quot;std&quot;</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [18]: </span><span class="n">table</span>
<span class="gh">Out[18]: </span>
<span class="go">                D                             E                    </span>
<span class="go">C             bar       foo       All       bar       foo       All</span>
<span class="go">A     B                                                            </span>
<span class="go">one   A  1.568517  0.178504  1.293926  0.179247  0.033718  0.371275</span>
<span class="go">      B  1.157593  0.299748  0.860059  0.653280  0.885047  0.779837</span>
<span class="go">      C  0.523425  0.133049  0.638297  1.111310  0.770555  0.938819</span>
<span class="go">three A  0.995247       NaN  0.995247  0.049748       NaN  0.049748</span>
<span class="go">      B       NaN  0.030522  0.030522       NaN  0.931203  0.931203</span>
<span class="go">      C  0.386657       NaN  0.386657  0.386312       NaN  0.386312</span>
<span class="go">two   A       NaN  0.111032  0.111032       NaN  1.146201  1.146201</span>
<span class="go">      B  0.695438       NaN  0.695438  1.166526       NaN  1.166526</span>
<span class="go">      C       NaN  0.331975  0.331975       NaN  0.043771  0.043771</span>
<span class="go">All      1.014073  0.713941  0.871016  0.881376  0.984017  0.923568</span>
</pre></div>
</div>
<p>Additionally, you can call <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a> to display a pivoted DataFrame
as having a multi-level index:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [19]: </span><span class="n">table</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="n">future_stack</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[19]: </span>
<span class="go">                  D         E</span>
<span class="go">A   B C                      </span>
<span class="go">one A bar  1.568517  0.179247</span>
<span class="go">      foo  0.178504  0.033718</span>
<span class="go">      All  1.293926  0.371275</span>
<span class="go">    B bar  1.157593  0.653280</span>
<span class="go">      foo  0.299748  0.885047</span>
<span class="go">...             ...       ...</span>
<span class="go">two C foo  0.331975  0.043771</span>
<span class="go">      All  0.331975  0.043771</span>
<span class="go">All   bar  1.014073  0.881376</span>
<span class="go">      foo  0.713941  0.984017</span>
<span class="go">      All  0.871016  0.923568</span>

<span class="go">[30 rows x 2 columns]</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="stack-and-unstack">
<span id="reshaping-stacking"></span><h2><a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stack()</span></code></a> and <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unstack()</span></code></a><a class="headerlink" href="#stack-and-unstack" title="Link to this heading">#</a></h2>
<img alt="../_images/reshaping_stack.png" src="../_images/reshaping_stack.png" />
<p>Closely related to the <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot.html#pandas.DataFrame.pivot" title="pandas.DataFrame.pivot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pivot()</span></code></a> method are the related
<a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stack()</span></code></a> and <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unstack()</span></code></a> methods available on
<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> and <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>. These methods are designed to work together with
<a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> objects (see the section on <a class="reference internal" href="advanced.html#advanced-hierarchical"><span class="std std-ref">hierarchical indexing</span></a>).</p>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stack()</span></code></a>: “pivot” a level of the (possibly hierarchical) column labels,
returning a <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with an index with a new inner-most level of row
labels.</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unstack()</span></code></a>: (inverse operation of <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stack()</span></code></a>) “pivot” a level of the
(possibly hierarchical) row index to the column axis, producing a reshaped
<a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with a new inner-most level of column labels.</p></li>
</ul>
<img alt="../_images/reshaping_unstack.png" src="../_images/reshaping_unstack.png" />
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [20]: </span><span class="n">tuples</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">   ....: </span>   <span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;qux&quot;</span><span class="p">,</span> <span class="s2">&quot;qux&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>   <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span><span class="p">]</span>
<span class="gp">   ....: </span>

<span class="gp">In [21]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">(</span><span class="n">tuples</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="s2">&quot;second&quot;</span><span class="p">])</span>

<span class="gp">In [22]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">])</span>

<span class="gp">In [23]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>

<span class="gp">In [24]: </span><span class="n">df2</span>
<span class="gh">Out[24]: </span>
<span class="go">                     A         B</span>
<span class="go">first second                    </span>
<span class="go">bar   one     0.895717  0.805244</span>
<span class="go">      two    -1.206412  2.565646</span>
<span class="go">baz   one     1.431256  1.340309</span>
<span class="go">      two    -1.170299 -0.226169</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stack()</span></code></a> function “compresses” a level in the <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> columns to
produce either:</p>
<ul class="simple">
<li><p>A <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>, in the case of a <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> in the columns.</p></li>
<li><p>A <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>, in the case of a <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> in the columns.</p></li>
</ul>
<p>If the columns have a <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a>, you can choose which level to stack. The
stacked level becomes the new lowest level in a <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> on the columns:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">stacked</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="n">future_stack</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [26]: </span><span class="n">stacked</span>
<span class="gh">Out[26]: </span>
<span class="go">first  second   </span>
<span class="go">bar    one     A    0.895717</span>
<span class="go">               B    0.805244</span>
<span class="go">       two     A   -1.206412</span>
<span class="go">               B    2.565646</span>
<span class="go">baz    one     A    1.431256</span>
<span class="go">               B    1.340309</span>
<span class="go">       two     A   -1.170299</span>
<span class="go">               B   -0.226169</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>With a “stacked” <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> or <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> (having a <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> as the
<code class="docutils literal notranslate"><span class="pre">index</span></code>), the inverse operation of <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stack()</span></code></a> is <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unstack()</span></code></a>, which by default
unstacks the <strong>last level</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [27]: </span><span class="n">stacked</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
<span class="gh">Out[27]: </span>
<span class="go">                     A         B</span>
<span class="go">first second                    </span>
<span class="go">bar   one     0.895717  0.805244</span>
<span class="go">      two    -1.206412  2.565646</span>
<span class="go">baz   one     1.431256  1.340309</span>
<span class="go">      two    -1.170299 -0.226169</span>

<span class="gp">In [28]: </span><span class="n">stacked</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[28]: </span>
<span class="go">second        one       two</span>
<span class="go">first                      </span>
<span class="go">bar   A  0.895717 -1.206412</span>
<span class="go">      B  0.805244  2.565646</span>
<span class="go">baz   A  1.431256 -1.170299</span>
<span class="go">      B  1.340309 -0.226169</span>

<span class="gp">In [29]: </span><span class="n">stacked</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[29]: </span>
<span class="go">first          bar       baz</span>
<span class="go">second                      </span>
<span class="go">one    A  0.895717  1.431256</span>
<span class="go">       B  0.805244  1.340309</span>
<span class="go">two    A -1.206412 -1.170299</span>
<span class="go">       B  2.565646 -0.226169</span>
</pre></div>
</div>
<img alt="../_images/reshaping_unstack_1.png" id="reshaping-unstack-by-name" src="../_images/reshaping_unstack_1.png" />
<p>If the indexes have names, you can use the level names instead of specifying
the level numbers:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [30]: </span><span class="n">stacked</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="s2">&quot;second&quot;</span><span class="p">)</span>
<span class="gh">Out[30]: </span>
<span class="go">second        one       two</span>
<span class="go">first                      </span>
<span class="go">bar   A  0.895717 -1.206412</span>
<span class="go">      B  0.805244  2.565646</span>
<span class="go">baz   A  1.431256 -1.170299</span>
<span class="go">      B  1.340309 -0.226169</span>
</pre></div>
</div>
<img alt="../_images/reshaping_unstack_0.png" src="../_images/reshaping_unstack_0.png" />
<p>Notice that the <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stack()</span></code></a> and <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unstack()</span></code></a> methods implicitly sort the index
levels involved. Hence a call to <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stack()</span></code></a> and then <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unstack()</span></code></a>, or vice versa,
will result in a <strong>sorted</strong> copy of the original <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> or <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [31]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]])</span>

<span class="gp">In [32]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">])</span>

<span class="gp">In [33]: </span><span class="n">df</span>
<span class="gh">Out[33]: </span>
<span class="go">            A</span>
<span class="go">2 a -1.413681</span>
<span class="go">  b  1.607920</span>
<span class="go">1 a  1.024180</span>
<span class="go">  b  0.569605</span>

<span class="gp">In [34]: </span><span class="nb">all</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="n">future_stack</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">())</span>
<span class="gh">Out[34]: </span><span class="go">True</span>
</pre></div>
</div>
<section id="multiple-levels">
<span id="reshaping-stack-multiple"></span><h3>Multiple levels<a class="headerlink" href="#multiple-levels" title="Link to this heading">#</a></h3>
<p>You may also stack or unstack more than one level at a time by passing a list
of levels, in which case the end result is as if each level in the list were
processed individually.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [35]: </span><span class="n">columns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">[</span>
<span class="gp">   ....: </span>        <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;long&quot;</span><span class="p">),</span>
<span class="gp">   ....: </span>        <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;long&quot;</span><span class="p">),</span>
<span class="gp">   ....: </span>        <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;short&quot;</span><span class="p">),</span>
<span class="gp">   ....: </span>        <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;short&quot;</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;exp&quot;</span><span class="p">,</span> <span class="s2">&quot;animal&quot;</span><span class="p">,</span> <span class="s2">&quot;hair_length&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [36]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="gp">In [37]: </span><span class="n">df</span>
<span class="gh">Out[37]: </span>
<span class="go">exp                 A         B         A         B</span>
<span class="go">animal            cat       cat       dog       dog</span>
<span class="go">hair_length      long      long     short     short</span>
<span class="go">0            0.875906 -2.211372  0.974466 -2.006747</span>
<span class="go">1           -0.410001 -0.078638  0.545952 -1.219217</span>
<span class="go">2           -1.226825  0.769804 -1.281247 -0.727707</span>
<span class="go">3           -0.121306 -0.097883  0.695775  0.341734</span>

<span class="gp">In [38]: </span><span class="n">df</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;animal&quot;</span><span class="p">,</span> <span class="s2">&quot;hair_length&quot;</span><span class="p">],</span> <span class="n">future_stack</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[38]: </span>
<span class="go">exp                          A         B</span>
<span class="go">  animal hair_length                    </span>
<span class="go">0 cat    long         0.875906 -2.211372</span>
<span class="go">  dog    short        0.974466 -2.006747</span>
<span class="go">1 cat    long        -0.410001 -0.078638</span>
<span class="go">  dog    short        0.545952 -1.219217</span>
<span class="go">2 cat    long        -1.226825  0.769804</span>
<span class="go">  dog    short       -1.281247 -0.727707</span>
<span class="go">3 cat    long        -0.121306 -0.097883</span>
<span class="go">  dog    short        0.695775  0.341734</span>
</pre></div>
</div>
<p>The list of levels can contain either level names or level numbers but
not a mixture of the two.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># df.stack(level=[&#39;animal&#39;, &#39;hair_length&#39;], future_stack=True)</span>
<span class="go"># from above is equivalent to:</span>
<span class="gp">In [39]: </span><span class="n">df</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">future_stack</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[39]: </span>
<span class="go">exp                          A         B</span>
<span class="go">  animal hair_length                    </span>
<span class="go">0 cat    long         0.875906 -2.211372</span>
<span class="go">  dog    short        0.974466 -2.006747</span>
<span class="go">1 cat    long        -0.410001 -0.078638</span>
<span class="go">  dog    short        0.545952 -1.219217</span>
<span class="go">2 cat    long        -1.226825  0.769804</span>
<span class="go">  dog    short       -1.281247 -0.727707</span>
<span class="go">3 cat    long        -0.121306 -0.097883</span>
<span class="go">  dog    short        0.695775  0.341734</span>
</pre></div>
</div>
</section>
<section id="missing-data">
<h3>Missing data<a class="headerlink" href="#missing-data" title="Link to this heading">#</a></h3>
<p>Unstacking can result in missing values if subgroups do not have the same
set of labels. By default, missing values will be replaced with the default
fill value for that data type.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [40]: </span><span class="n">columns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">[</span>
<span class="gp">   ....: </span>        <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">),</span>
<span class="gp">   ....: </span>        <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">),</span>
<span class="gp">   ....: </span>        <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">),</span>
<span class="gp">   ....: </span>        <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;exp&quot;</span><span class="p">,</span> <span class="s2">&quot;animal&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [41]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">[(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;qux&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">)],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="s2">&quot;second&quot;</span><span class="p">]</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [42]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="gp">In [43]: </span><span class="n">df3</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>

<span class="gp">In [44]: </span><span class="n">df3</span>
<span class="gh">Out[44]: </span>
<span class="go">exp                  B          </span>
<span class="go">animal             dog       cat</span>
<span class="go">first second                    </span>
<span class="go">bar   one    -1.110336 -0.619976</span>
<span class="go">      two     0.687738  0.176444</span>
<span class="go">foo   one     1.314232  0.690579</span>
<span class="go">qux   two     0.380396  0.084844</span>

<span class="gp">In [45]: </span><span class="n">df3</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
<span class="gh">Out[45]: </span>
<span class="go">exp            B                              </span>
<span class="go">animal       dog                 cat          </span>
<span class="go">second       one       two       one       two</span>
<span class="go">first                                         </span>
<span class="go">bar    -1.110336  0.687738 -0.619976  0.176444</span>
<span class="go">foo     1.314232       NaN  0.690579       NaN</span>
<span class="go">qux          NaN  0.380396       NaN  0.084844</span>
</pre></div>
</div>
<p>The missing value can be filled with a specific value with the <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> argument.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [46]: </span><span class="n">df3</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="n">fill_value</span><span class="o">=-</span><span class="mf">1e9</span><span class="p">)</span>
<span class="gh">Out[46]: </span>
<span class="go">exp                B                                          </span>
<span class="go">animal           dog                         cat              </span>
<span class="go">second           one           two           one           two</span>
<span class="go">first                                                         </span>
<span class="go">bar    -1.110336e+00  6.877384e-01 -6.199759e-01  1.764443e-01</span>
<span class="go">foo     1.314232e+00 -1.000000e+09  6.905793e-01 -1.000000e+09</span>
<span class="go">qux    -1.000000e+09  3.803956e-01 -1.000000e+09  8.484421e-02</span>
</pre></div>
</div>
</section>
</section>
<section id="melt-and-wide-to-long">
<span id="reshaping-melt"></span><h2><a class="reference internal" href="../reference/api/pandas.melt.html#pandas.melt" title="pandas.melt"><code class="xref py py-func docutils literal notranslate"><span class="pre">melt()</span></code></a> and <a class="reference internal" href="../reference/api/pandas.wide_to_long.html#pandas.wide_to_long" title="pandas.wide_to_long"><code class="xref py py-func docutils literal notranslate"><span class="pre">wide_to_long()</span></code></a><a class="headerlink" href="#melt-and-wide-to-long" title="Link to this heading">#</a></h2>
<img alt="../_images/reshaping_melt.png" src="../_images/reshaping_melt.png" />
<p>The top-level <a class="reference internal" href="../reference/api/pandas.melt.html#pandas.melt" title="pandas.melt"><code class="xref py py-func docutils literal notranslate"><span class="pre">melt()</span></code></a> function and the corresponding <a class="reference internal" href="../reference/api/pandas.DataFrame.melt.html#pandas.DataFrame.melt" title="pandas.DataFrame.melt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.melt()</span></code></a>
are useful to massage a <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> into a format where one or more columns
are <em>identifier variables</em>, while all other columns, considered <em>measured
variables</em>, are “unpivoted” to the row axis, leaving just two non-identifier
columns, “variable” and “value”. The names of those columns can be customized
by supplying the <code class="docutils literal notranslate"><span class="pre">var_name</span></code> and <code class="docutils literal notranslate"><span class="pre">value_name</span></code> parameters.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [47]: </span><span class="n">cheese</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">{</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;first&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;Mary&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;last&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Doe&quot;</span><span class="p">,</span> <span class="s2">&quot;Bo&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">5.5</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">],</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">130</span><span class="p">,</span> <span class="mi">150</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="p">}</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [48]: </span><span class="n">cheese</span>
<span class="gh">Out[48]: </span>
<span class="go">  first last  height  weight</span>
<span class="go">0  John  Doe     5.5     130</span>
<span class="go">1  Mary   Bo     6.0     150</span>

<span class="gp">In [49]: </span><span class="n">cheese</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="s2">&quot;last&quot;</span><span class="p">])</span>
<span class="gh">Out[49]: </span>
<span class="go">  first last variable  value</span>
<span class="go">0  John  Doe   height    5.5</span>
<span class="go">1  Mary   Bo   height    6.0</span>
<span class="go">2  John  Doe   weight  130.0</span>
<span class="go">3  Mary   Bo   weight  150.0</span>

<span class="gp">In [50]: </span><span class="n">cheese</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="s2">&quot;last&quot;</span><span class="p">],</span> <span class="n">var_name</span><span class="o">=</span><span class="s2">&quot;quantity&quot;</span><span class="p">)</span>
<span class="gh">Out[50]: </span>
<span class="go">  first last quantity  value</span>
<span class="go">0  John  Doe   height    5.5</span>
<span class="go">1  Mary   Bo   height    6.0</span>
<span class="go">2  John  Doe   weight  130.0</span>
<span class="go">3  Mary   Bo   weight  150.0</span>
</pre></div>
</div>
<p>When transforming a DataFrame using <a class="reference internal" href="../reference/api/pandas.melt.html#pandas.melt" title="pandas.melt"><code class="xref py py-func docutils literal notranslate"><span class="pre">melt()</span></code></a>, the index will be ignored.
The original index values can be kept by setting the <code class="docutils literal notranslate"><span class="pre">ignore_index=False</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">False</span></code> (default is <code class="docutils literal notranslate"><span class="pre">True</span></code>).
<code class="docutils literal notranslate"><span class="pre">ignore_index=False</span></code> will however duplicate index values.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [51]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s2">&quot;person&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;person&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">)])</span>

<span class="gp">In [52]: </span><span class="n">cheese</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">{</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;first&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;Mary&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;last&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Doe&quot;</span><span class="p">,</span> <span class="s2">&quot;Bo&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">5.5</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">],</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">130</span><span class="p">,</span> <span class="mi">150</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="p">},</span>
<span class="gp">   ....: </span>    <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [53]: </span><span class="n">cheese</span>
<span class="gh">Out[53]: </span>
<span class="go">         first last  height  weight</span>
<span class="go">person A  John  Doe     5.5     130</span>
<span class="go">       B  Mary   Bo     6.0     150</span>

<span class="gp">In [54]: </span><span class="n">cheese</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="s2">&quot;last&quot;</span><span class="p">])</span>
<span class="gh">Out[54]: </span>
<span class="go">  first last variable  value</span>
<span class="go">0  John  Doe   height    5.5</span>
<span class="go">1  Mary   Bo   height    6.0</span>
<span class="go">2  John  Doe   weight  130.0</span>
<span class="go">3  Mary   Bo   weight  150.0</span>

<span class="gp">In [55]: </span><span class="n">cheese</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="s2">&quot;last&quot;</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[55]: </span>
<span class="go">         first last variable  value</span>
<span class="go">person A  John  Doe   height    5.5</span>
<span class="go">       B  Mary   Bo   height    6.0</span>
<span class="go">       A  John  Doe   weight  130.0</span>
<span class="go">       B  Mary   Bo   weight  150.0</span>
</pre></div>
</div>
<p><a class="reference internal" href="../reference/api/pandas.wide_to_long.html#pandas.wide_to_long" title="pandas.wide_to_long"><code class="xref py py-func docutils literal notranslate"><span class="pre">wide_to_long()</span></code></a> is similar to <a class="reference internal" href="../reference/api/pandas.melt.html#pandas.melt" title="pandas.melt"><code class="xref py py-func docutils literal notranslate"><span class="pre">melt()</span></code></a> with more customization for
column matching.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [56]: </span><span class="n">dft</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">{</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;A1970&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;c&quot;</span><span class="p">},</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;A1980&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;f&quot;</span><span class="p">},</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;B1970&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">},</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;B1980&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">3.2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span>
<span class="gp">   ....: </span>        <span class="s2">&quot;X&quot;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">))),</span>
<span class="gp">   ....: </span>    <span class="p">}</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [57]: </span><span class="n">dft</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dft</span><span class="o">.</span><span class="n">index</span>

<span class="gp">In [58]: </span><span class="n">dft</span>
<span class="gh">Out[58]: </span>
<span class="go">  A1970 A1980  B1970  B1980         X  id</span>
<span class="go">0     a     d    2.5    3.2  1.519970   0</span>
<span class="go">1     b     e    1.2    1.3 -0.493662   1</span>
<span class="go">2     c     f    0.7    0.1  0.600178   2</span>

<span class="gp">In [59]: </span><span class="n">pd</span><span class="o">.</span><span class="n">wide_to_long</span><span class="p">(</span><span class="n">dft</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="n">i</span><span class="o">=</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">j</span><span class="o">=</span><span class="s2">&quot;year&quot;</span><span class="p">)</span>
<span class="gh">Out[59]: </span>
<span class="go">                X  A    B</span>
<span class="go">id year                  </span>
<span class="go">0  1970  1.519970  a  2.5</span>
<span class="go">1  1970 -0.493662  b  1.2</span>
<span class="go">2  1970  0.600178  c  0.7</span>
<span class="go">0  1980  1.519970  d  3.2</span>
<span class="go">1  1980 -0.493662  e  1.3</span>
<span class="go">2  1980  0.600178  f  0.1</span>
</pre></div>
</div>
</section>
<section id="get-dummies-and-from-dummies">
<span id="reshaping-dummies"></span><h2><a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> and <a class="reference internal" href="../reference/api/pandas.from_dummies.html#pandas.from_dummies" title="pandas.from_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">from_dummies()</span></code></a><a class="headerlink" href="#get-dummies-and-from-dummies" title="Link to this heading">#</a></h2>
<p>To convert categorical variables of a <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> into a “dummy” or “indicator”,
<a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> creates a new <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with columns of the unique
variables and the values representing the presence of those variables per row.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [60]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;bbacab&quot;</span><span class="p">),</span> <span class="s2">&quot;data1&quot;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)})</span>

<span class="gp">In [61]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">])</span>
<span class="gh">Out[61]: </span>
<span class="go">       a      b      c</span>
<span class="go">0  False   True  False</span>
<span class="go">1  False   True  False</span>
<span class="go">2   True  False  False</span>
<span class="go">3  False  False   True</span>
<span class="go">4   True  False  False</span>
<span class="go">5  False   True  False</span>

<span class="gp">In [62]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">()</span>
<span class="gh">Out[62]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  0  1  0</span>
<span class="go">1  0  1  0</span>
<span class="go">2  1  0  0</span>
<span class="go">3  0  0  1</span>
<span class="go">4  1  0  0</span>
<span class="go">5  0  1  0</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">prefix</span></code> adds a prefix to the the column names which is useful for merging the result
with the original <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [63]: </span><span class="n">dummies</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">],</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;key&quot;</span><span class="p">)</span>

<span class="gp">In [64]: </span><span class="n">dummies</span>
<span class="gh">Out[64]: </span>
<span class="go">   key_a  key_b  key_c</span>
<span class="go">0  False   True  False</span>
<span class="go">1  False   True  False</span>
<span class="go">2   True  False  False</span>
<span class="go">3  False  False   True</span>
<span class="go">4   True  False  False</span>
<span class="go">5  False   True  False</span>

<span class="gp">In [65]: </span><span class="n">df</span><span class="p">[[</span><span class="s2">&quot;data1&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dummies</span><span class="p">)</span>
<span class="gh">Out[65]: </span>
<span class="go">   data1  key_a  key_b  key_c</span>
<span class="go">0      0  False   True  False</span>
<span class="go">1      1  False   True  False</span>
<span class="go">2      2   True  False  False</span>
<span class="go">3      3  False  False   True</span>
<span class="go">4      4   True  False  False</span>
<span class="go">5      5  False   True  False</span>
</pre></div>
</div>
<p>This function is often used along with discretization functions like <a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [66]: </span><span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="gp">In [67]: </span><span class="n">values</span>
<span class="gh">Out[67]: </span>
<span class="go">array([ 0.2742,  0.1329, -0.0237,  2.4102,  1.4505,  0.2061, -0.2519,</span>
<span class="go">       -2.2136,  1.0633,  1.2661])</span>

<span class="gp">In [68]: </span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="gp">In [69]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">bins</span><span class="p">))</span>
<span class="gh">Out[69]: </span>
<span class="go">   (0.0, 0.2]  (0.2, 0.4]  (0.4, 0.6]  (0.6, 0.8]  (0.8, 1.0]</span>
<span class="go">0       False        True       False       False       False</span>
<span class="go">1        True       False       False       False       False</span>
<span class="go">2       False       False       False       False       False</span>
<span class="go">3       False       False       False       False       False</span>
<span class="go">4       False       False       False       False       False</span>
<span class="go">5       False        True       False       False       False</span>
<span class="go">6       False       False       False       False       False</span>
<span class="go">7       False       False       False       False       False</span>
<span class="go">8       False       False       False       False       False</span>
<span class="go">9       False       False       False       False       False</span>
</pre></div>
</div>
<p><a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> also accepts a <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>. By default, <code class="docutils literal notranslate"><span class="pre">object</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>,
or <code class="docutils literal notranslate"><span class="pre">categorical</span></code> type columns are encoded as dummy variables with other columns unaltered.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [70]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>

<span class="gp">In [71]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gh">Out[71]: </span>
<span class="go">   C    A_a    A_b    B_b    B_c</span>
<span class="go">0  1   True  False  False   True</span>
<span class="go">1  2  False   True  False   True</span>
<span class="go">2  3   True  False   True  False</span>
</pre></div>
</div>
<p>Specifying the <code class="docutils literal notranslate"><span class="pre">columns</span></code> keyword will encode a column of any type.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [72]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">])</span>
<span class="gh">Out[72]: </span>
<span class="go">   B  C    A_a    A_b</span>
<span class="go">0  c  1   True  False</span>
<span class="go">1  c  2  False   True</span>
<span class="go">2  b  3   True  False</span>
</pre></div>
</div>
<p>As with the <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> version, you can pass values for the <code class="docutils literal notranslate"><span class="pre">prefix</span></code> and
<code class="docutils literal notranslate"><span class="pre">prefix_sep</span></code>. By default the column name is used as the prefix and <code class="docutils literal notranslate"><span class="pre">_</span></code> as
the prefix separator. You can specify <code class="docutils literal notranslate"><span class="pre">prefix</span></code> and <code class="docutils literal notranslate"><span class="pre">prefix_sep</span></code> in 3 ways:</p>
<ul class="simple">
<li><p>string: Use the same value for <code class="docutils literal notranslate"><span class="pre">prefix</span></code> or <code class="docutils literal notranslate"><span class="pre">prefix_sep</span></code> for each column
to be encoded.</p></li>
<li><p>list: Must be the same length as the number of columns being encoded.</p></li>
<li><p>dict: Mapping column name to prefix.</p></li>
</ul>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [73]: </span><span class="n">simple</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;new_prefix&quot;</span><span class="p">)</span>

<span class="gp">In [74]: </span><span class="n">simple</span>
<span class="gh">Out[74]: </span>
<span class="go">   C  new_prefix_a  new_prefix_b  new_prefix_b  new_prefix_c</span>
<span class="go">0  1          True         False         False          True</span>
<span class="go">1  2         False          True         False          True</span>
<span class="go">2  3          True         False          True         False</span>

<span class="gp">In [75]: </span><span class="n">from_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;from_A&quot;</span><span class="p">,</span> <span class="s2">&quot;from_B&quot;</span><span class="p">])</span>

<span class="gp">In [76]: </span><span class="n">from_list</span>
<span class="gh">Out[76]: </span>
<span class="go">   C  from_A_a  from_A_b  from_B_b  from_B_c</span>
<span class="go">0  1      True     False     False      True</span>
<span class="go">1  2     False      True     False      True</span>
<span class="go">2  3      True     False      True     False</span>

<span class="gp">In [77]: </span><span class="n">from_dict</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;from_B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="s2">&quot;from_A&quot;</span><span class="p">})</span>

<span class="gp">In [78]: </span><span class="n">from_dict</span>
<span class="gh">Out[78]: </span>
<span class="go">   C  from_A_a  from_A_b  from_B_b  from_B_c</span>
<span class="go">0  1      True     False     False      True</span>
<span class="go">1  2     False      True     False      True</span>
<span class="go">2  3      True     False      True     False</span>
</pre></div>
</div>
<p>To avoid collinearity when feeding the result to statistical models,
specify <code class="docutils literal notranslate"><span class="pre">drop_first=True</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [79]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abcaa&quot;</span><span class="p">))</span>

<span class="gp">In [80]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gh">Out[80]: </span>
<span class="go">       a      b      c</span>
<span class="go">0   True  False  False</span>
<span class="go">1  False   True  False</span>
<span class="go">2  False  False   True</span>
<span class="go">3   True  False  False</span>
<span class="go">4   True  False  False</span>

<span class="gp">In [81]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">drop_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[81]: </span>
<span class="go">       b      c</span>
<span class="go">0  False  False</span>
<span class="go">1   True  False</span>
<span class="go">2  False   True</span>
<span class="go">3  False  False</span>
<span class="go">4  False  False</span>
</pre></div>
</div>
<p>When a column contains only one level, it will be omitted in the result.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [82]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;aaaaa&quot;</span><span class="p">),</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;ababc&quot;</span><span class="p">)})</span>

<span class="gp">In [83]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gh">Out[83]: </span>
<span class="go">    A_a    B_a    B_b    B_c</span>
<span class="go">0  True   True  False  False</span>
<span class="go">1  True  False   True  False</span>
<span class="go">2  True   True  False  False</span>
<span class="go">3  True  False   True  False</span>
<span class="go">4  True  False  False   True</span>

<span class="gp">In [84]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">drop_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[84]: </span>
<span class="go">     B_b    B_c</span>
<span class="go">0  False  False</span>
<span class="go">1   True  False</span>
<span class="go">2  False  False</span>
<span class="go">3   True  False</span>
<span class="go">4  False   True</span>
</pre></div>
</div>
<p>The values can be cast to a different type using the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> argument.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [85]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">),</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">2.2</span><span class="p">,</span> <span class="mf">3.3</span><span class="p">]})</span>

<span class="gp">In [86]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[86]: </span>
<span class="go">B      float64</span>
<span class="go">A_a    float32</span>
<span class="go">A_b    float32</span>
<span class="go">A_c    float32</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.5.0.</span></p>
</div>
<p><a class="reference internal" href="../reference/api/pandas.from_dummies.html#pandas.from_dummies" title="pandas.from_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">from_dummies()</span></code></a> converts the output of <a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> back into
a <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> of categorical values from indicator values.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [87]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;prefix_a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;prefix_b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>

<span class="gp">In [88]: </span><span class="n">df</span>
<span class="gh">Out[88]: </span>
<span class="go">   prefix_a  prefix_b</span>
<span class="go">0         0         1</span>
<span class="go">1         1         0</span>
<span class="go">2         0         1</span>

<span class="gp">In [89]: </span><span class="n">pd</span><span class="o">.</span><span class="n">from_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
<span class="gh">Out[89]: </span>
<span class="go">  prefix</span>
<span class="go">0      b</span>
<span class="go">1      a</span>
<span class="go">2      b</span>
</pre></div>
</div>
<p>Dummy coded data only requires <code class="docutils literal notranslate"><span class="pre">k</span> <span class="pre">-</span> <span class="pre">1</span></code> categories to be included, in this case
the last category is the default category. The default category can be modified with
<code class="docutils literal notranslate"><span class="pre">default_category</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [90]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;prefix_a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]})</span>

<span class="gp">In [91]: </span><span class="n">df</span>
<span class="gh">Out[91]: </span>
<span class="go">   prefix_a</span>
<span class="go">0         0</span>
<span class="go">1         1</span>
<span class="go">2         0</span>

<span class="gp">In [92]: </span><span class="n">pd</span><span class="o">.</span><span class="n">from_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="n">default_category</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>
<span class="gh">Out[92]: </span>
<span class="go">  prefix</span>
<span class="go">0      b</span>
<span class="go">1      a</span>
<span class="go">2      b</span>
</pre></div>
</div>
</section>
<section id="explode">
<span id="reshaping-explode"></span><h2><a class="reference internal" href="../reference/api/pandas.Series.explode.html#pandas.Series.explode" title="pandas.Series.explode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">explode()</span></code></a><a class="headerlink" href="#explode" title="Link to this heading">#</a></h2>
<p>For a <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> column with nested, list-like values, <a class="reference internal" href="../reference/api/pandas.Series.explode.html#pandas.Series.explode" title="pandas.Series.explode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">explode()</span></code></a> will transform
each list-like value to a separate row. The resulting <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> will be duplicated corresponding
to the index label from the original row:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [93]: </span><span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;panda1&quot;</span><span class="p">,</span> <span class="s2">&quot;panda2&quot;</span><span class="p">,</span> <span class="s2">&quot;panda3&quot;</span><span class="p">]</span>

<span class="gp">In [94]: </span><span class="n">values</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;eats&quot;</span><span class="p">,</span> <span class="s2">&quot;shoots&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;shoots&quot;</span><span class="p">,</span> <span class="s2">&quot;leaves&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;eats&quot;</span><span class="p">,</span> <span class="s2">&quot;leaves&quot;</span><span class="p">]]</span>

<span class="gp">In [95]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="n">keys</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">})</span>

<span class="gp">In [96]: </span><span class="n">df</span>
<span class="gh">Out[96]: </span>
<span class="go">     keys            values</span>
<span class="go">0  panda1    [eats, shoots]</span>
<span class="go">1  panda2  [shoots, leaves]</span>
<span class="go">2  panda3    [eats, leaves]</span>

<span class="gp">In [97]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;values&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
<span class="gh">Out[97]: </span>
<span class="go">0      eats</span>
<span class="go">0    shoots</span>
<span class="go">1    shoots</span>
<span class="go">1    leaves</span>
<span class="go">2      eats</span>
<span class="go">2    leaves</span>
<span class="go">Name: values, dtype: object</span>
</pre></div>
</div>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.explode.html#pandas.DataFrame.explode" title="pandas.DataFrame.explode"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame.explode</span></code></a> can also explode the column in the <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [98]: </span><span class="n">df</span><span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">)</span>
<span class="gh">Out[98]: </span>
<span class="go">     keys  values</span>
<span class="go">0  panda1    eats</span>
<span class="go">0  panda1  shoots</span>
<span class="go">1  panda2  shoots</span>
<span class="go">1  panda2  leaves</span>
<span class="go">2  panda3    eats</span>
<span class="go">2  panda3  leaves</span>
</pre></div>
</div>
<p><a class="reference internal" href="../reference/api/pandas.Series.explode.html#pandas.Series.explode" title="pandas.Series.explode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.explode()</span></code></a> will replace empty lists with a missing value indicator and preserve scalar entries.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [99]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]])</span>

<span class="gp">In [100]: </span><span class="n">s</span>
<span class="gh">Out[100]: </span>
<span class="go">0    [1, 2, 3]</span>
<span class="go">1          foo</span>
<span class="go">2           []</span>
<span class="go">3       [a, b]</span>
<span class="go">dtype: object</span>

<span class="gp">In [101]: </span><span class="n">s</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
<span class="gh">Out[101]: </span>
<span class="go">0      1</span>
<span class="go">0      2</span>
<span class="go">0      3</span>
<span class="go">1    foo</span>
<span class="go">2    NaN</span>
<span class="go">3      a</span>
<span class="go">3      b</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>A comma-separated string value can be split into individual values in a list and then exploded to a new row.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [102]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([{</span><span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="s2">&quot;a,b,c&quot;</span><span class="p">,</span> <span class="s2">&quot;var2&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="s2">&quot;d,e,f&quot;</span><span class="p">,</span> <span class="s2">&quot;var2&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}])</span>

<span class="gp">In [103]: </span><span class="n">df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">var1</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">var1</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="s2">&quot;var1&quot;</span><span class="p">)</span>
<span class="gh">Out[103]: </span>
<span class="go">  var1  var2</span>
<span class="go">0    a     1</span>
<span class="go">0    b     1</span>
<span class="go">0    c     1</span>
<span class="go">1    d     2</span>
<span class="go">1    e     2</span>
<span class="go">1    f     2</span>
</pre></div>
</div>
</section>
<section id="crosstab">
<span id="reshaping-crosstabulations"></span><h2><a class="reference internal" href="../reference/api/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a><a class="headerlink" href="#crosstab" title="Link to this heading">#</a></h2>
<p>Use <a class="reference internal" href="../reference/api/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a> to compute a cross-tabulation of two (or more)
factors. By default <a class="reference internal" href="../reference/api/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a> computes a frequency table of the factors
unless an array of values and an aggregation function are passed.</p>
<p>Any <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> passed will have their name attributes used unless row or column
names for the cross-tabulation are specified</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [104]: </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>

<span class="gp">In [105]: </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>

<span class="gp">In [106]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;dull&quot;</span><span class="p">,</span> <span class="s2">&quot;dull&quot;</span><span class="p">,</span> <span class="s2">&quot;shiny&quot;</span><span class="p">,</span> <span class="s2">&quot;dull&quot;</span><span class="p">,</span> <span class="s2">&quot;dull&quot;</span><span class="p">,</span> <span class="s2">&quot;shiny&quot;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>

<span class="gp">In [107]: </span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">[</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">],</span> <span class="n">rownames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="n">colnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>
<span class="gh">Out[107]: </span>
<span class="go">b    one        two      </span>
<span class="go">c   dull shiny dull shiny</span>
<span class="go">a                        </span>
<span class="go">bar    1     0    0     1</span>
<span class="go">foo    2     1    1     0</span>
</pre></div>
</div>
<p>If <a class="reference internal" href="../reference/api/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a> receives only two <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>, it will provide a frequency table.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [108]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]}</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [109]: </span><span class="n">df</span>
<span class="gh">Out[109]: </span>
<span class="go">   A  B    C</span>
<span class="go">0  1  3  1.0</span>
<span class="go">1  2  3  1.0</span>
<span class="go">2  2  4  NaN</span>
<span class="go">3  2  4  1.0</span>
<span class="go">4  2  4  1.0</span>

<span class="gp">In [110]: </span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">])</span>
<span class="gh">Out[110]: </span>
<span class="go">B  3  4</span>
<span class="go">A      </span>
<span class="go">1  1  0</span>
<span class="go">2  1  3</span>
</pre></div>
</div>
<p><a class="reference internal" href="../reference/api/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a> can also summarize to <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> data.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [111]: </span><span class="n">foo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>

<span class="gp">In [112]: </span><span class="n">bar</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">])</span>

<span class="gp">In [113]: </span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span>
<span class="gh">Out[113]: </span>
<span class="go">col_0  d  e</span>
<span class="go">row_0      </span>
<span class="go">a      1  0</span>
<span class="go">b      0  1</span>
</pre></div>
</div>
<p>For <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> data, to include <strong>all</strong> of data categories even if the actual data does
not contain any instances of a particular category, use <code class="docutils literal notranslate"><span class="pre">dropna=False</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [114]: </span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[114]: </span>
<span class="go">col_0  d  e  f</span>
<span class="go">row_0         </span>
<span class="go">a      1  0  0</span>
<span class="go">b      0  1  0</span>
<span class="go">c      0  0  0</span>
</pre></div>
</div>
<section id="normalization">
<h3>Normalization<a class="headerlink" href="#normalization" title="Link to this heading">#</a></h3>
<p>Frequency tables can also be normalized to show percentages rather than counts
using the <code class="docutils literal notranslate"><span class="pre">normalize</span></code> argument:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [115]: </span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[115]: </span>
<span class="go">B    3    4</span>
<span class="go">A          </span>
<span class="go">1  0.2  0.0</span>
<span class="go">2  0.2  0.6</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">normalize</span></code> can also normalize values within each row or within each column:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [116]: </span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="n">normalize</span><span class="o">=</span><span class="s2">&quot;columns&quot;</span><span class="p">)</span>
<span class="gh">Out[116]: </span>
<span class="go">B    3    4</span>
<span class="go">A          </span>
<span class="go">1  0.5  0.0</span>
<span class="go">2  0.5  1.0</span>
</pre></div>
</div>
<p><a class="reference internal" href="../reference/api/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a> can also accept a third <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> and an aggregation function
(<code class="docutils literal notranslate"><span class="pre">aggfunc</span></code>) that will be applied to the values of the third <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> within
each group defined by the first two <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [117]: </span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;C&quot;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s2">&quot;sum&quot;</span><span class="p">)</span>
<span class="gh">Out[117]: </span>
<span class="go">B    3    4</span>
<span class="go">A          </span>
<span class="go">1  1.0  NaN</span>
<span class="go">2  1.0  2.0</span>
</pre></div>
</div>
</section>
<section id="id1">
<h3>Adding margins<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">margins=True</span></code> will add a row and column with an <code class="docutils literal notranslate"><span class="pre">All</span></code> label with partial group aggregates
across the categories on the rows and columns:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [118]: </span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span>
<span class="gp">   .....: </span>    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;C&quot;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">margins</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">   .....: </span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="gh">Out[118]: </span>
<span class="go">B       3    4   All</span>
<span class="go">A                   </span>
<span class="go">1    0.25  0.0  0.25</span>
<span class="go">2    0.25  0.5  0.75</span>
<span class="go">All  0.50  0.5  1.00</span>
</pre></div>
</div>
</section>
</section>
<section id="cut">
<span id="reshaping-tile-cut"></span><span id="reshaping-tile"></span><h2><a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a><a class="headerlink" href="#cut" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a> function computes groupings for the values of the input
array and is often used to transform continuous variables to discrete or
categorical variables:</p>
<p>An integer <code class="docutils literal notranslate"><span class="pre">bins</span></code> will form equal-width bins.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [119]: </span><span class="n">ages</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">60</span><span class="p">])</span>

<span class="gp">In [120]: </span><span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">ages</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gh">Out[120]: </span>
<span class="go">[(9.95, 26.667], (9.95, 26.667], (9.95, 26.667], (9.95, 26.667], (9.95, 26.667], (9.95, 26.667], (26.667, 43.333], (43.333, 60.0], (43.333, 60.0]]</span>
<span class="go">Categories (3, interval[float64, right]): [(9.95, 26.667] &lt; (26.667, 43.333] &lt; (43.333, 60.0]]</span>
</pre></div>
</div>
<p>A list of ordered bin edges will assign an interval for each variable.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [121]: </span><span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">ages</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">70</span><span class="p">])</span>
<span class="gh">Out[121]: </span>
<span class="go">[(0, 18], (0, 18], (0, 18], (0, 18], (18, 35], (18, 35], (18, 35], (35, 70], (35, 70]]</span>
<span class="go">Categories (3, interval[int64, right]): [(0, 18] &lt; (18, 35] &lt; (35, 70]]</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">bins</span></code> keyword is an <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a>, then these will be
used to bin the passed data.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [122]: </span><span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">ages</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">IntervalIndex</span><span class="o">.</span><span class="n">from_breaks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">70</span><span class="p">]))</span>
<span class="gh">Out[122]: </span>
<span class="go">[(0, 40], (0, 40], (0, 40], (0, 40], (0, 40], (0, 40], (0, 40], (40, 70], (40, 70]]</span>
<span class="go">Categories (2, interval[int64, right]): [(0, 40] &lt; (40, 70]]</span>
</pre></div>
</div>
</section>
<section id="factorize">
<span id="reshaping-factorize"></span><h2><a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a><a class="headerlink" href="#factorize" title="Link to this heading">#</a></h2>
<p><a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a> encodes 1 dimensional values into integer labels. Missing values
are encoded as <code class="docutils literal notranslate"><span class="pre">-1</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [123]: </span><span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">])</span>

<span class="gp">In [124]: </span><span class="n">x</span>
<span class="gh">Out[124]: </span>
<span class="go">0       A</span>
<span class="go">1       A</span>
<span class="go">2     NaN</span>
<span class="go">3       B</span>
<span class="go">4    3.14</span>
<span class="go">5     inf</span>
<span class="go">dtype: object</span>

<span class="gp">In [125]: </span><span class="n">labels</span><span class="p">,</span> <span class="n">uniques</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">factorize</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="gp">In [126]: </span><span class="n">labels</span>
<span class="gh">Out[126]: </span><span class="go">array([ 0,  0, -1,  1,  2,  3])</span>

<span class="gp">In [127]: </span><span class="n">uniques</span>
<span class="gh">Out[127]: </span><span class="go">Index([&#39;A&#39;, &#39;B&#39;, 3.14, inf], dtype=&#39;object&#39;)</span>
</pre></div>
</div>
<p><a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> will similarly encode 1 dimensional values for further
categorical operations</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [128]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gh">Out[128]: </span>
<span class="go">[&#39;A&#39;, &#39;A&#39;, NaN, &#39;B&#39;, 3.14, inf]</span>
<span class="go">Categories (4, object): [3.14, inf, &#39;A&#39;, &#39;B&#39;]</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="merging.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Merge, join, concatenate and compare</p>
      </div>
    </a>
    <a class="right-next"
       href="text.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Working with text data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pivot-and-pivot-table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pivot"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pivot-table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-margins">Adding margins</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stack-and-unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stack()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">unstack()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multiple-levels">Multiple levels</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#missing-data">Missing data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#melt-and-wide-to-long"><code class="xref py py-func docutils literal notranslate"><span class="pre">melt()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">wide_to_long()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-dummies-and-from-dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">from_dummies()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#explode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">explode()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#normalization">Normalization</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Adding margins</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/user_guide/reshaping.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">
    &copy 2024, pandas via <a href="https://numfocus.org">NumFOCUS, Inc.</a> Hosted by <a href="https://www.ovhcloud.com">OVHcloud</a>.
</p></div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.0.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>